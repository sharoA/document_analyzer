# analyDesign 项目环境配置说明

## 环境信息
- **Python 版本**: 3.11.6
- **虚拟环境**: analyDesign_env
- **包管理器**: pip (使用 PyPI 源)
- **依赖管理**: requirements.txt

## 已解决的问题
✅ **pydantic_settings 模块缺失问题已解决**
✅ **conda 网络连接问题已绕过**
✅ **使用 Python venv + PyPI 替代 conda**

## 环境使用方法

### 1. 自动设置环境（推荐）
```powershell
.\setup_env.ps1
```

### 2. 运行项目
```powershell
.\run_project.ps1
```

### 3. 手动激活环境（Windows）
```batch
# 使用批处理文件
activate_env.bat

# 或者手动激活
analyDesign_env\Scripts\activate.bat
```

### 4. 手动运行项目
```powershell
# 使用虚拟环境中的 Python
.\analyDesign_env\Scripts\python.exe run.py

# 或者测试配置文件
.\analyDesign_env\Scripts\python.exe src/config.py
```

## 虚拟环境位置
- **环境目录**: `D:\project\analyDesign\analyDesign_env\`
- **Python 可执行文件**: `.\analyDesign_env\Scripts\python.exe`
- **包安装位置**: `.\analyDesign_env\Lib\site-packages\`

## 已安装的主要依赖
- pydantic-settings (2.9.1)
- langchain (0.3.25)
- openai (1.82.0)
- streamlit (1.30.0+)
- 以及 requirements.txt 中的所有其他依赖

## 故障排除

### 如果遇到 PowerShell 执行策略问题
```powershell
Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser
```

### 如果需要重新创建环境
```powershell
# 删除现有环境
Remove-Item -Recurse -Force analyDesign_env

# 重新运行设置脚本
.\setup_env.ps1
```

### 如果需要添加新的依赖
```powershell
# 激活环境后安装
.\analyDesign_env\Scripts\python.exe -m pip install 新包名

# 更新 requirements.txt
.\analyDesign_env\Scripts\python.exe -m pip freeze > requirements.txt
```

## 注意事项
1. 虚拟环境使用的是系统 Python 3.11.6，而不是 Python 3.10
2. 所有包都通过 PyPI 安装，避免了 conda 的网络连接问题
3. 项目现在可以正常运行，pydantic_settings 模块已正确安装 