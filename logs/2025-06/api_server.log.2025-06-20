2025-06-20 14:39:30 - api_server - INFO - 从配置文件读取火山引擎配置: {'api_key': '7fcb3541-9363-4bfa-90aa-19e9f691bc25', 'endpoint': 'https://ark.cn-beijing.volces.com/api/v3', 'max_tokens': 4000, 'model': 'ep-20250605091804-wmw6w', 'temperature': 0.7}
2025-06-20 14:39:31 - api_server - INFO - 火山引擎客户端初始化成功
2025-06-20 14:39:31 - api_server - INFO - Weaviate配置: http://localhost:8080
2025-06-20 14:39:54 - api_server - INFO - 分析服务管理器初始化成功
2025-06-20 14:39:54 - api_server - INFO - 分析服务管理器已集成到API服务器
2025-06-20 14:39:54 - api_server - INFO - 增强分析器初始化成功
2025-06-20 14:39:54 - api_server - INFO - 初始化任务存储数据库...
2025-06-20 14:39:54 - api_server - INFO - 任务存储数据库初始化成功
2025-06-20 14:40:04 - api_server - INFO - 从配置文件读取火山引擎配置: {'api_key': '7fcb3541-9363-4bfa-90aa-19e9f691bc25', 'endpoint': 'https://ark.cn-beijing.volces.com/api/v3', 'max_tokens': 4000, 'model': 'ep-20250605091804-wmw6w', 'temperature': 0.7}
2025-06-20 14:40:05 - api_server - INFO - 火山引擎客户端初始化成功
2025-06-20 14:40:05 - api_server - INFO - Weaviate配置: http://localhost:8080
2025-06-20 14:40:17 - api_server - INFO - 分析服务管理器初始化成功
2025-06-20 14:40:17 - api_server - INFO - 分析服务管理器已集成到API服务器
2025-06-20 14:40:17 - api_server - INFO - 增强分析器初始化成功
2025-06-20 14:40:17 - api_server - INFO - 初始化任务存储数据库...
2025-06-20 14:40:17 - api_server - INFO - 任务存储数据库初始化成功
2025-06-20 14:40:21 - api_server - INFO - ✅ OPTIONS start_analysis_v2 [200]
2025-06-20 14:40:22 - api_server - INFO - file_info包含content字段，长度: 1132360
2025-06-20 14:40:22 - api_server - INFO - base64解码成功，file_content类型: <class 'bytes'>, 大小: 849268 bytes
2025-06-20 14:40:22 - api_server - INFO - 任务 82bbcc04-00d2-4159-9064-96080141134e 进度更新: 0% - 分析流程启动中
2025-06-20 14:40:22 - api_server - INFO - 开始完整分析流程: 82bbcc04-00d2-4159-9064-96080141134e
2025-06-20 14:40:22 - api_server - INFO - V2 完整分析启动成功: 需求文档 - 一局对接链数优化V0.1.docx, 任务ID: 82bbcc04-00d2-4159-9064-96080141134e, 大小: 849268 bytes
2025-06-20 14:40:22 - api_server - INFO - 🚀 V2 完整分析启动: 需求文档 - 一局对接链数优化V0.1.docx, 任务ID: 82bbcc04-00d2-4159-9064-96080141134e
2025-06-20 14:40:22 - api_server - INFO - ✅ POST start_analysis_v2 [200] (0.13s)
2025-06-20 14:40:22 - api_server - INFO - 任务 82bbcc04-00d2-4159-9064-96080141134e 进度更新: 10% - 开始文档解析
2025-06-20 14:40:22 - api_server - INFO - 任务 82bbcc04-00d2-4159-9064-96080141134e 进度更新: 10% - 开始解析文件
2025-06-20 14:40:22 - api_server - INFO - 从文件路径读取: D:\ai_project\document_analyzer\uploads\temp\82bbcc04-00d2-4159-9064-96080141134e_需求文档 - 一局对接链数优化V0.1.docx
2025-06-20 14:40:22 - api_server - INFO - 检测到Word文档，使用Markdown转换: 82bbcc04-00d2-4159-9064-96080141134e_需求文档 - 一局对接链数优化V0.1.docx
2025-06-20 14:40:22 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.01s)
2025-06-20 14:40:22 - api_server - INFO - Word文档已成功转换为Markdown格式，长度: 2547 字符
2025-06-20 14:40:22 - api_server - INFO - 提取的文本内容已准备完毕
2025-06-20 14:40:22 - api_server - INFO - 转换后内容预览: 一局对接链数优化

需求文档

| 版本 | V0.1 |
| --- | --- |
| 撰写人 | 李威明 |
| 类型 | 系统对接 |
| 标签 | 链数、中建一局 |

中企云链（北京）金融信息服务有限公司

文档控制

需求方

| 日期 | 需求人 | 需求部门 | 说明 |
| --- | --- | --- | --- |
| 2025/4/30 | 徐艺 | 金融服务部 |  |

版本记录

| 日期 | 撰写人 | 版本 | 变更说明 |
| --- | --- | --- | --- |
| 2025/4/30 | 李威明 | V0.1 | 创建文档 |

目录

第1章 项目介绍	4

1.1 需求背景	4

1.2 建设目标及路线	4

第2章 整体说明	4

2.1 需求模型	4

2.2 功能结构图	4

2.3 信息结构图	4

2.4 项目范围	4

2.4.1 新增功能	4

2.4.2 调整功能	4

第3章 功能需求说明	4

3.1 调整说明	4

# 项目介绍

## 需求背景

- 一局对接链数的项目上线后，核心企业反馈，希望就已推送至平台的数据，在核心企业内部系统内修改部分信息（如额度信息）后，使用原业务编号再次推送至平台。就目前的接口校验逻辑，相同业务编号的业务数据不可重复推送。因而，需要结合核心企业需求，对接口的校验逻辑进行调整。

## 建设目标及路线

- 调整接口校验逻辑，兼容核心企业重推数据的场景。

# 整体说明

## 需求模型

## 功能结构图

## 信息结构图

## 项目范围

### 新增功能

### 调整功能

# 功能需求说明

## 接口校验规则调整

### 调整说明

本期对【确权业务申请】接口中关于bizSerialNo的校验规则进行调整，调整后的校验规则为：

| 序号 | 接口名称 | 隶属服务 | 校验点 | 逻辑 | 错误提示 |
| --- | --- | --- | --- | --- | --- |
| 1 | 确权业务申请 | zqyl-data-open | 入参校验 | bizSerialNo不可与已成功推送的非“已作废”、“已删除”状态的链数业务数据对应的bizSerialNo成功记录重复 | bizSerialNo已存在，请先登录平台进行作废/删除。 |

## 链数额度功能调整

### 调整说明

本期，对原“链数额度”功能做如下调整：

- 功能名称由“链数额度”变更为“额度管理”；

- 页面右上方新增“组织单元额度”按钮，当且仅当当前登录企业为多组织企业时展示该按钮。用户点击“组织单元额度”按钮，则跳转至“组织单元额度”列表页。

- 列表新增字段“额度类型”，置于“额度名称”之后，若为链数额度则取值为“链数额度”。

![图片2](http://localhost:8082/uploads/temp/82bbcc04-00d2-4159-9064-96080141134e_img_20250620_144022_1.png)

## 新增组织单元额度功能

### 调整说明

本期在核心企业侧链数额度功能下，新增“组织单元额度”列表页。支持用户查询当前登录企业下的具体组织单元的链数额度、云信额度明细。

具体如下：

- 交互说明：

![图片1](http://localhost:8082/uploads/temp/82bbcc04-00d2-4159-9064-96080141134e_img_20250620_144022_0.png)

（页面入口：用户点击“额度管理”列表页右上角的“组织单元额度”按钮，跳转至该页面。）

- 返回：用户点击返回，返回至“额度管理”列表页。

- 导出：点击导出，将列表中用户筛选后的数据以xls文件格式导出至本地。

- 列表筛选：用户确定筛选条件后，点击查询按钮，按照用户确定的筛选条件对列表进行筛选；点击重置，列表恢复至未筛选状态。

- 功能说明：

- 列表需展示分配至当前登录企业下所有组织单元的链数额度和云信额度明细。页面载入时，默认展示分配至各组织单元的链数额度明细；若用户将额度类型切换为“云信额度”，则需要展示分配至各组织单元的云信额度明细；若用户将额度类型切换为“全部”，则需要展示分配至各组织单元的链数和云信额度明细。

- 字段说明：

- 筛选字段：

| 序号 | 字段名 | 类型格式 | 长度 | 默认值 | 必填 | 规则 |
| --- | --- | --- | --- | --- | --- | --- |
| 1 | 组织单元名称 | 文本输入框 | - | - | - | 模糊搜索 |
| 2 | 额度名称 | 文本输入框 | - | - | - | 模糊搜索 |
| 3 | 额度类型 | 下拉列表 | - | 链数额度 | - | 下拉选项：链数额度、云信额度、全部 |

- 汇总字段：

| 序号 | 字段名 | 类型格式 | 规则 |
| --- | --- | --- | --- |
| 1 | 总额度（元） | 数值 | 满足筛选条件的列表数据的“已分配额度（元）”之和 |
| 2 | 已用额度（元） | 数值 | 满足筛选条件的列表数据的“已用额度（元）”之和 |
| 3 | 可用额度（元） | 数值 | 满足筛选条件的列表数据的“可用额度（元）”之和 |

- 备注：筛选条件更新后，汇总值需要同步更新计算。

- 列表字段：

| 序号 | 字段名 | 类型格式 | 规则 |
| --- | --- | --- | --- |
| 1 | 组织单元名称 | 字符串 |  |
| 2 | 额度名称 | 字符串 |  |
| 3 | 额度类型 | 字符串 |  |
| 4 | 已分配额度（元） | 数值 |  |
| 5 | 已用额度（元） | 数值 |  |
| 6 | 可用额度（元） | 数值 |  |

- 备注：列表默认按照组织单元名称为主要关键字、额度类型为次要关键字降序排列。
2025-06-20 14:40:22 - api_server - INFO - 提取的文本内容已准备完毕
2025-06-20 14:40:22 - api_server - INFO - 转换后内容预览: 一局对接链数优化

需求文档

| 版本 | V0.1 |
| --- | --- |
| 撰写人 | 李威明 |
| 类型 | 系统对接 |
| 标签 | 链数、中建一局 |

中企云链（北京）金融信息服务有限公司

文档控制

需求方

| 日期 | 需求人 | 需求部门 | 说明 |
| --- | --- | --- | --- |
| 2025/4/30 | 徐艺 | 金融服务部 |  |

版本记录

| 日期 | 撰写人 | 版本 | 变更说明 |
| --- | --- | --- | --- |
| 2025/4/30 | 李威明 | V0.1 | 创建文档 |

目录

第1章 项目介绍	4

1.1 需求背景	4

1.2 建设目标及路线	4

第2章 整体说明	4

2.1 需求模型	4

2.2 功能结构图	4

2.3 信息结构图	4

2.4 项目范围	4

2.4.1 新增功能	4

2.4.2 调整功能	4

第3章 功能需求说明	4

3.1 调整说明	4

# 项目介绍

## 需求背景

- 一局对接链数的项目上线后，核心企业反馈，希望就已推送至平台的数据，在核心企业内部系统内修改部分信息（如额度信息）后，使用原业务编号再次推送至平台。就目前的接口校验逻辑，相同业务编号的业务数据不可重复推送。因而，需要结合核心企业需求，对接口的校验逻辑进行调整。

## 建设目标及路线

- 调整接口校验逻辑，兼容核心企业重推数据的场景。

# 整体说明

## 需求模型

## 功能结构图

## 信息结构图

## 项目范围

### 新增功能

### 调整功能

# 功能需求说明

## 接口校验规则调整

### 调整说明

本期对【确权业务申请】接口中关于bizSerialNo的校验规则进行调整，调整后的校验规则为：

| 序号 | 接口名称 | 隶属服务 | 校验点 | 逻辑 | 错误提示 |
| --- | --- | --- | --- | --- | --- |
| 1 | 确权业务申请 | zqyl-data-open | 入参校验 | bizSerialNo不可与已成功推送的非“已作废”、“已删除”状态的链数业务数据对应的bizSerialNo成功记录重复 | bizSerialNo已存在，请先登录平台进行作废/删除。 |

## 链数额度功能调整

### 调整说明

本期，对原“链数额度”功能做如下调整：

- 功能名称由“链数额度”变更为“额度管理”；

- 页面右上方新增“组织单元额度”按钮，当且仅当当前登录企业为多组织企业时展示该按钮。用户点击“组织单元额度”按钮，则跳转至“组织单元额度”列表页。

- 列表新增字段“额度类型”，置于“额度名称”之后，若为链数额度则取值为“链数额度”。

![图片2](http://localhost:8082/uploads/temp/82bbcc04-00d2-4159-9064-96080141134e_img_20250620_144022_1.png)

## 新增组织单元额度功能

### 调整说明

本期在核心企业侧链数额度功能下，新增“组织单元额度”列表页。支持用户查询当前登录企业下的具体组织单元的链数额度、云信额度明细。

具体如下：

- 交互说明：

![图片1](http://localhost:8082/uploads/temp/82bbcc04-00d2-4159-9064-96080141134e_img_20250620_144022_0.png)

（页面入口：用户点击“额度管理”列表页右上角的“组织单元额度”按钮，跳转至该页面。）

- 返回：用户点击返回，返回至“额度管理”列表页。

- 导出：点击导出，将列表中用户筛选后的数据以xls文件格式导出至本地。

- 列表筛选：用户确定筛选条件后，点击查询按钮，按照用户确定的筛选条件对列表进行筛选；点击重置，列表恢复至未筛选状态。

- 功能说明：

- 列表需展示分配至当前登录企业下所有组织单元的链数额度和云信额度明细。页面载入时，默认展示分配至各组织单元的链数额度明细；若用户将额度类型切换为“云信额度”，则需要展示分配至各组织单元的云信额度明细；若用户将额度类型切换为“全部”，则需要展示分配至各组织单元的链数和云信额度明细。

- 字段说明：

- 筛选字段：

| 序号 | 字段名 | 类型格式 | 长度 | 默认值 | 必填 | 规则 |
| --- | --- | --- | --- | --- | --- | --- |
| 1 | 组织单元名称 | 文本输入框 | - | - | - | 模糊搜索 |
| 2 | 额度名称 | 文本输入框 | - | - | - | 模糊搜索 |
| 3 | 额度类型 | 下拉列表 | - | 链数额度 | - | 下拉选项：链数额度、云信额度、全部 |

- 汇总字段：

| 序号 | 字段名 | 类型格式 | 规则 |
| --- | --- | --- | --- |
| 1 | 总额度（元） | 数值 | 满足筛选条件的列表数据的“已分配额度（元）”之和 |
| 2 | 已用额度（元） | 数值 | 满足筛选条件的列表数据的“已用额度（元）”之和 |
| 3 | 可用额度（元） | 数值 | 满足筛选条件的列表数据的“可用额度（元）”之和 |

- 备注：筛选条件更新后，汇总值需要同步更新计算。

- 列表字段：

| 序号 | 字段名 | 类型格式 | 规则 |
| --- | --- | --- | --- |
| 1 | 组织单元名称 | 字符串 |  |
| 2 | 额度名称 | 字符串 |  |
| 3 | 额度类型 | 字符串 |  |
| 4 | 已分配额度（元） | 数值 |  |
| 5 | 已用额度（元） | 数值 |  |
| 6 | 可用额度（元） | 数值 |  |

- 备注：列表默认按照组织单元名称为主要关键字、额度类型为次要关键字降序排列。
2025-06-20 14:40:22 - api_server - INFO - 任务 82bbcc04-00d2-4159-9064-96080141134e 进度更新: 40% - 使用分析服务解析文档
2025-06-20 14:40:24 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:40:26 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:40:29 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:40:32 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:40:35 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:40:38 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:40:41 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:40:44 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:40:47 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:40:50 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:40:52 - api_server - INFO - 任务 82bbcc04-00d2-4159-9064-96080141134e 进度更新: 100% - 文档解析完成
2025-06-20 14:40:52 - api_server - INFO - ✅ 文件解析完成: 82bbcc04-00d2-4159-9064-96080141134e
2025-06-20 14:40:52 - api_server - INFO - 任务 82bbcc04-00d2-4159-9064-96080141134e 进度更新: 40% - 开始内容分析
2025-06-20 14:40:52 - api_server - INFO - 🔍 开始内容分析任务: 82bbcc04-00d2-4159-9064-96080141134e
2025-06-20 14:40:52 - api_server - INFO - 📊 任务当前状态: content_analyzing
2025-06-20 14:40:52 - api_server - INFO - 📊 任务当前进度: 40%
2025-06-20 14:40:52 - api_server - INFO - 📊 解析结果存在: True
2025-06-20 14:40:52 - api_server - INFO - 📊 分析服务管理器可用: True
2025-06-20 14:40:52 - api_server - INFO - 任务 82bbcc04-00d2-4159-9064-96080141134e 进度更新: 10% - 开始内容分析
2025-06-20 14:40:52 - api_server - INFO - ✅ 任务状态已更新为: content_analyzing
2025-06-20 14:40:52 - api_server - INFO - 从文件路径读取: D:\ai_project\document_analyzer\uploads\temp\82bbcc04-00d2-4159-9064-96080141134e_需求文档 - 一局对接链数优化V0.1.docx
2025-06-20 14:40:52 - api_server - INFO - 检测到Word文档，使用Markdown转换: 82bbcc04-00d2-4159-9064-96080141134e_需求文档 - 一局对接链数优化V0.1.docx
2025-06-20 14:40:52 - api_server - INFO - Word文档已成功转换为Markdown格式，长度: 2547 字符
2025-06-20 14:40:52 - api_server - INFO - 任务 82bbcc04-00d2-4159-9064-96080141134e 进度更新: 30% - 获取到上传文件
2025-06-20 14:40:52 - api_server - INFO - 📄 提取到文档内容，长度: 2547 字符
2025-06-20 14:40:52 - api_server - INFO - 任务 82bbcc04-00d2-4159-9064-96080141134e 进度更新: 35% - 内容分析管理器开始分析
2025-06-20 14:40:53 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:40:56 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:40:59 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:41:02 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:41:05 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:41:08 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 14:41:11 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:41:14 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 14:41:17 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:41:20 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:41:23 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:41:26 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:41:29 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 14:41:32 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 14:41:35 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:41:38 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:41:41 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:41:44 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:41:47 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:41:50 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:41:53 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:41:56 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:41:59 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:42:02 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:42:05 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:42:08 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:42:11 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:42:14 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:42:17 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:42:20 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:42:23 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:42:26 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:42:29 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:42:32 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:42:35 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:42:38 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:42:41 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 14:42:44 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:42:47 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:42:50 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:42:53 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:42:56 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:42:59 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:43:02 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:43:05 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:43:08 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:43:11 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:43:14 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:43:17 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:43:20 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:43:23 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:43:26 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:43:29 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:43:32 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:43:34 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.01s)
2025-06-20 14:43:36 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:43:38 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:43:41 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:43:44 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:43:47 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 14:43:50 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:43:53 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:43:56 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:43:59 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:44:02 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:44:05 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:44:08 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:44:11 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:44:14 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 14:44:17 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:44:20 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:44:23 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:44:26 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:44:29 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:44:32 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:44:35 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:44:38 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:44:41 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:44:44 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:44:47 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:44:50 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 14:44:53 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:44:56 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:44:59 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:45:02 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:45:05 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 14:45:08 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:45:11 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.01s)
2025-06-20 14:45:14 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:45:16 - api_server - INFO - 任务 82bbcc04-00d2-4159-9064-96080141134e 进度更新: 100% - 内容分析完成
2025-06-20 14:45:16 - api_server - INFO - ✅ 内容分析完成: 82bbcc04-00d2-4159-9064-96080141134e
2025-06-20 14:45:16 - api_server - INFO - 任务 82bbcc04-00d2-4159-9064-96080141134e 进度更新: 70% - 开始AI智能分析
2025-06-20 14:45:16 - api_server - INFO - 🤖 开始AI分析任务: 82bbcc04-00d2-4159-9064-96080141134e
2025-06-20 14:45:16 - api_server - INFO - 任务 82bbcc04-00d2-4159-9064-96080141134e 进度更新: 10% - 开始AI智能分析
2025-06-20 14:45:16 - api_server - INFO - 任务 82bbcc04-00d2-4159-9064-96080141134e 进度更新: 30% - 使用分析服务进行AI分析
2025-06-20 14:45:17 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:45:20 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:45:23 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:45:26 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:45:29 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:45:32 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:45:35 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 14:45:38 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:45:41 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:45:44 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:45:47 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:45:50 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:45:53 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:45:56 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:45:59 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:46:02 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:46:05 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:46:08 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:46:11 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:46:14 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:46:17 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:46:20 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:46:23 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 14:46:26 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:46:29 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:46:32 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:46:35 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:46:38 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:46:41 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:46:44 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:46:47 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:46:50 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:46:53 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:46:56 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:46:59 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:47:02 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:47:05 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:47:08 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:47:11 - api_server - INFO - 任务 82bbcc04-00d2-4159-9064-96080141134e 进度更新: 100% - AI分析完成
2025-06-20 14:47:11 - api_server - INFO - ✅ AI分析完成: 82bbcc04-00d2-4159-9064-96080141134e
2025-06-20 14:47:11 - api_server - INFO - 任务 82bbcc04-00d2-4159-9064-96080141134e 进度更新: 90% - 开始生成文档
2025-06-20 14:47:11 - api_server - INFO - 开始生成文档: 82bbcc04-00d2-4159-9064-96080141134e
2025-06-20 14:47:11 - api_server - INFO - 📄 开始文档生成任务: 82bbcc04-00d2-4159-9064-96080141134e
2025-06-20 14:47:11 - api_server - INFO - 任务 82bbcc04-00d2-4159-9064-96080141134e 进度更新: 10% - 准备生成文档
2025-06-20 14:47:11 - api_server - INFO - 任务 82bbcc04-00d2-4159-9064-96080141134e 进度更新: 30% - 获取分析结果数据
2025-06-20 14:47:11 - api_server - INFO - 生成文档数据结构: basic_info=True, document_parsing=True, content_analysis=True, ai_analysis=True
2025-06-20 14:47:11 - api_server - INFO - 任务 82bbcc04-00d2-4159-9064-96080141134e 进度更新: 60% - 转换为Markdown格式
2025-06-20 14:47:11 - api_server - INFO - 开始生成Markdown报告，数据键: ['success', 'timestamp', 'service', 'data', 'metadata']
2025-06-20 14:47:11 - api_server - INFO - Markdown报告生成完成，长度: 121 字符
2025-06-20 14:47:11 - api_server - INFO - 任务 82bbcc04-00d2-4159-9064-96080141134e 进度更新: 90% - 保存文档内容
2025-06-20 14:47:11 - api_server - INFO - 任务 82bbcc04-00d2-4159-9064-96080141134e 进度更新: 100% - 文档生成完成
2025-06-20 14:47:11 - api_server - INFO - 文档生成完成: 82bbcc04-00d2-4159-9064-96080141134e
2025-06-20 14:47:11 - api_server - INFO - ✅ 文档生成完成: 82bbcc04-00d2-4159-9064-96080141134e
2025-06-20 14:47:11 - api_server - INFO - 任务 82bbcc04-00d2-4159-9064-96080141134e 进度更新: 100% - 完整分析流程完成
2025-06-20 14:47:11 - api_server - INFO - 完整分析流程成功完成: 82bbcc04-00d2-4159-9064-96080141134e
2025-06-20 14:47:11 - api_server - INFO - 🎉 完整分析流程完成: 82bbcc04-00d2-4159-9064-96080141134e
2025-06-20 14:47:11 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 14:47:11 - api_server - INFO - ✅ GET get_analysis_result [200] (0.01s)
2025-06-20 14:58:57 - api_server - INFO - 从配置文件读取火山引擎配置: {'api_key': '7fcb3541-9363-4bfa-90aa-19e9f691bc25', 'endpoint': 'https://ark.cn-beijing.volces.com/api/v3', 'max_tokens': 4000, 'model': 'ep-20250605091804-wmw6w', 'temperature': 0.7}
2025-06-20 14:58:57 - api_server - INFO - 火山引擎客户端初始化成功
2025-06-20 14:58:57 - api_server - INFO - Weaviate配置: http://localhost:8080
2025-06-20 14:59:05 - api_server - INFO - 分析服务管理器初始化成功
2025-06-20 14:59:05 - api_server - INFO - 分析服务管理器已集成到API服务器
2025-06-20 14:59:05 - api_server - INFO - 增强分析器初始化成功
2025-06-20 14:59:05 - api_server - INFO - 初始化任务存储数据库...
2025-06-20 14:59:05 - api_server - INFO - 任务存储数据库初始化成功
2025-06-20 15:07:34 - api_server - ERROR - 保存任务到数据库失败: UNIQUE constraint failed: tasks.id
2025-06-20 15:07:34 - api_server - INFO - ✅ GET get_analysis_result [200] (0.02s)
2025-06-20 15:07:40 - api_server - ERROR - 保存任务到数据库失败: UNIQUE constraint failed: tasks.id
2025-06-20 15:07:40 - api_server - INFO - ✅ GET get_analysis_result [200] (0.01s)
2025-06-20 15:43:45 - api_server - INFO - 从配置文件读取火山引擎配置: {'api_key': '7fcb3541-9363-4bfa-90aa-19e9f691bc25', 'endpoint': 'https://ark.cn-beijing.volces.com/api/v3', 'max_tokens': 4000, 'model': 'ep-20250605091804-wmw6w', 'temperature': 0.7}
2025-06-20 15:43:45 - api_server - INFO - 火山引擎客户端初始化成功
2025-06-20 15:43:45 - api_server - INFO - Weaviate配置: http://localhost:8080
2025-06-20 15:43:55 - api_server - INFO - 分析服务管理器初始化成功
2025-06-20 15:43:55 - api_server - INFO - 分析服务管理器已集成到API服务器
2025-06-20 15:43:55 - api_server - INFO - 增强分析器初始化成功
2025-06-20 15:43:55 - api_server - INFO - 初始化任务存储数据库...
2025-06-20 15:43:55 - api_server - INFO - 任务存储数据库初始化成功
2025-06-20 17:09:17 - api_server - INFO - 从配置文件读取火山引擎配置: {'api_key': '7fcb3541-9363-4bfa-90aa-19e9f691bc25', 'endpoint': 'https://ark.cn-beijing.volces.com/api/v3', 'max_tokens': 4000, 'model': 'ep-20250605091804-wmw6w', 'temperature': 0.7}
2025-06-20 17:09:18 - api_server - INFO - 火山引擎客户端初始化成功
2025-06-20 17:09:18 - api_server - INFO - Weaviate配置: http://localhost:8080
2025-06-20 17:09:29 - api_server - INFO - 分析服务管理器初始化成功
2025-06-20 17:09:29 - api_server - INFO - 分析服务管理器已集成到API服务器
2025-06-20 17:09:29 - api_server - INFO - 增强分析器初始化成功
2025-06-20 17:09:29 - api_server - INFO - 初始化任务存储数据库...
2025-06-20 17:09:29 - api_server - INFO - 任务存储数据库初始化成功
2025-06-20 17:09:35 - api_server - INFO - 从配置文件读取火山引擎配置: {'api_key': '7fcb3541-9363-4bfa-90aa-19e9f691bc25', 'endpoint': 'https://ark.cn-beijing.volces.com/api/v3', 'max_tokens': 4000, 'model': 'ep-20250605091804-wmw6w', 'temperature': 0.7}
2025-06-20 17:09:36 - api_server - INFO - 火山引擎客户端初始化成功
2025-06-20 17:09:36 - api_server - INFO - Weaviate配置: http://localhost:8080
2025-06-20 17:09:44 - api_server - INFO - 分析服务管理器初始化成功
2025-06-20 17:09:44 - api_server - INFO - 分析服务管理器已集成到API服务器
2025-06-20 17:09:44 - api_server - INFO - 增强分析器初始化成功
2025-06-20 17:09:44 - api_server - INFO - 初始化任务存储数据库...
2025-06-20 17:09:44 - api_server - INFO - 任务存储数据库初始化成功
2025-06-20 17:12:31 - api_server - INFO - ✅ OPTIONS start_analysis_v2 [200]
2025-06-20 17:12:31 - api_server - INFO - file_info包含content字段，长度: 1132360
2025-06-20 17:12:31 - api_server - INFO - base64解码成功，file_content类型: <class 'bytes'>, 大小: 849268 bytes
2025-06-20 17:12:31 - api_server - INFO - 任务 97a07e21-ff03-4eb2-ae0b-877b2b010143 进度更新: 0% - 分析流程启动中
2025-06-20 17:12:31 - api_server - INFO - 开始完整分析流程: 97a07e21-ff03-4eb2-ae0b-877b2b010143
2025-06-20 17:12:31 - api_server - INFO - V2 完整分析启动成功: 需求文档 - 一局对接链数优化V0.1.docx, 任务ID: 97a07e21-ff03-4eb2-ae0b-877b2b010143, 大小: 849268 bytes
2025-06-20 17:12:31 - api_server - INFO - 🚀 V2 完整分析启动: 需求文档 - 一局对接链数优化V0.1.docx, 任务ID: 97a07e21-ff03-4eb2-ae0b-877b2b010143
2025-06-20 17:12:31 - api_server - INFO - ✅ POST start_analysis_v2 [200] (0.07s)
2025-06-20 17:12:31 - api_server - INFO - 任务 97a07e21-ff03-4eb2-ae0b-877b2b010143 进度更新: 10% - 开始文档解析
2025-06-20 17:12:31 - api_server - INFO - 任务 97a07e21-ff03-4eb2-ae0b-877b2b010143 进度更新: 10% - 开始解析文件
2025-06-20 17:12:31 - api_server - INFO - 从文件路径读取: D:\ai_project\document_analyzer\uploads\temp\97a07e21-ff03-4eb2-ae0b-877b2b010143_需求文档 - 一局对接链数优化V0.1.docx
2025-06-20 17:12:31 - api_server - INFO - 检测到Word文档，使用Markdown转换: 97a07e21-ff03-4eb2-ae0b-877b2b010143_需求文档 - 一局对接链数优化V0.1.docx
2025-06-20 17:12:31 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:12:31 - api_server - INFO - Word文档已成功转换为Markdown格式，长度: 2547 字符
2025-06-20 17:12:31 - api_server - INFO - 提取的文本内容已准备完毕
2025-06-20 17:12:31 - api_server - INFO - 转换后内容预览: 一局对接链数优化

需求文档

| 版本 | V0.1 |
| --- | --- |
| 撰写人 | 李威明 |
| 类型 | 系统对接 |
| 标签 | 链数、中建一局 |

中企云链（北京）金融信息服务有限公司

文档控制

需求方

| 日期 | 需求人 | 需求部门 | 说明 |
| --- | --- | --- | --- |
| 2025/4/30 | 徐艺 | 金融服务部 |  |

版本记录

| 日期 | 撰写人 | 版本 | 变更说明 |
| --- | --- | --- | --- |
| 2025/4/30 | 李威明 | V0.1 | 创建文档 |

目录

第1章 项目介绍	4

1.1 需求背景	4

1.2 建设目标及路线	4

第2章 整体说明	4

2.1 需求模型	4

2.2 功能结构图	4

2.3 信息结构图	4

2.4 项目范围	4

2.4.1 新增功能	4

2.4.2 调整功能	4

第3章 功能需求说明	4

3.1 调整说明	4

# 项目介绍

## 需求背景

- 一局对接链数的项目上线后，核心企业反馈，希望就已推送至平台的数据，在核心企业内部系统内修改部分信息（如额度信息）后，使用原业务编号再次推送至平台。就目前的接口校验逻辑，相同业务编号的业务数据不可重复推送。因而，需要结合核心企业需求，对接口的校验逻辑进行调整。

## 建设目标及路线

- 调整接口校验逻辑，兼容核心企业重推数据的场景。

# 整体说明

## 需求模型

## 功能结构图

## 信息结构图

## 项目范围

### 新增功能

### 调整功能

# 功能需求说明

## 接口校验规则调整

### 调整说明

本期对【确权业务申请】接口中关于bizSerialNo的校验规则进行调整，调整后的校验规则为：

| 序号 | 接口名称 | 隶属服务 | 校验点 | 逻辑 | 错误提示 |
| --- | --- | --- | --- | --- | --- |
| 1 | 确权业务申请 | zqyl-data-open | 入参校验 | bizSerialNo不可与已成功推送的非“已作废”、“已删除”状态的链数业务数据对应的bizSerialNo成功记录重复 | bizSerialNo已存在，请先登录平台进行作废/删除。 |

## 链数额度功能调整

### 调整说明

本期，对原“链数额度”功能做如下调整：

- 功能名称由“链数额度”变更为“额度管理”；

- 页面右上方新增“组织单元额度”按钮，当且仅当当前登录企业为多组织企业时展示该按钮。用户点击“组织单元额度”按钮，则跳转至“组织单元额度”列表页。

- 列表新增字段“额度类型”，置于“额度名称”之后，若为链数额度则取值为“链数额度”。

![图片2](http://localhost:8082/uploads/temp/97a07e21-ff03-4eb2-ae0b-877b2b010143_img_20250620_171231_1.png)

## 新增组织单元额度功能

### 调整说明

本期在核心企业侧链数额度功能下，新增“组织单元额度”列表页。支持用户查询当前登录企业下的具体组织单元的链数额度、云信额度明细。

具体如下：

- 交互说明：

![图片1](http://localhost:8082/uploads/temp/97a07e21-ff03-4eb2-ae0b-877b2b010143_img_20250620_171231_0.png)

（页面入口：用户点击“额度管理”列表页右上角的“组织单元额度”按钮，跳转至该页面。）

- 返回：用户点击返回，返回至“额度管理”列表页。

- 导出：点击导出，将列表中用户筛选后的数据以xls文件格式导出至本地。

- 列表筛选：用户确定筛选条件后，点击查询按钮，按照用户确定的筛选条件对列表进行筛选；点击重置，列表恢复至未筛选状态。

- 功能说明：

- 列表需展示分配至当前登录企业下所有组织单元的链数额度和云信额度明细。页面载入时，默认展示分配至各组织单元的链数额度明细；若用户将额度类型切换为“云信额度”，则需要展示分配至各组织单元的云信额度明细；若用户将额度类型切换为“全部”，则需要展示分配至各组织单元的链数和云信额度明细。

- 字段说明：

- 筛选字段：

| 序号 | 字段名 | 类型格式 | 长度 | 默认值 | 必填 | 规则 |
| --- | --- | --- | --- | --- | --- | --- |
| 1 | 组织单元名称 | 文本输入框 | - | - | - | 模糊搜索 |
| 2 | 额度名称 | 文本输入框 | - | - | - | 模糊搜索 |
| 3 | 额度类型 | 下拉列表 | - | 链数额度 | - | 下拉选项：链数额度、云信额度、全部 |

- 汇总字段：

| 序号 | 字段名 | 类型格式 | 规则 |
| --- | --- | --- | --- |
| 1 | 总额度（元） | 数值 | 满足筛选条件的列表数据的“已分配额度（元）”之和 |
| 2 | 已用额度（元） | 数值 | 满足筛选条件的列表数据的“已用额度（元）”之和 |
| 3 | 可用额度（元） | 数值 | 满足筛选条件的列表数据的“可用额度（元）”之和 |

- 备注：筛选条件更新后，汇总值需要同步更新计算。

- 列表字段：

| 序号 | 字段名 | 类型格式 | 规则 |
| --- | --- | --- | --- |
| 1 | 组织单元名称 | 字符串 |  |
| 2 | 额度名称 | 字符串 |  |
| 3 | 额度类型 | 字符串 |  |
| 4 | 已分配额度（元） | 数值 |  |
| 5 | 已用额度（元） | 数值 |  |
| 6 | 可用额度（元） | 数值 |  |

- 备注：列表默认按照组织单元名称为主要关键字、额度类型为次要关键字降序排列。
2025-06-20 17:12:31 - api_server - INFO - 提取的文本内容已准备完毕
2025-06-20 17:12:31 - api_server - INFO - 转换后内容预览: 一局对接链数优化

需求文档

| 版本 | V0.1 |
| --- | --- |
| 撰写人 | 李威明 |
| 类型 | 系统对接 |
| 标签 | 链数、中建一局 |

中企云链（北京）金融信息服务有限公司

文档控制

需求方

| 日期 | 需求人 | 需求部门 | 说明 |
| --- | --- | --- | --- |
| 2025/4/30 | 徐艺 | 金融服务部 |  |

版本记录

| 日期 | 撰写人 | 版本 | 变更说明 |
| --- | --- | --- | --- |
| 2025/4/30 | 李威明 | V0.1 | 创建文档 |

目录

第1章 项目介绍	4

1.1 需求背景	4

1.2 建设目标及路线	4

第2章 整体说明	4

2.1 需求模型	4

2.2 功能结构图	4

2.3 信息结构图	4

2.4 项目范围	4

2.4.1 新增功能	4

2.4.2 调整功能	4

第3章 功能需求说明	4

3.1 调整说明	4

# 项目介绍

## 需求背景

- 一局对接链数的项目上线后，核心企业反馈，希望就已推送至平台的数据，在核心企业内部系统内修改部分信息（如额度信息）后，使用原业务编号再次推送至平台。就目前的接口校验逻辑，相同业务编号的业务数据不可重复推送。因而，需要结合核心企业需求，对接口的校验逻辑进行调整。

## 建设目标及路线

- 调整接口校验逻辑，兼容核心企业重推数据的场景。

# 整体说明

## 需求模型

## 功能结构图

## 信息结构图

## 项目范围

### 新增功能

### 调整功能

# 功能需求说明

## 接口校验规则调整

### 调整说明

本期对【确权业务申请】接口中关于bizSerialNo的校验规则进行调整，调整后的校验规则为：

| 序号 | 接口名称 | 隶属服务 | 校验点 | 逻辑 | 错误提示 |
| --- | --- | --- | --- | --- | --- |
| 1 | 确权业务申请 | zqyl-data-open | 入参校验 | bizSerialNo不可与已成功推送的非“已作废”、“已删除”状态的链数业务数据对应的bizSerialNo成功记录重复 | bizSerialNo已存在，请先登录平台进行作废/删除。 |

## 链数额度功能调整

### 调整说明

本期，对原“链数额度”功能做如下调整：

- 功能名称由“链数额度”变更为“额度管理”；

- 页面右上方新增“组织单元额度”按钮，当且仅当当前登录企业为多组织企业时展示该按钮。用户点击“组织单元额度”按钮，则跳转至“组织单元额度”列表页。

- 列表新增字段“额度类型”，置于“额度名称”之后，若为链数额度则取值为“链数额度”。

![图片2](http://localhost:8082/uploads/temp/97a07e21-ff03-4eb2-ae0b-877b2b010143_img_20250620_171231_1.png)

## 新增组织单元额度功能

### 调整说明

本期在核心企业侧链数额度功能下，新增“组织单元额度”列表页。支持用户查询当前登录企业下的具体组织单元的链数额度、云信额度明细。

具体如下：

- 交互说明：

![图片1](http://localhost:8082/uploads/temp/97a07e21-ff03-4eb2-ae0b-877b2b010143_img_20250620_171231_0.png)

（页面入口：用户点击“额度管理”列表页右上角的“组织单元额度”按钮，跳转至该页面。）

- 返回：用户点击返回，返回至“额度管理”列表页。

- 导出：点击导出，将列表中用户筛选后的数据以xls文件格式导出至本地。

- 列表筛选：用户确定筛选条件后，点击查询按钮，按照用户确定的筛选条件对列表进行筛选；点击重置，列表恢复至未筛选状态。

- 功能说明：

- 列表需展示分配至当前登录企业下所有组织单元的链数额度和云信额度明细。页面载入时，默认展示分配至各组织单元的链数额度明细；若用户将额度类型切换为“云信额度”，则需要展示分配至各组织单元的云信额度明细；若用户将额度类型切换为“全部”，则需要展示分配至各组织单元的链数和云信额度明细。

- 字段说明：

- 筛选字段：

| 序号 | 字段名 | 类型格式 | 长度 | 默认值 | 必填 | 规则 |
| --- | --- | --- | --- | --- | --- | --- |
| 1 | 组织单元名称 | 文本输入框 | - | - | - | 模糊搜索 |
| 2 | 额度名称 | 文本输入框 | - | - | - | 模糊搜索 |
| 3 | 额度类型 | 下拉列表 | - | 链数额度 | - | 下拉选项：链数额度、云信额度、全部 |

- 汇总字段：

| 序号 | 字段名 | 类型格式 | 规则 |
| --- | --- | --- | --- |
| 1 | 总额度（元） | 数值 | 满足筛选条件的列表数据的“已分配额度（元）”之和 |
| 2 | 已用额度（元） | 数值 | 满足筛选条件的列表数据的“已用额度（元）”之和 |
| 3 | 可用额度（元） | 数值 | 满足筛选条件的列表数据的“可用额度（元）”之和 |

- 备注：筛选条件更新后，汇总值需要同步更新计算。

- 列表字段：

| 序号 | 字段名 | 类型格式 | 规则 |
| --- | --- | --- | --- |
| 1 | 组织单元名称 | 字符串 |  |
| 2 | 额度名称 | 字符串 |  |
| 3 | 额度类型 | 字符串 |  |
| 4 | 已分配额度（元） | 数值 |  |
| 5 | 已用额度（元） | 数值 |  |
| 6 | 可用额度（元） | 数值 |  |

- 备注：列表默认按照组织单元名称为主要关键字、额度类型为次要关键字降序排列。
2025-06-20 17:12:31 - api_server - INFO - 任务 97a07e21-ff03-4eb2-ae0b-877b2b010143 进度更新: 40% - 使用分析服务解析文档
2025-06-20 17:12:34 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:12:36 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:12:38 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:12:40 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:12:42 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 17:12:44 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:12:47 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:12:49 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:12:51 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:12:53 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:12:54 - api_server - INFO - 任务 97a07e21-ff03-4eb2-ae0b-877b2b010143 进度更新: 100% - 文档解析完成
2025-06-20 17:12:54 - api_server - INFO - ✅ 文件解析完成: 97a07e21-ff03-4eb2-ae0b-877b2b010143
2025-06-20 17:12:54 - api_server - INFO - 任务 97a07e21-ff03-4eb2-ae0b-877b2b010143 进度更新: 40% - 开始内容分析
2025-06-20 17:12:54 - api_server - INFO - 🔍 开始内容分析任务: 97a07e21-ff03-4eb2-ae0b-877b2b010143
2025-06-20 17:12:54 - api_server - INFO - 📊 任务当前状态: content_analyzing
2025-06-20 17:12:54 - api_server - INFO - 📊 任务当前进度: 40%
2025-06-20 17:12:54 - api_server - INFO - 📊 解析结果存在: True
2025-06-20 17:12:54 - api_server - INFO - 📊 分析服务管理器可用: True
2025-06-20 17:12:54 - api_server - INFO - 任务 97a07e21-ff03-4eb2-ae0b-877b2b010143 进度更新: 10% - 开始内容分析
2025-06-20 17:12:54 - api_server - INFO - ✅ 任务状态已更新为: content_analyzing
2025-06-20 17:12:54 - api_server - INFO - 从文件路径读取: D:\ai_project\document_analyzer\uploads\temp\97a07e21-ff03-4eb2-ae0b-877b2b010143_需求文档 - 一局对接链数优化V0.1.docx
2025-06-20 17:12:54 - api_server - INFO - 检测到Word文档，使用Markdown转换: 97a07e21-ff03-4eb2-ae0b-877b2b010143_需求文档 - 一局对接链数优化V0.1.docx
2025-06-20 17:12:54 - api_server - INFO - Word文档已成功转换为Markdown格式，长度: 2547 字符
2025-06-20 17:12:54 - api_server - INFO - 任务 97a07e21-ff03-4eb2-ae0b-877b2b010143 进度更新: 30% - 获取到上传文件
2025-06-20 17:12:54 - api_server - INFO - 📄 提取到文档内容，长度: 2547 字符
2025-06-20 17:12:54 - api_server - INFO - 任务 97a07e21-ff03-4eb2-ae0b-877b2b010143 进度更新: 35% - 内容分析管理器开始分析
2025-06-20 17:12:55 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:12:57 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:13:00 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:13:02 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:13:04 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:13:06 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:13:08 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:13:10 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:13:13 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:13:15 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:13:17 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:13:19 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:13:21 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:13:23 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:13:26 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:13:28 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:13:30 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:13:32 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:13:34 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:13:36 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:13:39 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:13:41 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:13:43 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:13:45 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:13:47 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:13:49 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:13:52 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:13:54 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 17:13:56 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:13:58 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:14:00 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:14:02 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:14:05 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:14:07 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:14:09 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:14:11 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:14:14 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:14:16 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:14:18 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:14:20 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:14:22 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:14:24 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:14:27 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:14:29 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:14:31 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:14:33 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:14:35 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:14:37 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:14:40 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:14:42 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:14:44 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:14:46 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:14:48 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:14:50 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:14:53 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 17:14:55 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:14:57 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:14:59 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:15:01 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:15:03 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:15:06 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:15:08 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 17:15:10 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:15:12 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:15:14 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:15:16 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:15:19 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 17:15:21 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:15:23 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:15:25 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:15:27 - api_server - INFO - 任务 97a07e21-ff03-4eb2-ae0b-877b2b010143 进度更新: 100% - 内容分析完成
2025-06-20 17:15:27 - api_server - INFO - ✅ 内容分析完成: 97a07e21-ff03-4eb2-ae0b-877b2b010143
2025-06-20 17:15:27 - api_server - INFO - 任务 97a07e21-ff03-4eb2-ae0b-877b2b010143 进度更新: 70% - 开始AI智能分析
2025-06-20 17:15:27 - api_server - INFO - 🤖 开始AI分析任务: 97a07e21-ff03-4eb2-ae0b-877b2b010143
2025-06-20 17:15:27 - api_server - INFO - 任务 97a07e21-ff03-4eb2-ae0b-877b2b010143 进度更新: 10% - 开始AI智能分析
2025-06-20 17:15:27 - api_server - INFO - 任务 97a07e21-ff03-4eb2-ae0b-877b2b010143 进度更新: 30% - 使用分析服务进行AI分析
2025-06-20 17:15:27 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 17:15:29 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:15:32 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:15:34 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:15:36 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:15:38 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:15:40 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.01s)
2025-06-20 17:15:42 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:15:45 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:15:47 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:15:49 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 17:15:51 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 17:15:53 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:15:56 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:15:58 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:16:00 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:16:02 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:16:04 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:16:07 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:16:09 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:16:11 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 17:16:13 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 17:16:15 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:16:17 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:16:20 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:16:22 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:16:24 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:16:26 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:16:28 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:16:30 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 17:16:33 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:16:35 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:16:37 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:16:40 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:16:42 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 17:16:44 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:16:46 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:16:48 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:16:51 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:16:53 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:16:55 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:16:57 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:16:59 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:17:01 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:17:04 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:17:06 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:17:08 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:17:10 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:17:12 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:17:14 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:17:17 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:17:19 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:17:21 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:17:23 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:17:26 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:17:29 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:17:32 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 17:17:35 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:17:38 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:17:41 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:17:44 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:17:47 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:17:50 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:17:53 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:17:56 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:17:59 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 17:18:02 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:18:05 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:18:08 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:18:11 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:18:14 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:18:17 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:18:20 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:18:23 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:18:26 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:18:29 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:18:32 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:18:35 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:18:38 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:18:41 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:18:44 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:18:47 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:18:50 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:18:53 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:18:56 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:18:59 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:19:02 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:19:05 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 17:19:08 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:19:11 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:19:14 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:19:17 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:19:20 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:19:23 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:19:26 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 17:19:29 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 17:19:32 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:19:35 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:19:38 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:19:41 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:19:44 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:19:46 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:19:49 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:19:52 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 17:19:55 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:19:58 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:20:01 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:20:04 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:20:07 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:20:10 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:20:13 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 17:20:16 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:20:19 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:20:22 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 17:20:25 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:20:28 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:20:31 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:20:34 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:20:37 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:20:40 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:20:43 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 17:20:46 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:20:49 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:20:52 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:20:55 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:20:58 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:21:01 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:21:04 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:21:07 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:21:10 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:21:13 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:21:16 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:21:19 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:21:21 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:21:23 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:21:25 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:21:28 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:21:31 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:21:34 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:21:37 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:21:40 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:21:43 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:21:46 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:21:49 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:21:52 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:21:55 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:21:58 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:22:01 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:22:04 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:22:07 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:22:10 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:22:13 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:22:16 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:22:19 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 17:22:22 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:22:25 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:22:28 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:22:31 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:22:34 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:22:37 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:22:40 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:22:43 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:22:46 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:22:49 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 17:22:52 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:22:55 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:22:58 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:23:01 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:23:04 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:23:07 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:23:10 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:23:13 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:23:16 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:23:19 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:23:22 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:23:25 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:23:28 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:23:31 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:23:34 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:23:37 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:23:40 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:23:43 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:23:46 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:23:49 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:23:52 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:23:55 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:23:58 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:24:01 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:24:04 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:24:07 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 17:24:10 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:24:10 - api_server - INFO - 任务 97a07e21-ff03-4eb2-ae0b-877b2b010143 进度更新: 100% - AI分析完成
2025-06-20 17:24:10 - api_server - INFO - ✅ AI分析完成: 97a07e21-ff03-4eb2-ae0b-877b2b010143
2025-06-20 17:24:10 - api_server - INFO - 任务 97a07e21-ff03-4eb2-ae0b-877b2b010143 进度更新: 90% - 开始生成文档
2025-06-20 17:24:10 - api_server - INFO - 开始生成文档: 97a07e21-ff03-4eb2-ae0b-877b2b010143
2025-06-20 17:24:10 - api_server - INFO - 📄 开始文档生成任务: 97a07e21-ff03-4eb2-ae0b-877b2b010143
2025-06-20 17:24:10 - api_server - INFO - 任务 97a07e21-ff03-4eb2-ae0b-877b2b010143 进度更新: 10% - 准备生成文档
2025-06-20 17:24:10 - api_server - INFO - 任务 97a07e21-ff03-4eb2-ae0b-877b2b010143 进度更新: 30% - 获取分析结果数据
2025-06-20 17:24:10 - api_server - INFO - 生成文档数据结构: basic_info=True, document_parsing=True, content_analysis=True, ai_analysis=True
2025-06-20 17:24:10 - api_server - INFO - 任务 97a07e21-ff03-4eb2-ae0b-877b2b010143 进度更新: 60% - 转换为Markdown格式
2025-06-20 17:24:10 - api_server - INFO - 开始生成Markdown报告，数据键: ['success', 'timestamp', 'service', 'data', 'metadata']
2025-06-20 17:24:10 - api_server - INFO - Markdown报告生成完成，长度: 121 字符
2025-06-20 17:24:10 - api_server - INFO - 任务 97a07e21-ff03-4eb2-ae0b-877b2b010143 进度更新: 90% - 保存文档内容
2025-06-20 17:24:10 - api_server - INFO - 任务 97a07e21-ff03-4eb2-ae0b-877b2b010143 进度更新: 100% - 文档生成完成
2025-06-20 17:24:10 - api_server - INFO - 文档生成完成: 97a07e21-ff03-4eb2-ae0b-877b2b010143
2025-06-20 17:24:10 - api_server - INFO - ✅ 文档生成完成: 97a07e21-ff03-4eb2-ae0b-877b2b010143
2025-06-20 17:24:10 - api_server - INFO - 任务 97a07e21-ff03-4eb2-ae0b-877b2b010143 进度更新: 100% - 完整分析流程完成
2025-06-20 17:24:10 - api_server - INFO - 完整分析流程成功完成: 97a07e21-ff03-4eb2-ae0b-877b2b010143
2025-06-20 17:24:10 - api_server - INFO - 🎉 完整分析流程完成: 97a07e21-ff03-4eb2-ae0b-877b2b010143
2025-06-20 17:24:13 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:24:13 - api_server - INFO - ✅ GET get_analysis_result [200] (0.01s)
2025-06-20 17:24:55 - api_server - INFO - ✅ GET get_analysis_result [200] (0.01s)
2025-06-20 17:28:48 - api_server - INFO - 从配置文件读取火山引擎配置: {'api_key': '7fcb3541-9363-4bfa-90aa-19e9f691bc25', 'endpoint': 'https://ark.cn-beijing.volces.com/api/v3', 'max_tokens': 4000, 'model': 'ep-20250605091804-wmw6w', 'temperature': 0.7}
2025-06-20 17:28:48 - api_server - INFO - 火山引擎客户端初始化成功
2025-06-20 17:28:48 - api_server - INFO - Weaviate配置: http://localhost:8080
2025-06-20 17:28:57 - api_server - INFO - 分析服务管理器初始化成功
2025-06-20 17:28:57 - api_server - INFO - 分析服务管理器已集成到API服务器
2025-06-20 17:28:57 - api_server - INFO - 增强分析器初始化成功
2025-06-20 17:28:57 - api_server - INFO - 初始化任务存储数据库...
2025-06-20 17:28:57 - api_server - INFO - 任务存储数据库初始化成功
2025-06-20 17:29:25 - api_server - INFO - 从配置文件读取火山引擎配置: {'api_key': '7fcb3541-9363-4bfa-90aa-19e9f691bc25', 'endpoint': 'https://ark.cn-beijing.volces.com/api/v3', 'max_tokens': 4000, 'model': 'ep-20250605091804-wmw6w', 'temperature': 0.7}
2025-06-20 17:29:25 - api_server - INFO - 火山引擎客户端初始化成功
2025-06-20 17:29:25 - api_server - INFO - Weaviate配置: http://localhost:8080
2025-06-20 17:29:35 - api_server - INFO - 分析服务管理器初始化成功
2025-06-20 17:29:35 - api_server - INFO - 分析服务管理器已集成到API服务器
2025-06-20 17:29:35 - api_server - INFO - 增强分析器初始化成功
2025-06-20 17:29:35 - api_server - INFO - 初始化任务存储数据库...
2025-06-20 17:29:35 - api_server - INFO - 任务存储数据库初始化成功
2025-06-20 17:31:05 - api_server - INFO - 从配置文件读取火山引擎配置: {'api_key': '7fcb3541-9363-4bfa-90aa-19e9f691bc25', 'endpoint': 'https://ark.cn-beijing.volces.com/api/v3', 'max_tokens': 4000, 'model': 'ep-20250605091804-wmw6w', 'temperature': 0.7}
2025-06-20 17:31:05 - api_server - INFO - 火山引擎客户端初始化成功
2025-06-20 17:31:05 - api_server - INFO - Weaviate配置: http://localhost:8080
2025-06-20 17:31:16 - api_server - INFO - 分析服务管理器初始化成功
2025-06-20 17:31:16 - api_server - INFO - 分析服务管理器已集成到API服务器
2025-06-20 17:31:16 - api_server - INFO - 增强分析器初始化成功
2025-06-20 17:42:50 - api_server - INFO - 从配置文件读取火山引擎配置: {'api_key': '7fcb3541-9363-4bfa-90aa-19e9f691bc25', 'endpoint': 'https://ark.cn-beijing.volces.com/api/v3', 'max_tokens': 4000, 'model': 'ep-20250605091804-wmw6w', 'temperature': 0.7}
2025-06-20 17:42:50 - api_server - INFO - 火山引擎客户端初始化成功
2025-06-20 17:42:50 - api_server - INFO - Weaviate配置: http://localhost:8080
2025-06-20 17:42:59 - api_server - INFO - 分析服务管理器初始化成功
2025-06-20 17:42:59 - api_server - INFO - 分析服务管理器已集成到API服务器
2025-06-20 17:42:59 - api_server - INFO - 增强分析器初始化成功
2025-06-20 17:42:59 - api_server - INFO - 任务 test_task_123 进度更新: 10% - 开始AI智能分析
2025-06-20 17:42:59 - api_server - INFO - 任务 test_task_123 进度更新: 30% - 使用分析服务进行AI分析
2025-06-20 17:42:59 - api_server - INFO - 任务 test_task_123 进度更新: 37% - 需求分析与功能拆解
2025-06-20 17:42:59 - api_server - INFO - 任务 test_task_123 进度更新: 47% - 设计数据流程与API接口
2025-06-20 17:43:00 - api_server - INFO - 任务 test_task_123 进度更新: 58% - 前后端架构设计
2025-06-20 17:43:00 - api_server - INFO - 任务 test_task_123 进度更新: 68% - 安全权限方案设计
2025-06-20 17:43:01 - api_server - INFO - 任务 test_task_123 进度更新: 79% - MQ与定时任务设计
2025-06-20 17:43:01 - api_server - INFO - 任务 test_task_123 进度更新: 89% - 数据库设计
2025-06-20 17:43:02 - api_server - INFO - 任务 test_task_123 进度更新: 96% - LangChain集成方案
2025-06-20 17:43:03 - api_server - INFO - 任务 test_task_123 进度更新: 100% - AI架构设计完成
2025-06-20 17:43:03 - api_server - INFO - 任务 test_task_123 进度更新: 100% - AI分析完成
2025-06-20 17:45:05 - api_server - INFO - 从配置文件读取火山引擎配置: {'api_key': '7fcb3541-9363-4bfa-90aa-19e9f691bc25', 'endpoint': 'https://ark.cn-beijing.volces.com/api/v3', 'max_tokens': 4000, 'model': 'ep-20250605091804-wmw6w', 'temperature': 0.7}
2025-06-20 17:45:06 - api_server - INFO - 火山引擎客户端初始化成功
2025-06-20 17:45:06 - api_server - INFO - Weaviate配置: http://localhost:8080
2025-06-20 17:45:16 - api_server - INFO - 分析服务管理器初始化成功
2025-06-20 17:45:16 - api_server - INFO - 分析服务管理器已集成到API服务器
2025-06-20 17:45:16 - api_server - INFO - 增强分析器初始化成功
2025-06-20 17:45:16 - api_server - INFO - 初始化任务存储数据库...
2025-06-20 17:45:16 - api_server - INFO - 任务存储数据库初始化成功
2025-06-20 17:45:23 - api_server - INFO - 从配置文件读取火山引擎配置: {'api_key': '7fcb3541-9363-4bfa-90aa-19e9f691bc25', 'endpoint': 'https://ark.cn-beijing.volces.com/api/v3', 'max_tokens': 4000, 'model': 'ep-20250605091804-wmw6w', 'temperature': 0.7}
2025-06-20 17:45:23 - api_server - INFO - 火山引擎客户端初始化成功
2025-06-20 17:45:23 - api_server - INFO - Weaviate配置: http://localhost:8080
2025-06-20 17:45:32 - api_server - INFO - 分析服务管理器初始化成功
2025-06-20 17:45:32 - api_server - INFO - 分析服务管理器已集成到API服务器
2025-06-20 17:45:32 - api_server - INFO - 增强分析器初始化成功
2025-06-20 17:45:32 - api_server - INFO - 初始化任务存储数据库...
2025-06-20 17:45:32 - api_server - INFO - 任务存储数据库初始化成功
2025-06-20 17:46:37 - api_server - INFO - ✅ OPTIONS start_analysis_v2 [200] (0.00s)
2025-06-20 17:46:37 - api_server - INFO - file_info包含content字段，长度: 1132360
2025-06-20 17:46:37 - api_server - INFO - base64解码成功，file_content类型: <class 'bytes'>, 大小: 849268 bytes
2025-06-20 17:46:37 - api_server - INFO - 任务 8552819a-b99b-4475-9358-0142f3174b5e 进度更新: 0% - 分析流程启动中
2025-06-20 17:46:37 - api_server - INFO - 开始完整分析流程: 8552819a-b99b-4475-9358-0142f3174b5e
2025-06-20 17:46:37 - api_server - INFO - V2 完整分析启动成功: 需求文档 - 一局对接链数优化V0.1.docx, 任务ID: 8552819a-b99b-4475-9358-0142f3174b5e, 大小: 849268 bytes
2025-06-20 17:46:37 - api_server - INFO - 🚀 V2 完整分析启动: 需求文档 - 一局对接链数优化V0.1.docx, 任务ID: 8552819a-b99b-4475-9358-0142f3174b5e
2025-06-20 17:46:37 - api_server - INFO - ✅ POST start_analysis_v2 [200] (0.07s)
2025-06-20 17:46:37 - api_server - INFO - 任务 8552819a-b99b-4475-9358-0142f3174b5e 进度更新: 10% - 开始文档解析
2025-06-20 17:46:37 - api_server - INFO - 任务 8552819a-b99b-4475-9358-0142f3174b5e 进度更新: 10% - 开始解析文件
2025-06-20 17:46:37 - api_server - INFO - 从文件路径读取: D:\ai_project\document_analyzer\uploads\temp\8552819a-b99b-4475-9358-0142f3174b5e_需求文档 - 一局对接链数优化V0.1.docx
2025-06-20 17:46:37 - api_server - INFO - 检测到Word文档，使用Markdown转换: 8552819a-b99b-4475-9358-0142f3174b5e_需求文档 - 一局对接链数优化V0.1.docx
2025-06-20 17:46:37 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.01s)
2025-06-20 17:46:38 - api_server - INFO - Word文档已成功转换为Markdown格式，长度: 2547 字符
2025-06-20 17:46:38 - api_server - INFO - 提取的文本内容已准备完毕
2025-06-20 17:46:38 - api_server - INFO - 转换后内容预览: 一局对接链数优化

需求文档

| 版本 | V0.1 |
| --- | --- |
| 撰写人 | 李威明 |
| 类型 | 系统对接 |
| 标签 | 链数、中建一局 |

中企云链（北京）金融信息服务有限公司

文档控制

需求方

| 日期 | 需求人 | 需求部门 | 说明 |
| --- | --- | --- | --- |
| 2025/4/30 | 徐艺 | 金融服务部 |  |

版本记录

| 日期 | 撰写人 | 版本 | 变更说明 |
| --- | --- | --- | --- |
| 2025/4/30 | 李威明 | V0.1 | 创建文档 |

目录

第1章 项目介绍	4

1.1 需求背景	4

1.2 建设目标及路线	4

第2章 整体说明	4

2.1 需求模型	4

2.2 功能结构图	4

2.3 信息结构图	4

2.4 项目范围	4

2.4.1 新增功能	4

2.4.2 调整功能	4

第3章 功能需求说明	4

3.1 调整说明	4

# 项目介绍

## 需求背景

- 一局对接链数的项目上线后，核心企业反馈，希望就已推送至平台的数据，在核心企业内部系统内修改部分信息（如额度信息）后，使用原业务编号再次推送至平台。就目前的接口校验逻辑，相同业务编号的业务数据不可重复推送。因而，需要结合核心企业需求，对接口的校验逻辑进行调整。

## 建设目标及路线

- 调整接口校验逻辑，兼容核心企业重推数据的场景。

# 整体说明

## 需求模型

## 功能结构图

## 信息结构图

## 项目范围

### 新增功能

### 调整功能

# 功能需求说明

## 接口校验规则调整

### 调整说明

本期对【确权业务申请】接口中关于bizSerialNo的校验规则进行调整，调整后的校验规则为：

| 序号 | 接口名称 | 隶属服务 | 校验点 | 逻辑 | 错误提示 |
| --- | --- | --- | --- | --- | --- |
| 1 | 确权业务申请 | zqyl-data-open | 入参校验 | bizSerialNo不可与已成功推送的非“已作废”、“已删除”状态的链数业务数据对应的bizSerialNo成功记录重复 | bizSerialNo已存在，请先登录平台进行作废/删除。 |

## 链数额度功能调整

### 调整说明

本期，对原“链数额度”功能做如下调整：

- 功能名称由“链数额度”变更为“额度管理”；

- 页面右上方新增“组织单元额度”按钮，当且仅当当前登录企业为多组织企业时展示该按钮。用户点击“组织单元额度”按钮，则跳转至“组织单元额度”列表页。

- 列表新增字段“额度类型”，置于“额度名称”之后，若为链数额度则取值为“链数额度”。

![图片2](http://localhost:8082/uploads/temp/8552819a-b99b-4475-9358-0142f3174b5e_img_20250620_174637_1.png)

## 新增组织单元额度功能

### 调整说明

本期在核心企业侧链数额度功能下，新增“组织单元额度”列表页。支持用户查询当前登录企业下的具体组织单元的链数额度、云信额度明细。

具体如下：

- 交互说明：

![图片1](http://localhost:8082/uploads/temp/8552819a-b99b-4475-9358-0142f3174b5e_img_20250620_174637_0.png)

（页面入口：用户点击“额度管理”列表页右上角的“组织单元额度”按钮，跳转至该页面。）

- 返回：用户点击返回，返回至“额度管理”列表页。

- 导出：点击导出，将列表中用户筛选后的数据以xls文件格式导出至本地。

- 列表筛选：用户确定筛选条件后，点击查询按钮，按照用户确定的筛选条件对列表进行筛选；点击重置，列表恢复至未筛选状态。

- 功能说明：

- 列表需展示分配至当前登录企业下所有组织单元的链数额度和云信额度明细。页面载入时，默认展示分配至各组织单元的链数额度明细；若用户将额度类型切换为“云信额度”，则需要展示分配至各组织单元的云信额度明细；若用户将额度类型切换为“全部”，则需要展示分配至各组织单元的链数和云信额度明细。

- 字段说明：

- 筛选字段：

| 序号 | 字段名 | 类型格式 | 长度 | 默认值 | 必填 | 规则 |
| --- | --- | --- | --- | --- | --- | --- |
| 1 | 组织单元名称 | 文本输入框 | - | - | - | 模糊搜索 |
| 2 | 额度名称 | 文本输入框 | - | - | - | 模糊搜索 |
| 3 | 额度类型 | 下拉列表 | - | 链数额度 | - | 下拉选项：链数额度、云信额度、全部 |

- 汇总字段：

| 序号 | 字段名 | 类型格式 | 规则 |
| --- | --- | --- | --- |
| 1 | 总额度（元） | 数值 | 满足筛选条件的列表数据的“已分配额度（元）”之和 |
| 2 | 已用额度（元） | 数值 | 满足筛选条件的列表数据的“已用额度（元）”之和 |
| 3 | 可用额度（元） | 数值 | 满足筛选条件的列表数据的“可用额度（元）”之和 |

- 备注：筛选条件更新后，汇总值需要同步更新计算。

- 列表字段：

| 序号 | 字段名 | 类型格式 | 规则 |
| --- | --- | --- | --- |
| 1 | 组织单元名称 | 字符串 |  |
| 2 | 额度名称 | 字符串 |  |
| 3 | 额度类型 | 字符串 |  |
| 4 | 已分配额度（元） | 数值 |  |
| 5 | 已用额度（元） | 数值 |  |
| 6 | 可用额度（元） | 数值 |  |

- 备注：列表默认按照组织单元名称为主要关键字、额度类型为次要关键字降序排列。
2025-06-20 17:46:38 - api_server - INFO - 提取的文本内容已准备完毕
2025-06-20 17:46:38 - api_server - INFO - 转换后内容预览: 一局对接链数优化

需求文档

| 版本 | V0.1 |
| --- | --- |
| 撰写人 | 李威明 |
| 类型 | 系统对接 |
| 标签 | 链数、中建一局 |

中企云链（北京）金融信息服务有限公司

文档控制

需求方

| 日期 | 需求人 | 需求部门 | 说明 |
| --- | --- | --- | --- |
| 2025/4/30 | 徐艺 | 金融服务部 |  |

版本记录

| 日期 | 撰写人 | 版本 | 变更说明 |
| --- | --- | --- | --- |
| 2025/4/30 | 李威明 | V0.1 | 创建文档 |

目录

第1章 项目介绍	4

1.1 需求背景	4

1.2 建设目标及路线	4

第2章 整体说明	4

2.1 需求模型	4

2.2 功能结构图	4

2.3 信息结构图	4

2.4 项目范围	4

2.4.1 新增功能	4

2.4.2 调整功能	4

第3章 功能需求说明	4

3.1 调整说明	4

# 项目介绍

## 需求背景

- 一局对接链数的项目上线后，核心企业反馈，希望就已推送至平台的数据，在核心企业内部系统内修改部分信息（如额度信息）后，使用原业务编号再次推送至平台。就目前的接口校验逻辑，相同业务编号的业务数据不可重复推送。因而，需要结合核心企业需求，对接口的校验逻辑进行调整。

## 建设目标及路线

- 调整接口校验逻辑，兼容核心企业重推数据的场景。

# 整体说明

## 需求模型

## 功能结构图

## 信息结构图

## 项目范围

### 新增功能

### 调整功能

# 功能需求说明

## 接口校验规则调整

### 调整说明

本期对【确权业务申请】接口中关于bizSerialNo的校验规则进行调整，调整后的校验规则为：

| 序号 | 接口名称 | 隶属服务 | 校验点 | 逻辑 | 错误提示 |
| --- | --- | --- | --- | --- | --- |
| 1 | 确权业务申请 | zqyl-data-open | 入参校验 | bizSerialNo不可与已成功推送的非“已作废”、“已删除”状态的链数业务数据对应的bizSerialNo成功记录重复 | bizSerialNo已存在，请先登录平台进行作废/删除。 |

## 链数额度功能调整

### 调整说明

本期，对原“链数额度”功能做如下调整：

- 功能名称由“链数额度”变更为“额度管理”；

- 页面右上方新增“组织单元额度”按钮，当且仅当当前登录企业为多组织企业时展示该按钮。用户点击“组织单元额度”按钮，则跳转至“组织单元额度”列表页。

- 列表新增字段“额度类型”，置于“额度名称”之后，若为链数额度则取值为“链数额度”。

![图片2](http://localhost:8082/uploads/temp/8552819a-b99b-4475-9358-0142f3174b5e_img_20250620_174637_1.png)

## 新增组织单元额度功能

### 调整说明

本期在核心企业侧链数额度功能下，新增“组织单元额度”列表页。支持用户查询当前登录企业下的具体组织单元的链数额度、云信额度明细。

具体如下：

- 交互说明：

![图片1](http://localhost:8082/uploads/temp/8552819a-b99b-4475-9358-0142f3174b5e_img_20250620_174637_0.png)

（页面入口：用户点击“额度管理”列表页右上角的“组织单元额度”按钮，跳转至该页面。）

- 返回：用户点击返回，返回至“额度管理”列表页。

- 导出：点击导出，将列表中用户筛选后的数据以xls文件格式导出至本地。

- 列表筛选：用户确定筛选条件后，点击查询按钮，按照用户确定的筛选条件对列表进行筛选；点击重置，列表恢复至未筛选状态。

- 功能说明：

- 列表需展示分配至当前登录企业下所有组织单元的链数额度和云信额度明细。页面载入时，默认展示分配至各组织单元的链数额度明细；若用户将额度类型切换为“云信额度”，则需要展示分配至各组织单元的云信额度明细；若用户将额度类型切换为“全部”，则需要展示分配至各组织单元的链数和云信额度明细。

- 字段说明：

- 筛选字段：

| 序号 | 字段名 | 类型格式 | 长度 | 默认值 | 必填 | 规则 |
| --- | --- | --- | --- | --- | --- | --- |
| 1 | 组织单元名称 | 文本输入框 | - | - | - | 模糊搜索 |
| 2 | 额度名称 | 文本输入框 | - | - | - | 模糊搜索 |
| 3 | 额度类型 | 下拉列表 | - | 链数额度 | - | 下拉选项：链数额度、云信额度、全部 |

- 汇总字段：

| 序号 | 字段名 | 类型格式 | 规则 |
| --- | --- | --- | --- |
| 1 | 总额度（元） | 数值 | 满足筛选条件的列表数据的“已分配额度（元）”之和 |
| 2 | 已用额度（元） | 数值 | 满足筛选条件的列表数据的“已用额度（元）”之和 |
| 3 | 可用额度（元） | 数值 | 满足筛选条件的列表数据的“可用额度（元）”之和 |

- 备注：筛选条件更新后，汇总值需要同步更新计算。

- 列表字段：

| 序号 | 字段名 | 类型格式 | 规则 |
| --- | --- | --- | --- |
| 1 | 组织单元名称 | 字符串 |  |
| 2 | 额度名称 | 字符串 |  |
| 3 | 额度类型 | 字符串 |  |
| 4 | 已分配额度（元） | 数值 |  |
| 5 | 已用额度（元） | 数值 |  |
| 6 | 可用额度（元） | 数值 |  |

- 备注：列表默认按照组织单元名称为主要关键字、额度类型为次要关键字降序排列。
2025-06-20 17:46:38 - api_server - INFO - 任务 8552819a-b99b-4475-9358-0142f3174b5e 进度更新: 40% - 使用分析服务解析文档
2025-06-20 17:46:40 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:46:42 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:46:44 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 17:46:46 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:46:48 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:46:50 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:46:53 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:46:55 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 17:46:57 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 17:46:59 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:47:02 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:47:02 - api_server - INFO - 任务 8552819a-b99b-4475-9358-0142f3174b5e 进度更新: 100% - 文档解析完成
2025-06-20 17:47:02 - api_server - INFO - ✅ 文件解析完成: 8552819a-b99b-4475-9358-0142f3174b5e
2025-06-20 17:47:02 - api_server - INFO - 任务 8552819a-b99b-4475-9358-0142f3174b5e 进度更新: 40% - 开始内容分析
2025-06-20 17:47:02 - api_server - INFO - 🔍 开始内容分析任务: 8552819a-b99b-4475-9358-0142f3174b5e
2025-06-20 17:47:02 - api_server - INFO - 📊 任务当前状态: content_analyzing
2025-06-20 17:47:02 - api_server - INFO - 📊 任务当前进度: 40%
2025-06-20 17:47:02 - api_server - INFO - 📊 解析结果存在: True
2025-06-20 17:47:02 - api_server - INFO - 📊 分析服务管理器可用: True
2025-06-20 17:47:02 - api_server - INFO - 任务 8552819a-b99b-4475-9358-0142f3174b5e 进度更新: 10% - 开始内容分析
2025-06-20 17:47:02 - api_server - INFO - ✅ 任务状态已更新为: content_analyzing
2025-06-20 17:47:02 - api_server - INFO - 从文件路径读取: D:\ai_project\document_analyzer\uploads\temp\8552819a-b99b-4475-9358-0142f3174b5e_需求文档 - 一局对接链数优化V0.1.docx
2025-06-20 17:47:02 - api_server - INFO - 检测到Word文档，使用Markdown转换: 8552819a-b99b-4475-9358-0142f3174b5e_需求文档 - 一局对接链数优化V0.1.docx
2025-06-20 17:47:02 - api_server - INFO - Word文档已成功转换为Markdown格式，长度: 2547 字符
2025-06-20 17:47:02 - api_server - INFO - 任务 8552819a-b99b-4475-9358-0142f3174b5e 进度更新: 30% - 获取到上传文件
2025-06-20 17:47:02 - api_server - INFO - 📄 提取到文档内容，长度: 2547 字符
2025-06-20 17:47:02 - api_server - INFO - 任务 8552819a-b99b-4475-9358-0142f3174b5e 进度更新: 35% - 内容分析管理器开始分析
2025-06-20 17:47:04 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:47:06 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:47:08 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:47:10 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:47:12 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:47:15 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:47:17 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:47:19 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:47:21 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:47:23 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:47:25 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 17:47:28 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:47:30 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:47:32 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:47:34 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:47:36 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:47:38 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:47:41 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:47:43 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:47:45 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:47:47 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:47:49 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:47:51 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:47:54 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:47:56 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:47:58 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:48:00 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:48:02 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:48:04 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:48:07 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:48:09 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:48:11 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:48:13 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:48:15 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:48:18 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:48:20 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 17:48:22 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:48:24 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:48:26 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:48:29 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:48:31 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:48:33 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 17:48:35 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:48:37 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:48:39 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:48:42 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:48:44 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:48:46 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:48:48 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:48:50 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 17:48:52 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:48:55 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:48:57 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:48:59 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:49:01 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:49:03 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:49:05 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:49:08 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:49:11 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:49:14 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:49:16 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:49:18 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:49:20 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:49:23 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 17:49:25 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:49:27 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:49:29 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:49:31 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:49:33 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:49:36 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:49:39 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:49:42 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:49:45 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:49:48 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:49:51 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:49:53 - api_server - INFO - 任务 8552819a-b99b-4475-9358-0142f3174b5e 进度更新: 100% - 内容分析完成
2025-06-20 17:49:53 - api_server - INFO - ✅ 内容分析完成: 8552819a-b99b-4475-9358-0142f3174b5e
2025-06-20 17:49:53 - api_server - INFO - 任务 8552819a-b99b-4475-9358-0142f3174b5e 进度更新: 70% - 开始AI智能分析
2025-06-20 17:49:53 - api_server - INFO - 🤖 开始AI分析任务: 8552819a-b99b-4475-9358-0142f3174b5e
2025-06-20 17:49:53 - api_server - INFO - 任务 8552819a-b99b-4475-9358-0142f3174b5e 进度更新: 10% - 开始AI智能分析
2025-06-20 17:49:53 - api_server - INFO - 任务 8552819a-b99b-4475-9358-0142f3174b5e 进度更新: 30% - 使用分析服务进行AI分析
2025-06-20 17:49:53 - api_server - INFO - 任务 8552819a-b99b-4475-9358-0142f3174b5e 进度更新: 37% - 需求分析与功能拆解
2025-06-20 17:49:54 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:49:57 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:50:00 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.01s)
2025-06-20 17:50:03 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:50:06 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:50:09 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:50:12 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:50:15 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 17:50:18 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:50:21 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:50:24 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:50:27 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:50:30 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:50:33 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:50:36 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:50:39 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:50:42 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:50:45 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:50:48 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:50:49 - api_server - INFO - 任务 8552819a-b99b-4475-9358-0142f3174b5e 进度更新: 47% - 设计数据流程与API接口
2025-06-20 17:50:51 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:50:54 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:50:57 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:51:00 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:51:03 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:51:06 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:51:09 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:51:12 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:51:15 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:51:18 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:51:21 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:51:24 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:51:27 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:51:30 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:51:33 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:51:36 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:51:39 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:51:42 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:51:45 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:51:48 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.01s)
2025-06-20 17:51:51 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:51:54 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:51:57 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:52:00 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:52:03 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:52:06 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:52:09 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:52:11 - api_server - INFO - 任务 8552819a-b99b-4475-9358-0142f3174b5e 进度更新: 58% - 前后端架构设计
2025-06-20 17:52:12 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:52:15 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:52:18 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:52:21 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:52:24 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:52:27 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:52:30 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:52:33 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:52:36 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:52:39 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:52:42 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:52:45 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:52:48 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:52:51 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:52:54 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:52:57 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:53:00 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:53:03 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:53:06 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:53:06 - api_server - INFO - 任务 8552819a-b99b-4475-9358-0142f3174b5e 进度更新: 68% - 安全权限方案设计
2025-06-20 17:53:09 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:53:12 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:53:15 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:53:18 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:53:21 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:53:24 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:53:27 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 17:53:30 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.01s)
2025-06-20 17:53:33 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:53:36 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:53:37 - api_server - INFO - 任务 8552819a-b99b-4475-9358-0142f3174b5e 进度更新: 79% - MQ与定时任务设计
2025-06-20 17:53:39 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:53:42 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:53:45 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:53:48 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:53:51 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:53:54 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:53:57 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:54:00 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:54:03 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:54:06 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:54:09 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:54:12 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:54:14 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:54:16 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:54:18 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:54:21 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:54:23 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:54:25 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:54:27 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:54:30 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:54:33 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:54:36 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:54:39 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:54:42 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:54:45 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:54:48 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:54:51 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:54:54 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:54:57 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:55:00 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:55:03 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:55:06 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:55:08 - api_server - INFO - 任务 8552819a-b99b-4475-9358-0142f3174b5e 进度更新: 89% - 数据库设计
2025-06-20 17:55:09 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:55:12 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:55:15 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:55:18 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:55:21 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:55:24 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:55:27 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:55:30 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:55:33 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:55:36 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:55:39 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:55:42 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:55:45 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:55:47 - api_server - INFO - 任务 8552819a-b99b-4475-9358-0142f3174b5e 进度更新: 96% - LangChain集成方案
2025-06-20 17:55:48 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:55:51 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:55:54 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:55:57 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:56:00 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:56:03 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:56:06 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:56:09 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:56:12 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:56:15 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:56:18 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:56:19 - api_server - INFO - 任务 8552819a-b99b-4475-9358-0142f3174b5e 进度更新: 100% - AI架构设计完成
2025-06-20 17:56:19 - api_server - INFO - 任务 8552819a-b99b-4475-9358-0142f3174b5e 进度更新: 100% - AI分析完成
2025-06-20 17:56:19 - api_server - INFO - ✅ AI分析完成: 8552819a-b99b-4475-9358-0142f3174b5e
2025-06-20 17:56:19 - api_server - INFO - 任务 8552819a-b99b-4475-9358-0142f3174b5e 进度更新: 90% - 开始生成文档
2025-06-20 17:56:19 - api_server - INFO - 开始生成文档: 8552819a-b99b-4475-9358-0142f3174b5e
2025-06-20 17:56:19 - api_server - INFO - 📄 开始文档生成任务: 8552819a-b99b-4475-9358-0142f3174b5e
2025-06-20 17:56:19 - api_server - INFO - 任务 8552819a-b99b-4475-9358-0142f3174b5e 进度更新: 10% - 准备生成文档
2025-06-20 17:56:19 - api_server - INFO - 任务 8552819a-b99b-4475-9358-0142f3174b5e 进度更新: 30% - 获取分析结果数据
2025-06-20 17:56:19 - api_server - INFO - 生成文档数据结构: basic_info=True, document_parsing=True, content_analysis=True, ai_analysis=True
2025-06-20 17:56:19 - api_server - INFO - 任务 8552819a-b99b-4475-9358-0142f3174b5e 进度更新: 60% - 转换为Markdown格式
2025-06-20 17:56:19 - api_server - INFO - 开始生成Markdown报告，数据键: ['success', 'timestamp', 'service', 'data', 'metadata']
2025-06-20 17:56:19 - api_server - INFO - Markdown报告生成完成，长度: 121 字符
2025-06-20 17:56:20 - api_server - INFO - 任务 8552819a-b99b-4475-9358-0142f3174b5e 进度更新: 90% - 保存文档内容
2025-06-20 17:56:20 - api_server - INFO - 任务 8552819a-b99b-4475-9358-0142f3174b5e 进度更新: 100% - 文档生成完成
2025-06-20 17:56:20 - api_server - INFO - 文档生成完成: 8552819a-b99b-4475-9358-0142f3174b5e
2025-06-20 17:56:20 - api_server - INFO - ✅ 文档生成完成: 8552819a-b99b-4475-9358-0142f3174b5e
2025-06-20 17:56:20 - api_server - INFO - 任务 8552819a-b99b-4475-9358-0142f3174b5e 进度更新: 100% - 完整分析流程完成
2025-06-20 17:56:20 - api_server - INFO - 完整分析流程成功完成: 8552819a-b99b-4475-9358-0142f3174b5e
2025-06-20 17:56:20 - api_server - INFO - 🎉 完整分析流程完成: 8552819a-b99b-4475-9358-0142f3174b5e
2025-06-20 17:56:21 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 17:56:21 - api_server - INFO - ✅ GET get_analysis_result [200] (0.02s)
2025-06-20 17:59:15 - api_server - INFO - ✅ GET get_analysis_result [200] (0.01s)
2025-06-20 17:59:38 - api_server - INFO - 从配置文件读取火山引擎配置: {'api_key': '7fcb3541-9363-4bfa-90aa-19e9f691bc25', 'endpoint': 'https://ark.cn-beijing.volces.com/api/v3', 'max_tokens': 4000, 'model': 'ep-20250605091804-wmw6w', 'temperature': 0.7}
2025-06-20 17:59:39 - api_server - INFO - 火山引擎客户端初始化成功
2025-06-20 17:59:39 - api_server - INFO - Weaviate配置: http://localhost:8080
2025-06-20 17:59:48 - api_server - INFO - 分析服务管理器初始化成功
2025-06-20 17:59:48 - api_server - INFO - 分析服务管理器已集成到API服务器
2025-06-20 17:59:48 - api_server - INFO - 增强分析器初始化成功
2025-06-20 17:59:48 - api_server - INFO - 初始化任务存储数据库...
2025-06-20 17:59:48 - api_server - INFO - 任务存储数据库初始化成功
2025-06-20 18:02:06 - api_server - INFO - ✅ GET uploaded_file [200] (0.14s)
2025-06-20 18:08:47 - api_server - INFO - ✅ GET uploaded_file [200] (0.00s)
2025-06-20 18:12:32 - api_server - INFO - ✅ OPTIONS start_analysis_v2 [200]
2025-06-20 18:12:32 - api_server - INFO - file_info包含content字段，长度: 1132360
2025-06-20 18:12:32 - api_server - INFO - base64解码成功，file_content类型: <class 'bytes'>, 大小: 849268 bytes
2025-06-20 18:12:32 - api_server - INFO - 任务 68a70a95-64d0-4577-9dd1-2dba306865fe 进度更新: 0% - 分析流程启动中
2025-06-20 18:12:32 - api_server - INFO - 开始完整分析流程: 68a70a95-64d0-4577-9dd1-2dba306865fe
2025-06-20 18:12:32 - api_server - INFO - V2 完整分析启动成功: 需求文档 - 一局对接链数优化V0.1.docx, 任务ID: 68a70a95-64d0-4577-9dd1-2dba306865fe, 大小: 849268 bytes
2025-06-20 18:12:32 - api_server - INFO - 🚀 V2 完整分析启动: 需求文档 - 一局对接链数优化V0.1.docx, 任务ID: 68a70a95-64d0-4577-9dd1-2dba306865fe
2025-06-20 18:12:32 - api_server - INFO - ✅ POST start_analysis_v2 [200] (0.05s)
2025-06-20 18:12:32 - api_server - INFO - 任务 68a70a95-64d0-4577-9dd1-2dba306865fe 进度更新: 10% - 开始文档解析
2025-06-20 18:12:32 - api_server - INFO - 任务 68a70a95-64d0-4577-9dd1-2dba306865fe 进度更新: 10% - 开始解析文件
2025-06-20 18:12:32 - api_server - INFO - 从文件路径读取: D:\ai_project\document_analyzer\uploads\temp\68a70a95-64d0-4577-9dd1-2dba306865fe_需求文档 - 一局对接链数优化V0.1.docx
2025-06-20 18:12:32 - api_server - INFO - 检测到Word文档，使用Markdown转换: 68a70a95-64d0-4577-9dd1-2dba306865fe_需求文档 - 一局对接链数优化V0.1.docx
2025-06-20 18:12:32 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:12:33 - api_server - INFO - Word文档已成功转换为Markdown格式，长度: 2547 字符
2025-06-20 18:12:33 - api_server - INFO - 提取的文本内容已准备完毕
2025-06-20 18:12:33 - api_server - INFO - 转换后内容预览: 一局对接链数优化

需求文档

| 版本 | V0.1 |
| --- | --- |
| 撰写人 | 李威明 |
| 类型 | 系统对接 |
| 标签 | 链数、中建一局 |

中企云链（北京）金融信息服务有限公司

文档控制

需求方

| 日期 | 需求人 | 需求部门 | 说明 |
| --- | --- | --- | --- |
| 2025/4/30 | 徐艺 | 金融服务部 |  |

版本记录

| 日期 | 撰写人 | 版本 | 变更说明 |
| --- | --- | --- | --- |
| 2025/4/30 | 李威明 | V0.1 | 创建文档 |

目录

第1章 项目介绍	4

1.1 需求背景	4

1.2 建设目标及路线	4

第2章 整体说明	4

2.1 需求模型	4

2.2 功能结构图	4

2.3 信息结构图	4

2.4 项目范围	4

2.4.1 新增功能	4

2.4.2 调整功能	4

第3章 功能需求说明	4

3.1 调整说明	4

# 项目介绍

## 需求背景

- 一局对接链数的项目上线后，核心企业反馈，希望就已推送至平台的数据，在核心企业内部系统内修改部分信息（如额度信息）后，使用原业务编号再次推送至平台。就目前的接口校验逻辑，相同业务编号的业务数据不可重复推送。因而，需要结合核心企业需求，对接口的校验逻辑进行调整。

## 建设目标及路线

- 调整接口校验逻辑，兼容核心企业重推数据的场景。

# 整体说明

## 需求模型

## 功能结构图

## 信息结构图

## 项目范围

### 新增功能

### 调整功能

# 功能需求说明

## 接口校验规则调整

### 调整说明

本期对【确权业务申请】接口中关于bizSerialNo的校验规则进行调整，调整后的校验规则为：

| 序号 | 接口名称 | 隶属服务 | 校验点 | 逻辑 | 错误提示 |
| --- | --- | --- | --- | --- | --- |
| 1 | 确权业务申请 | zqyl-data-open | 入参校验 | bizSerialNo不可与已成功推送的非“已作废”、“已删除”状态的链数业务数据对应的bizSerialNo成功记录重复 | bizSerialNo已存在，请先登录平台进行作废/删除。 |

## 链数额度功能调整

### 调整说明

本期，对原“链数额度”功能做如下调整：

- 功能名称由“链数额度”变更为“额度管理”；

- 页面右上方新增“组织单元额度”按钮，当且仅当当前登录企业为多组织企业时展示该按钮。用户点击“组织单元额度”按钮，则跳转至“组织单元额度”列表页。

- 列表新增字段“额度类型”，置于“额度名称”之后，若为链数额度则取值为“链数额度”。

![图片2](http://localhost:8082/uploads/temp/68a70a95-64d0-4577-9dd1-2dba306865fe_img_20250620_181233_1.png)

## 新增组织单元额度功能

### 调整说明

本期在核心企业侧链数额度功能下，新增“组织单元额度”列表页。支持用户查询当前登录企业下的具体组织单元的链数额度、云信额度明细。

具体如下：

- 交互说明：

![图片1](http://localhost:8082/uploads/temp/68a70a95-64d0-4577-9dd1-2dba306865fe_img_20250620_181233_0.png)

（页面入口：用户点击“额度管理”列表页右上角的“组织单元额度”按钮，跳转至该页面。）

- 返回：用户点击返回，返回至“额度管理”列表页。

- 导出：点击导出，将列表中用户筛选后的数据以xls文件格式导出至本地。

- 列表筛选：用户确定筛选条件后，点击查询按钮，按照用户确定的筛选条件对列表进行筛选；点击重置，列表恢复至未筛选状态。

- 功能说明：

- 列表需展示分配至当前登录企业下所有组织单元的链数额度和云信额度明细。页面载入时，默认展示分配至各组织单元的链数额度明细；若用户将额度类型切换为“云信额度”，则需要展示分配至各组织单元的云信额度明细；若用户将额度类型切换为“全部”，则需要展示分配至各组织单元的链数和云信额度明细。

- 字段说明：

- 筛选字段：

| 序号 | 字段名 | 类型格式 | 长度 | 默认值 | 必填 | 规则 |
| --- | --- | --- | --- | --- | --- | --- |
| 1 | 组织单元名称 | 文本输入框 | - | - | - | 模糊搜索 |
| 2 | 额度名称 | 文本输入框 | - | - | - | 模糊搜索 |
| 3 | 额度类型 | 下拉列表 | - | 链数额度 | - | 下拉选项：链数额度、云信额度、全部 |

- 汇总字段：

| 序号 | 字段名 | 类型格式 | 规则 |
| --- | --- | --- | --- |
| 1 | 总额度（元） | 数值 | 满足筛选条件的列表数据的“已分配额度（元）”之和 |
| 2 | 已用额度（元） | 数值 | 满足筛选条件的列表数据的“已用额度（元）”之和 |
| 3 | 可用额度（元） | 数值 | 满足筛选条件的列表数据的“可用额度（元）”之和 |

- 备注：筛选条件更新后，汇总值需要同步更新计算。

- 列表字段：

| 序号 | 字段名 | 类型格式 | 规则 |
| --- | --- | --- | --- |
| 1 | 组织单元名称 | 字符串 |  |
| 2 | 额度名称 | 字符串 |  |
| 3 | 额度类型 | 字符串 |  |
| 4 | 已分配额度（元） | 数值 |  |
| 5 | 已用额度（元） | 数值 |  |
| 6 | 可用额度（元） | 数值 |  |

- 备注：列表默认按照组织单元名称为主要关键字、额度类型为次要关键字降序排列。
2025-06-20 18:12:33 - api_server - INFO - 提取的文本内容已准备完毕
2025-06-20 18:12:33 - api_server - INFO - 转换后内容预览: 一局对接链数优化

需求文档

| 版本 | V0.1 |
| --- | --- |
| 撰写人 | 李威明 |
| 类型 | 系统对接 |
| 标签 | 链数、中建一局 |

中企云链（北京）金融信息服务有限公司

文档控制

需求方

| 日期 | 需求人 | 需求部门 | 说明 |
| --- | --- | --- | --- |
| 2025/4/30 | 徐艺 | 金融服务部 |  |

版本记录

| 日期 | 撰写人 | 版本 | 变更说明 |
| --- | --- | --- | --- |
| 2025/4/30 | 李威明 | V0.1 | 创建文档 |

目录

第1章 项目介绍	4

1.1 需求背景	4

1.2 建设目标及路线	4

第2章 整体说明	4

2.1 需求模型	4

2.2 功能结构图	4

2.3 信息结构图	4

2.4 项目范围	4

2.4.1 新增功能	4

2.4.2 调整功能	4

第3章 功能需求说明	4

3.1 调整说明	4

# 项目介绍

## 需求背景

- 一局对接链数的项目上线后，核心企业反馈，希望就已推送至平台的数据，在核心企业内部系统内修改部分信息（如额度信息）后，使用原业务编号再次推送至平台。就目前的接口校验逻辑，相同业务编号的业务数据不可重复推送。因而，需要结合核心企业需求，对接口的校验逻辑进行调整。

## 建设目标及路线

- 调整接口校验逻辑，兼容核心企业重推数据的场景。

# 整体说明

## 需求模型

## 功能结构图

## 信息结构图

## 项目范围

### 新增功能

### 调整功能

# 功能需求说明

## 接口校验规则调整

### 调整说明

本期对【确权业务申请】接口中关于bizSerialNo的校验规则进行调整，调整后的校验规则为：

| 序号 | 接口名称 | 隶属服务 | 校验点 | 逻辑 | 错误提示 |
| --- | --- | --- | --- | --- | --- |
| 1 | 确权业务申请 | zqyl-data-open | 入参校验 | bizSerialNo不可与已成功推送的非“已作废”、“已删除”状态的链数业务数据对应的bizSerialNo成功记录重复 | bizSerialNo已存在，请先登录平台进行作废/删除。 |

## 链数额度功能调整

### 调整说明

本期，对原“链数额度”功能做如下调整：

- 功能名称由“链数额度”变更为“额度管理”；

- 页面右上方新增“组织单元额度”按钮，当且仅当当前登录企业为多组织企业时展示该按钮。用户点击“组织单元额度”按钮，则跳转至“组织单元额度”列表页。

- 列表新增字段“额度类型”，置于“额度名称”之后，若为链数额度则取值为“链数额度”。

![图片2](http://localhost:8082/uploads/temp/68a70a95-64d0-4577-9dd1-2dba306865fe_img_20250620_181233_1.png)

## 新增组织单元额度功能

### 调整说明

本期在核心企业侧链数额度功能下，新增“组织单元额度”列表页。支持用户查询当前登录企业下的具体组织单元的链数额度、云信额度明细。

具体如下：

- 交互说明：

![图片1](http://localhost:8082/uploads/temp/68a70a95-64d0-4577-9dd1-2dba306865fe_img_20250620_181233_0.png)

（页面入口：用户点击“额度管理”列表页右上角的“组织单元额度”按钮，跳转至该页面。）

- 返回：用户点击返回，返回至“额度管理”列表页。

- 导出：点击导出，将列表中用户筛选后的数据以xls文件格式导出至本地。

- 列表筛选：用户确定筛选条件后，点击查询按钮，按照用户确定的筛选条件对列表进行筛选；点击重置，列表恢复至未筛选状态。

- 功能说明：

- 列表需展示分配至当前登录企业下所有组织单元的链数额度和云信额度明细。页面载入时，默认展示分配至各组织单元的链数额度明细；若用户将额度类型切换为“云信额度”，则需要展示分配至各组织单元的云信额度明细；若用户将额度类型切换为“全部”，则需要展示分配至各组织单元的链数和云信额度明细。

- 字段说明：

- 筛选字段：

| 序号 | 字段名 | 类型格式 | 长度 | 默认值 | 必填 | 规则 |
| --- | --- | --- | --- | --- | --- | --- |
| 1 | 组织单元名称 | 文本输入框 | - | - | - | 模糊搜索 |
| 2 | 额度名称 | 文本输入框 | - | - | - | 模糊搜索 |
| 3 | 额度类型 | 下拉列表 | - | 链数额度 | - | 下拉选项：链数额度、云信额度、全部 |

- 汇总字段：

| 序号 | 字段名 | 类型格式 | 规则 |
| --- | --- | --- | --- |
| 1 | 总额度（元） | 数值 | 满足筛选条件的列表数据的“已分配额度（元）”之和 |
| 2 | 已用额度（元） | 数值 | 满足筛选条件的列表数据的“已用额度（元）”之和 |
| 3 | 可用额度（元） | 数值 | 满足筛选条件的列表数据的“可用额度（元）”之和 |

- 备注：筛选条件更新后，汇总值需要同步更新计算。

- 列表字段：

| 序号 | 字段名 | 类型格式 | 规则 |
| --- | --- | --- | --- |
| 1 | 组织单元名称 | 字符串 |  |
| 2 | 额度名称 | 字符串 |  |
| 3 | 额度类型 | 字符串 |  |
| 4 | 已分配额度（元） | 数值 |  |
| 5 | 已用额度（元） | 数值 |  |
| 6 | 可用额度（元） | 数值 |  |

- 备注：列表默认按照组织单元名称为主要关键字、额度类型为次要关键字降序排列。
2025-06-20 18:12:33 - api_server - INFO - 任务 68a70a95-64d0-4577-9dd1-2dba306865fe 进度更新: 40% - 使用分析服务解析文档
2025-06-20 18:12:35 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:12:37 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:12:39 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.02s)
2025-06-20 18:12:41 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:12:44 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:12:47 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:12:50 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:12:53 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:12:56 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:12:59 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:13:02 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:13:05 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:13:07 - api_server - INFO - 任务 68a70a95-64d0-4577-9dd1-2dba306865fe 进度更新: 100% - 文档解析完成
2025-06-20 18:13:07 - api_server - INFO - ✅ 文件解析完成: 68a70a95-64d0-4577-9dd1-2dba306865fe
2025-06-20 18:13:07 - api_server - INFO - 任务 68a70a95-64d0-4577-9dd1-2dba306865fe 进度更新: 40% - 开始内容分析
2025-06-20 18:13:07 - api_server - INFO - 🔍 开始内容分析任务: 68a70a95-64d0-4577-9dd1-2dba306865fe
2025-06-20 18:13:07 - api_server - INFO - 📊 任务当前状态: content_analyzing
2025-06-20 18:13:07 - api_server - INFO - 📊 任务当前进度: 40%
2025-06-20 18:13:07 - api_server - INFO - 📊 解析结果存在: True
2025-06-20 18:13:07 - api_server - INFO - 📊 分析服务管理器可用: True
2025-06-20 18:13:07 - api_server - INFO - 任务 68a70a95-64d0-4577-9dd1-2dba306865fe 进度更新: 10% - 开始内容分析
2025-06-20 18:13:07 - api_server - INFO - ✅ 任务状态已更新为: content_analyzing
2025-06-20 18:13:07 - api_server - INFO - 从文件路径读取: D:\ai_project\document_analyzer\uploads\temp\68a70a95-64d0-4577-9dd1-2dba306865fe_需求文档 - 一局对接链数优化V0.1.docx
2025-06-20 18:13:07 - api_server - INFO - 检测到Word文档，使用Markdown转换: 68a70a95-64d0-4577-9dd1-2dba306865fe_需求文档 - 一局对接链数优化V0.1.docx
2025-06-20 18:13:07 - api_server - INFO - Word文档已成功转换为Markdown格式，长度: 2547 字符
2025-06-20 18:13:07 - api_server - INFO - 任务 68a70a95-64d0-4577-9dd1-2dba306865fe 进度更新: 30% - 获取到上传文件
2025-06-20 18:13:07 - api_server - INFO - 📄 提取到文档内容，长度: 2547 字符
2025-06-20 18:13:07 - api_server - INFO - 任务 68a70a95-64d0-4577-9dd1-2dba306865fe 进度更新: 35% - 内容分析管理器开始分析
2025-06-20 18:13:08 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:13:11 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:13:14 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:13:17 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:13:20 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:13:23 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:13:26 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:13:29 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:13:32 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:13:35 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:13:38 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:13:41 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:13:44 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:13:46 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:13:49 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:13:52 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:13:55 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:13:58 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:14:01 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:14:04 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:14:07 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:14:10 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:14:12 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:14:14 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:14:16 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 18:14:18 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:14:21 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:14:23 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:14:25 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 18:14:27 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:14:29 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:14:31 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:14:34 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:14:36 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:14:38 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:14:40 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:14:42 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:14:44 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:14:47 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:14:49 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:14:51 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:14:53 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:14:56 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:14:58 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:15:00 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:15:02 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:15:04 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:15:06 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:15:09 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:15:11 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:15:13 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:15:15 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:15:17 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:15:19 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:15:22 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:15:25 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:15:28 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:15:31 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:15:34 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:15:36 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:15:39 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:15:42 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:15:45 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:15:48 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:15:51 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:15:54 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:15:57 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:16:00 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:16:03 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:16:06 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:16:09 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:16:12 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:16:15 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:16:17 - api_server - INFO - 任务 68a70a95-64d0-4577-9dd1-2dba306865fe 进度更新: 100% - 内容分析完成
2025-06-20 18:16:17 - api_server - INFO - ✅ 内容分析完成: 68a70a95-64d0-4577-9dd1-2dba306865fe
2025-06-20 18:16:17 - api_server - INFO - 任务 68a70a95-64d0-4577-9dd1-2dba306865fe 进度更新: 70% - 开始AI智能分析
2025-06-20 18:16:17 - api_server - INFO - 🤖 开始AI分析任务: 68a70a95-64d0-4577-9dd1-2dba306865fe
2025-06-20 18:16:17 - api_server - INFO - 任务 68a70a95-64d0-4577-9dd1-2dba306865fe 进度更新: 10% - 开始AI智能分析
2025-06-20 18:16:17 - api_server - INFO - 任务 68a70a95-64d0-4577-9dd1-2dba306865fe 进度更新: 30% - 使用分析服务进行AI分析
2025-06-20 18:16:17 - api_server - INFO - 任务 68a70a95-64d0-4577-9dd1-2dba306865fe 进度更新: 37% - 需求分析与功能拆解
2025-06-20 18:16:18 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:16:21 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:16:24 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:16:27 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 18:16:30 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:16:33 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:16:36 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:16:39 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 18:16:42 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:16:45 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:16:48 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:16:51 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:16:54 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:16:56 - api_server - INFO - 任务 68a70a95-64d0-4577-9dd1-2dba306865fe 进度更新: 47% - 设计数据流程与API接口
2025-06-20 18:16:57 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:17:00 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:17:03 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:17:06 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:17:09 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:17:12 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:17:15 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:17:18 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:17:21 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:17:24 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:17:27 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 18:17:30 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:17:33 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:17:36 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:17:39 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:17:42 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:17:45 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:17:48 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:17:51 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:17:54 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:17:57 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:18:00 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:18:03 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:18:06 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:18:09 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:18:12 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:18:15 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:18:18 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:18:21 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:18:24 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:18:27 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:18:28 - api_server - INFO - 任务 68a70a95-64d0-4577-9dd1-2dba306865fe 进度更新: 58% - 前后端架构设计
2025-06-20 18:18:30 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:18:33 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:18:36 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:18:39 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 18:18:42 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 18:18:45 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:18:48 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:18:51 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:18:54 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:18:57 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:19:00 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 18:19:03 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:19:06 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:19:09 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:19:12 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:19:15 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:19:15 - api_server - INFO - 任务 68a70a95-64d0-4577-9dd1-2dba306865fe 进度更新: 68% - 安全权限方案设计
2025-06-20 18:19:18 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:19:21 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:19:24 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:19:27 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 18:19:30 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:19:32 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:19:34 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:19:36 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:19:38 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:19:41 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:19:44 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:19:47 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:19:50 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:19:53 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 18:19:56 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:19:59 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:20:00 - api_server - INFO - 任务 68a70a95-64d0-4577-9dd1-2dba306865fe 进度更新: 79% - MQ与定时任务设计
2025-06-20 18:20:02 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:20:05 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:20:08 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:20:11 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:20:14 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:20:17 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:20:20 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:20:23 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:20:26 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:20:29 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 18:20:31 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:20:34 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:20:37 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:20:40 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 18:20:43 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:20:46 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 18:20:49 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 18:20:52 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:20:55 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:20:58 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:21:01 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:21:04 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:21:07 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:21:10 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:21:13 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:21:16 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:21:18 - api_server - INFO - 任务 68a70a95-64d0-4577-9dd1-2dba306865fe 进度更新: 89% - 数据库设计
2025-06-20 18:21:19 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:21:22 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:21:25 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:21:28 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.01s)
2025-06-20 18:21:31 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:21:34 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:21:37 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:21:40 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:21:43 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:21:46 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:21:49 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:21:52 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:21:55 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:21:58 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:22:01 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:22:04 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 18:22:05 - api_server - INFO - 任务 68a70a95-64d0-4577-9dd1-2dba306865fe 进度更新: 96% - LangChain集成方案
2025-06-20 18:22:07 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:22:10 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:22:13 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:22:16 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:22:19 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:22:22 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:22:25 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:22:28 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 18:22:31 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:22:34 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:22:37 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:22:40 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:22:43 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 18:22:46 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:22:49 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:22:52 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:22:55 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:22:55 - api_server - INFO - 任务 68a70a95-64d0-4577-9dd1-2dba306865fe 进度更新: 100% - AI架构设计完成
2025-06-20 18:22:55 - api_server - INFO - 任务 68a70a95-64d0-4577-9dd1-2dba306865fe 进度更新: 100% - AI分析完成
2025-06-20 18:22:55 - api_server - INFO - ✅ AI分析完成: 68a70a95-64d0-4577-9dd1-2dba306865fe
2025-06-20 18:22:55 - api_server - INFO - 任务 68a70a95-64d0-4577-9dd1-2dba306865fe 进度更新: 90% - 开始生成文档
2025-06-20 18:22:55 - api_server - INFO - 开始生成文档: 68a70a95-64d0-4577-9dd1-2dba306865fe
2025-06-20 18:22:55 - api_server - INFO - 📄 开始文档生成任务: 68a70a95-64d0-4577-9dd1-2dba306865fe
2025-06-20 18:22:55 - api_server - INFO - 任务 68a70a95-64d0-4577-9dd1-2dba306865fe 进度更新: 10% - 准备生成文档
2025-06-20 18:22:55 - api_server - INFO - 任务 68a70a95-64d0-4577-9dd1-2dba306865fe 进度更新: 30% - 获取分析结果数据
2025-06-20 18:22:55 - api_server - INFO - 生成文档数据结构: basic_info=True, document_parsing=True, content_analysis=True, ai_analysis=True
2025-06-20 18:22:55 - api_server - INFO - 任务 68a70a95-64d0-4577-9dd1-2dba306865fe 进度更新: 60% - 转换为Markdown格式
2025-06-20 18:22:55 - api_server - INFO - 开始生成Markdown报告，数据键: ['success', 'timestamp', 'service', 'data', 'metadata']
2025-06-20 18:22:55 - api_server - INFO - Markdown报告生成完成，长度: 121 字符
2025-06-20 18:22:55 - api_server - INFO - 任务 68a70a95-64d0-4577-9dd1-2dba306865fe 进度更新: 90% - 保存文档内容
2025-06-20 18:22:55 - api_server - INFO - 任务 68a70a95-64d0-4577-9dd1-2dba306865fe 进度更新: 100% - 文档生成完成
2025-06-20 18:22:55 - api_server - INFO - 文档生成完成: 68a70a95-64d0-4577-9dd1-2dba306865fe
2025-06-20 18:22:55 - api_server - INFO - ✅ 文档生成完成: 68a70a95-64d0-4577-9dd1-2dba306865fe
2025-06-20 18:22:55 - api_server - INFO - 任务 68a70a95-64d0-4577-9dd1-2dba306865fe 进度更新: 100% - 完整分析流程完成
2025-06-20 18:22:55 - api_server - INFO - 完整分析流程成功完成: 68a70a95-64d0-4577-9dd1-2dba306865fe
2025-06-20 18:22:55 - api_server - INFO - 🎉 完整分析流程完成: 68a70a95-64d0-4577-9dd1-2dba306865fe
2025-06-20 18:22:58 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:22:58 - api_server - INFO - ✅ GET get_analysis_result [200] (0.02s)
2025-06-20 18:22:59 - api_server - INFO - ✅ GET uploaded_file [200] (0.00s)
2025-06-20 18:22:59 - api_server - INFO - ✅ GET uploaded_file [200]
2025-06-20 18:25:59 - api_server - INFO - 🔄 GET uploaded_file [304] (0.00s)
2025-06-20 18:25:59 - api_server - INFO - ❌ GET /.well-known/appspecific/com.chrome.devtools.json [404]
2025-06-20 18:28:07 - api_server - INFO - ✅ OPTIONS start_analysis_v2 [200]
2025-06-20 18:28:07 - api_server - INFO - file_info包含content字段，长度: 1132360
2025-06-20 18:28:07 - api_server - INFO - base64解码成功，file_content类型: <class 'bytes'>, 大小: 849268 bytes
2025-06-20 18:28:07 - api_server - INFO - 任务 b50ca058-7ae6-4469-9ce9-bd8738875469 进度更新: 0% - 分析流程启动中
2025-06-20 18:28:07 - api_server - INFO - V2 完整分析启动成功: 需求文档 - 一局对接链数优化V0.1.docx, 任务ID: b50ca058-7ae6-4469-9ce9-bd8738875469, 大小: 849268 bytes
2025-06-20 18:28:07 - api_server - INFO - 开始完整分析流程: b50ca058-7ae6-4469-9ce9-bd8738875469
2025-06-20 18:28:07 - api_server - INFO - 🚀 V2 完整分析启动: 需求文档 - 一局对接链数优化V0.1.docx, 任务ID: b50ca058-7ae6-4469-9ce9-bd8738875469
2025-06-20 18:28:07 - api_server - INFO - ✅ POST start_analysis_v2 [200] (0.05s)
2025-06-20 18:28:07 - api_server - INFO - 任务 b50ca058-7ae6-4469-9ce9-bd8738875469 进度更新: 10% - 开始文档解析
2025-06-20 18:28:07 - api_server - INFO - 任务 b50ca058-7ae6-4469-9ce9-bd8738875469 进度更新: 10% - 开始解析文件
2025-06-20 18:28:07 - api_server - INFO - 从文件路径读取: D:\ai_project\document_analyzer\uploads\temp\b50ca058-7ae6-4469-9ce9-bd8738875469_需求文档 - 一局对接链数优化V0.1.docx
2025-06-20 18:28:07 - api_server - INFO - 检测到Word文档，使用Markdown转换: b50ca058-7ae6-4469-9ce9-bd8738875469_需求文档 - 一局对接链数优化V0.1.docx
2025-06-20 18:28:07 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:28:08 - api_server - INFO - Word文档已成功转换为Markdown格式，长度: 2547 字符
2025-06-20 18:28:08 - api_server - INFO - 提取的文本内容已准备完毕
2025-06-20 18:28:08 - api_server - INFO - 转换后内容预览: 一局对接链数优化

需求文档

| 版本 | V0.1 |
| --- | --- |
| 撰写人 | 李威明 |
| 类型 | 系统对接 |
| 标签 | 链数、中建一局 |

中企云链（北京）金融信息服务有限公司

文档控制

需求方

| 日期 | 需求人 | 需求部门 | 说明 |
| --- | --- | --- | --- |
| 2025/4/30 | 徐艺 | 金融服务部 |  |

版本记录

| 日期 | 撰写人 | 版本 | 变更说明 |
| --- | --- | --- | --- |
| 2025/4/30 | 李威明 | V0.1 | 创建文档 |

目录

第1章 项目介绍	4

1.1 需求背景	4

1.2 建设目标及路线	4

第2章 整体说明	4

2.1 需求模型	4

2.2 功能结构图	4

2.3 信息结构图	4

2.4 项目范围	4

2.4.1 新增功能	4

2.4.2 调整功能	4

第3章 功能需求说明	4

3.1 调整说明	4

# 项目介绍

## 需求背景

- 一局对接链数的项目上线后，核心企业反馈，希望就已推送至平台的数据，在核心企业内部系统内修改部分信息（如额度信息）后，使用原业务编号再次推送至平台。就目前的接口校验逻辑，相同业务编号的业务数据不可重复推送。因而，需要结合核心企业需求，对接口的校验逻辑进行调整。

## 建设目标及路线

- 调整接口校验逻辑，兼容核心企业重推数据的场景。

# 整体说明

## 需求模型

## 功能结构图

## 信息结构图

## 项目范围

### 新增功能

### 调整功能

# 功能需求说明

## 接口校验规则调整

### 调整说明

本期对【确权业务申请】接口中关于bizSerialNo的校验规则进行调整，调整后的校验规则为：

| 序号 | 接口名称 | 隶属服务 | 校验点 | 逻辑 | 错误提示 |
| --- | --- | --- | --- | --- | --- |
| 1 | 确权业务申请 | zqyl-data-open | 入参校验 | bizSerialNo不可与已成功推送的非“已作废”、“已删除”状态的链数业务数据对应的bizSerialNo成功记录重复 | bizSerialNo已存在，请先登录平台进行作废/删除。 |

## 链数额度功能调整

### 调整说明

本期，对原“链数额度”功能做如下调整：

- 功能名称由“链数额度”变更为“额度管理”；

- 页面右上方新增“组织单元额度”按钮，当且仅当当前登录企业为多组织企业时展示该按钮。用户点击“组织单元额度”按钮，则跳转至“组织单元额度”列表页。

- 列表新增字段“额度类型”，置于“额度名称”之后，若为链数额度则取值为“链数额度”。

![图片2](http://localhost:8082/uploads/temp/b50ca058-7ae6-4469-9ce9-bd8738875469_img_20250620_182807_1.png)

## 新增组织单元额度功能

### 调整说明

本期在核心企业侧链数额度功能下，新增“组织单元额度”列表页。支持用户查询当前登录企业下的具体组织单元的链数额度、云信额度明细。

具体如下：

- 交互说明：

![图片1](http://localhost:8082/uploads/temp/b50ca058-7ae6-4469-9ce9-bd8738875469_img_20250620_182807_0.png)

（页面入口：用户点击“额度管理”列表页右上角的“组织单元额度”按钮，跳转至该页面。）

- 返回：用户点击返回，返回至“额度管理”列表页。

- 导出：点击导出，将列表中用户筛选后的数据以xls文件格式导出至本地。

- 列表筛选：用户确定筛选条件后，点击查询按钮，按照用户确定的筛选条件对列表进行筛选；点击重置，列表恢复至未筛选状态。

- 功能说明：

- 列表需展示分配至当前登录企业下所有组织单元的链数额度和云信额度明细。页面载入时，默认展示分配至各组织单元的链数额度明细；若用户将额度类型切换为“云信额度”，则需要展示分配至各组织单元的云信额度明细；若用户将额度类型切换为“全部”，则需要展示分配至各组织单元的链数和云信额度明细。

- 字段说明：

- 筛选字段：

| 序号 | 字段名 | 类型格式 | 长度 | 默认值 | 必填 | 规则 |
| --- | --- | --- | --- | --- | --- | --- |
| 1 | 组织单元名称 | 文本输入框 | - | - | - | 模糊搜索 |
| 2 | 额度名称 | 文本输入框 | - | - | - | 模糊搜索 |
| 3 | 额度类型 | 下拉列表 | - | 链数额度 | - | 下拉选项：链数额度、云信额度、全部 |

- 汇总字段：

| 序号 | 字段名 | 类型格式 | 规则 |
| --- | --- | --- | --- |
| 1 | 总额度（元） | 数值 | 满足筛选条件的列表数据的“已分配额度（元）”之和 |
| 2 | 已用额度（元） | 数值 | 满足筛选条件的列表数据的“已用额度（元）”之和 |
| 3 | 可用额度（元） | 数值 | 满足筛选条件的列表数据的“可用额度（元）”之和 |

- 备注：筛选条件更新后，汇总值需要同步更新计算。

- 列表字段：

| 序号 | 字段名 | 类型格式 | 规则 |
| --- | --- | --- | --- |
| 1 | 组织单元名称 | 字符串 |  |
| 2 | 额度名称 | 字符串 |  |
| 3 | 额度类型 | 字符串 |  |
| 4 | 已分配额度（元） | 数值 |  |
| 5 | 已用额度（元） | 数值 |  |
| 6 | 可用额度（元） | 数值 |  |

- 备注：列表默认按照组织单元名称为主要关键字、额度类型为次要关键字降序排列。
2025-06-20 18:28:08 - api_server - INFO - 提取的文本内容已准备完毕
2025-06-20 18:28:08 - api_server - INFO - 转换后内容预览: 一局对接链数优化

需求文档

| 版本 | V0.1 |
| --- | --- |
| 撰写人 | 李威明 |
| 类型 | 系统对接 |
| 标签 | 链数、中建一局 |

中企云链（北京）金融信息服务有限公司

文档控制

需求方

| 日期 | 需求人 | 需求部门 | 说明 |
| --- | --- | --- | --- |
| 2025/4/30 | 徐艺 | 金融服务部 |  |

版本记录

| 日期 | 撰写人 | 版本 | 变更说明 |
| --- | --- | --- | --- |
| 2025/4/30 | 李威明 | V0.1 | 创建文档 |

目录

第1章 项目介绍	4

1.1 需求背景	4

1.2 建设目标及路线	4

第2章 整体说明	4

2.1 需求模型	4

2.2 功能结构图	4

2.3 信息结构图	4

2.4 项目范围	4

2.4.1 新增功能	4

2.4.2 调整功能	4

第3章 功能需求说明	4

3.1 调整说明	4

# 项目介绍

## 需求背景

- 一局对接链数的项目上线后，核心企业反馈，希望就已推送至平台的数据，在核心企业内部系统内修改部分信息（如额度信息）后，使用原业务编号再次推送至平台。就目前的接口校验逻辑，相同业务编号的业务数据不可重复推送。因而，需要结合核心企业需求，对接口的校验逻辑进行调整。

## 建设目标及路线

- 调整接口校验逻辑，兼容核心企业重推数据的场景。

# 整体说明

## 需求模型

## 功能结构图

## 信息结构图

## 项目范围

### 新增功能

### 调整功能

# 功能需求说明

## 接口校验规则调整

### 调整说明

本期对【确权业务申请】接口中关于bizSerialNo的校验规则进行调整，调整后的校验规则为：

| 序号 | 接口名称 | 隶属服务 | 校验点 | 逻辑 | 错误提示 |
| --- | --- | --- | --- | --- | --- |
| 1 | 确权业务申请 | zqyl-data-open | 入参校验 | bizSerialNo不可与已成功推送的非“已作废”、“已删除”状态的链数业务数据对应的bizSerialNo成功记录重复 | bizSerialNo已存在，请先登录平台进行作废/删除。 |

## 链数额度功能调整

### 调整说明

本期，对原“链数额度”功能做如下调整：

- 功能名称由“链数额度”变更为“额度管理”；

- 页面右上方新增“组织单元额度”按钮，当且仅当当前登录企业为多组织企业时展示该按钮。用户点击“组织单元额度”按钮，则跳转至“组织单元额度”列表页。

- 列表新增字段“额度类型”，置于“额度名称”之后，若为链数额度则取值为“链数额度”。

![图片2](http://localhost:8082/uploads/temp/b50ca058-7ae6-4469-9ce9-bd8738875469_img_20250620_182807_1.png)

## 新增组织单元额度功能

### 调整说明

本期在核心企业侧链数额度功能下，新增“组织单元额度”列表页。支持用户查询当前登录企业下的具体组织单元的链数额度、云信额度明细。

具体如下：

- 交互说明：

![图片1](http://localhost:8082/uploads/temp/b50ca058-7ae6-4469-9ce9-bd8738875469_img_20250620_182807_0.png)

（页面入口：用户点击“额度管理”列表页右上角的“组织单元额度”按钮，跳转至该页面。）

- 返回：用户点击返回，返回至“额度管理”列表页。

- 导出：点击导出，将列表中用户筛选后的数据以xls文件格式导出至本地。

- 列表筛选：用户确定筛选条件后，点击查询按钮，按照用户确定的筛选条件对列表进行筛选；点击重置，列表恢复至未筛选状态。

- 功能说明：

- 列表需展示分配至当前登录企业下所有组织单元的链数额度和云信额度明细。页面载入时，默认展示分配至各组织单元的链数额度明细；若用户将额度类型切换为“云信额度”，则需要展示分配至各组织单元的云信额度明细；若用户将额度类型切换为“全部”，则需要展示分配至各组织单元的链数和云信额度明细。

- 字段说明：

- 筛选字段：

| 序号 | 字段名 | 类型格式 | 长度 | 默认值 | 必填 | 规则 |
| --- | --- | --- | --- | --- | --- | --- |
| 1 | 组织单元名称 | 文本输入框 | - | - | - | 模糊搜索 |
| 2 | 额度名称 | 文本输入框 | - | - | - | 模糊搜索 |
| 3 | 额度类型 | 下拉列表 | - | 链数额度 | - | 下拉选项：链数额度、云信额度、全部 |

- 汇总字段：

| 序号 | 字段名 | 类型格式 | 规则 |
| --- | --- | --- | --- |
| 1 | 总额度（元） | 数值 | 满足筛选条件的列表数据的“已分配额度（元）”之和 |
| 2 | 已用额度（元） | 数值 | 满足筛选条件的列表数据的“已用额度（元）”之和 |
| 3 | 可用额度（元） | 数值 | 满足筛选条件的列表数据的“可用额度（元）”之和 |

- 备注：筛选条件更新后，汇总值需要同步更新计算。

- 列表字段：

| 序号 | 字段名 | 类型格式 | 规则 |
| --- | --- | --- | --- |
| 1 | 组织单元名称 | 字符串 |  |
| 2 | 额度名称 | 字符串 |  |
| 3 | 额度类型 | 字符串 |  |
| 4 | 已分配额度（元） | 数值 |  |
| 5 | 已用额度（元） | 数值 |  |
| 6 | 可用额度（元） | 数值 |  |

- 备注：列表默认按照组织单元名称为主要关键字、额度类型为次要关键字降序排列。
2025-06-20 18:28:08 - api_server - INFO - 任务 b50ca058-7ae6-4469-9ce9-bd8738875469 进度更新: 40% - 使用分析服务解析文档
2025-06-20 18:28:10 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:28:12 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:28:14 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:28:17 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 18:28:20 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:28:23 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 18:28:26 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:28:29 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:28:29 - api_server - INFO - 任务 b50ca058-7ae6-4469-9ce9-bd8738875469 进度更新: 100% - 文档解析完成
2025-06-20 18:28:29 - api_server - INFO - ✅ 文件解析完成: b50ca058-7ae6-4469-9ce9-bd8738875469
2025-06-20 18:28:29 - api_server - INFO - 任务 b50ca058-7ae6-4469-9ce9-bd8738875469 进度更新: 40% - 开始内容分析
2025-06-20 18:28:29 - api_server - INFO - 🔍 开始内容分析任务: b50ca058-7ae6-4469-9ce9-bd8738875469
2025-06-20 18:28:29 - api_server - INFO - 📊 任务当前状态: content_analyzing
2025-06-20 18:28:29 - api_server - INFO - 📊 任务当前进度: 40%
2025-06-20 18:28:29 - api_server - INFO - 📊 解析结果存在: True
2025-06-20 18:28:29 - api_server - INFO - 📊 分析服务管理器可用: True
2025-06-20 18:28:29 - api_server - INFO - 任务 b50ca058-7ae6-4469-9ce9-bd8738875469 进度更新: 10% - 开始内容分析
2025-06-20 18:28:29 - api_server - INFO - ✅ 任务状态已更新为: content_analyzing
2025-06-20 18:28:29 - api_server - INFO - 从文件路径读取: D:\ai_project\document_analyzer\uploads\temp\b50ca058-7ae6-4469-9ce9-bd8738875469_需求文档 - 一局对接链数优化V0.1.docx
2025-06-20 18:28:29 - api_server - INFO - 检测到Word文档，使用Markdown转换: b50ca058-7ae6-4469-9ce9-bd8738875469_需求文档 - 一局对接链数优化V0.1.docx
2025-06-20 18:28:30 - api_server - INFO - Word文档已成功转换为Markdown格式，长度: 2547 字符
2025-06-20 18:28:30 - api_server - INFO - 任务 b50ca058-7ae6-4469-9ce9-bd8738875469 进度更新: 30% - 获取到上传文件
2025-06-20 18:28:30 - api_server - INFO - 📄 提取到文档内容，长度: 2547 字符
2025-06-20 18:28:30 - api_server - INFO - 任务 b50ca058-7ae6-4469-9ce9-bd8738875469 进度更新: 35% - 内容分析管理器开始分析
2025-06-20 18:28:32 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:28:35 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:28:38 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:28:41 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:28:44 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:28:47 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:28:50 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:28:53 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:28:55 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:28:57 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:29:00 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:29:02 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:29:04 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:29:06 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:29:08 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:29:10 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:29:13 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:29:15 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:29:17 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:29:19 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:29:21 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:29:23 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:29:26 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:29:28 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:29:31 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.01s)
2025-06-20 18:29:34 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:29:37 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:29:40 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 18:29:43 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:29:46 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:29:49 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:29:52 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:29:55 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:29:58 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 18:30:01 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:30:04 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:30:07 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:30:10 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:30:13 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:30:16 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:30:19 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:30:22 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:30:25 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:30:28 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:30:31 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.01s)
2025-06-20 18:30:34 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:30:37 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:30:40 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:30:43 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:30:46 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:30:49 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:30:52 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.01s)
2025-06-20 18:30:55 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:30:58 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:31:01 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.01s)
2025-06-20 18:31:04 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:31:07 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:31:09 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:31:12 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:31:15 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:31:18 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:31:21 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:31:24 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:31:26 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:31:28 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 18:31:31 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 18:31:34 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:31:37 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:31:40 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:31:43 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:31:46 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:31:49 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:31:52 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:31:55 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 18:31:58 - api_server - INFO - 任务 b50ca058-7ae6-4469-9ce9-bd8738875469 进度更新: 100% - 内容分析完成
2025-06-20 18:31:58 - api_server - INFO - ✅ 内容分析完成: b50ca058-7ae6-4469-9ce9-bd8738875469
2025-06-20 18:31:58 - api_server - INFO - 任务 b50ca058-7ae6-4469-9ce9-bd8738875469 进度更新: 70% - 开始AI智能分析
2025-06-20 18:31:58 - api_server - INFO - 🤖 开始AI分析任务: b50ca058-7ae6-4469-9ce9-bd8738875469
2025-06-20 18:31:58 - api_server - INFO - 任务 b50ca058-7ae6-4469-9ce9-bd8738875469 进度更新: 10% - 开始AI智能分析
2025-06-20 18:31:58 - api_server - INFO - 任务 b50ca058-7ae6-4469-9ce9-bd8738875469 进度更新: 30% - 使用分析服务进行AI分析
2025-06-20 18:31:58 - api_server - INFO - 任务 b50ca058-7ae6-4469-9ce9-bd8738875469 进度更新: 37% - 需求分析与功能拆解
2025-06-20 18:31:58 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:32:01 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:32:04 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 18:32:07 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 18:32:10 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:32:13 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:32:16 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:32:19 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:32:22 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:32:25 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:32:28 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:32:31 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:32:34 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:32:37 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:32:40 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:32:43 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:32:46 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:32:48 - api_server - INFO - 任务 b50ca058-7ae6-4469-9ce9-bd8738875469 进度更新: 47% - 设计数据流程与API接口
2025-06-20 18:32:49 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:32:52 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:32:55 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:32:58 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:33:01 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:33:04 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:33:07 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:33:10 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:33:13 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:33:16 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:33:19 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:33:22 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:33:25 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:33:28 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:33:31 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 18:33:33 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:33:35 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:33:38 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:33:40 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:33:42 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:33:44 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:33:47 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:33:49 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:33:51 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 18:33:53 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:33:56 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:33:59 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:34:02 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:34:05 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:34:08 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:34:11 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:34:14 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:34:17 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:34:20 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:34:21 - api_server - INFO - 任务 b50ca058-7ae6-4469-9ce9-bd8738875469 进度更新: 58% - 前后端架构设计
2025-06-20 18:34:23 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:34:26 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:34:29 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:34:32 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:34:35 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:34:38 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 18:34:41 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:34:44 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:34:47 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:34:50 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:34:53 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 18:34:56 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:34:59 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:35:02 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:35:05 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:35:08 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 18:35:11 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:35:14 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:35:17 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:35:18 - api_server - INFO - 任务 b50ca058-7ae6-4469-9ce9-bd8738875469 进度更新: 68% - 安全权限方案设计
2025-06-20 18:35:20 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:35:23 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:35:26 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:35:29 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:35:32 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:35:34 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 18:35:36 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:35:38 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:35:41 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:35:43 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 18:35:45 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:35:47 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:35:49 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 18:35:51 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:35:52 - api_server - INFO - 任务 b50ca058-7ae6-4469-9ce9-bd8738875469 进度更新: 79% - MQ与定时任务设计
2025-06-20 18:35:54 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:35:56 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 18:35:58 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:36:00 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:36:02 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:36:04 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:36:07 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:36:09 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:36:12 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:36:15 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:36:18 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:36:21 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:36:24 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:36:27 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:36:30 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 18:36:33 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:36:36 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:36:39 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:36:42 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:36:45 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:36:48 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:36:51 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:36:54 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:36:57 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:37:00 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:37:03 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:37:04 - api_server - INFO - 任务 b50ca058-7ae6-4469-9ce9-bd8738875469 进度更新: 89% - 数据库设计
2025-06-20 18:37:06 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:37:09 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:37:12 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:37:15 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:37:18 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:37:21 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:37:24 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:37:27 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:37:30 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 18:37:32 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:37:35 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:37:38 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:37:41 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:37:44 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:37:47 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:37:50 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:37:53 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:37:56 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 18:37:59 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:38:02 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:38:05 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:38:08 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:38:10 - api_server - INFO - 任务 b50ca058-7ae6-4469-9ce9-bd8738875469 进度更新: 96% - LangChain集成方案
2025-06-20 18:38:11 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:38:14 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:38:17 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 18:38:20 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:38:23 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:38:26 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:38:29 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:38:32 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:38:35 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:38:37 - api_server - INFO - 任务 b50ca058-7ae6-4469-9ce9-bd8738875469 进度更新: 100% - AI架构设计完成
2025-06-20 18:38:37 - api_server - INFO - 任务 b50ca058-7ae6-4469-9ce9-bd8738875469 进度更新: 100% - AI分析完成
2025-06-20 18:38:37 - api_server - INFO - ✅ AI分析完成: b50ca058-7ae6-4469-9ce9-bd8738875469
2025-06-20 18:38:37 - api_server - INFO - 任务 b50ca058-7ae6-4469-9ce9-bd8738875469 进度更新: 90% - 开始生成文档
2025-06-20 18:38:37 - api_server - INFO - 开始生成文档: b50ca058-7ae6-4469-9ce9-bd8738875469
2025-06-20 18:38:37 - api_server - INFO - 📄 开始文档生成任务: b50ca058-7ae6-4469-9ce9-bd8738875469
2025-06-20 18:38:37 - api_server - INFO - 任务 b50ca058-7ae6-4469-9ce9-bd8738875469 进度更新: 10% - 准备生成文档
2025-06-20 18:38:37 - api_server - INFO - 任务 b50ca058-7ae6-4469-9ce9-bd8738875469 进度更新: 30% - 获取分析结果数据
2025-06-20 18:38:37 - api_server - INFO - 生成文档数据结构: basic_info=True, document_parsing=True, content_analysis=True, ai_analysis=True
2025-06-20 18:38:37 - api_server - INFO - 任务 b50ca058-7ae6-4469-9ce9-bd8738875469 进度更新: 60% - 转换为Markdown格式
2025-06-20 18:38:37 - api_server - INFO - 开始生成Markdown报告，数据键: ['success', 'timestamp', 'service', 'data', 'metadata']
2025-06-20 18:38:37 - api_server - INFO - Markdown报告生成完成，长度: 121 字符
2025-06-20 18:38:37 - api_server - INFO - 任务 b50ca058-7ae6-4469-9ce9-bd8738875469 进度更新: 90% - 保存文档内容
2025-06-20 18:38:37 - api_server - INFO - 任务 b50ca058-7ae6-4469-9ce9-bd8738875469 进度更新: 100% - 文档生成完成
2025-06-20 18:38:37 - api_server - INFO - 文档生成完成: b50ca058-7ae6-4469-9ce9-bd8738875469
2025-06-20 18:38:37 - api_server - INFO - ✅ 文档生成完成: b50ca058-7ae6-4469-9ce9-bd8738875469
2025-06-20 18:38:37 - api_server - INFO - 任务 b50ca058-7ae6-4469-9ce9-bd8738875469 进度更新: 100% - 完整分析流程完成
2025-06-20 18:38:37 - api_server - INFO - 完整分析流程成功完成: b50ca058-7ae6-4469-9ce9-bd8738875469
2025-06-20 18:38:37 - api_server - INFO - 🎉 完整分析流程完成: b50ca058-7ae6-4469-9ce9-bd8738875469
2025-06-20 18:38:38 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:38:38 - api_server - INFO - ✅ GET get_analysis_result [200] (0.01s)
2025-06-20 18:38:38 - api_server - INFO - ✅ GET uploaded_file [200] (0.00s)
2025-06-20 18:38:38 - api_server - INFO - ✅ GET uploaded_file [200] (0.00s)
2025-06-20 18:49:18 - api_server - INFO - 从配置文件读取火山引擎配置: {'api_key': '7fcb3541-9363-4bfa-90aa-19e9f691bc25', 'endpoint': 'https://ark.cn-beijing.volces.com/api/v3', 'max_tokens': 4000, 'model': 'ep-20250605091804-wmw6w', 'temperature': 0.7}
2025-06-20 18:49:19 - api_server - INFO - 火山引擎客户端初始化成功
2025-06-20 18:49:19 - api_server - INFO - Weaviate配置: http://localhost:8080
2025-06-20 18:49:29 - api_server - INFO - 分析服务管理器初始化成功
2025-06-20 18:49:29 - api_server - INFO - 分析服务管理器已集成到API服务器
2025-06-20 18:49:29 - api_server - INFO - 增强分析器初始化成功
2025-06-20 18:49:29 - api_server - INFO - 初始化任务存储数据库...
2025-06-20 18:49:29 - api_server - INFO - 任务存储数据库初始化成功
2025-06-20 18:49:50 - api_server - INFO - 从配置文件读取火山引擎配置: {'api_key': '7fcb3541-9363-4bfa-90aa-19e9f691bc25', 'endpoint': 'https://ark.cn-beijing.volces.com/api/v3', 'max_tokens': 4000, 'model': 'ep-20250605091804-wmw6w', 'temperature': 0.7}
2025-06-20 18:49:50 - api_server - INFO - 火山引擎客户端初始化成功
2025-06-20 18:49:50 - api_server - INFO - Weaviate配置: http://localhost:8080
2025-06-20 18:49:59 - api_server - INFO - 分析服务管理器初始化成功
2025-06-20 18:49:59 - api_server - INFO - 分析服务管理器已集成到API服务器
2025-06-20 18:49:59 - api_server - INFO - 增强分析器初始化成功
2025-06-20 18:49:59 - api_server - INFO - 开始生成Markdown报告，数据键: ['basic_info', 'document_parsing', 'content_analysis', 'ai_analysis']
2025-06-20 18:49:59 - api_server - INFO - Markdown报告生成完成，长度: 3125 字符
2025-06-20 18:50:29 - api_server - INFO - 从配置文件读取火山引擎配置: {'api_key': '7fcb3541-9363-4bfa-90aa-19e9f691bc25', 'endpoint': 'https://ark.cn-beijing.volces.com/api/v3', 'max_tokens': 4000, 'model': 'ep-20250605091804-wmw6w', 'temperature': 0.7}
2025-06-20 18:50:29 - api_server - INFO - 火山引擎客户端初始化成功
2025-06-20 18:50:29 - api_server - INFO - Weaviate配置: http://localhost:8080
2025-06-20 18:50:38 - api_server - INFO - 从配置文件读取火山引擎配置: {'api_key': '7fcb3541-9363-4bfa-90aa-19e9f691bc25', 'endpoint': 'https://ark.cn-beijing.volces.com/api/v3', 'max_tokens': 4000, 'model': 'ep-20250605091804-wmw6w', 'temperature': 0.7}
2025-06-20 18:50:38 - api_server - INFO - 分析服务管理器初始化成功
2025-06-20 18:50:38 - api_server - INFO - 分析服务管理器已集成到API服务器
2025-06-20 18:50:38 - api_server - INFO - 增强分析器初始化成功
2025-06-20 18:50:38 - api_server - INFO - 初始化任务存储数据库...
2025-06-20 18:50:38 - api_server - INFO - 任务存储数据库初始化成功
2025-06-20 18:50:38 - api_server - INFO - 火山引擎客户端初始化成功
2025-06-20 18:50:38 - api_server - INFO - Weaviate配置: http://localhost:8080
2025-06-20 18:50:50 - api_server - INFO - 分析服务管理器初始化成功
2025-06-20 18:50:50 - api_server - INFO - 分析服务管理器已集成到API服务器
2025-06-20 18:50:50 - api_server - INFO - 增强分析器初始化成功
2025-06-20 18:50:50 - api_server - INFO - 开始生成文档: b50ca058-7ae6-4469-9ce9-bd8738875469
2025-06-20 18:50:50 - api_server - INFO - 📄 开始文档生成任务: b50ca058-7ae6-4469-9ce9-bd8738875469
2025-06-20 18:50:50 - api_server - INFO - 任务 b50ca058-7ae6-4469-9ce9-bd8738875469 进度更新: 10% - 准备生成文档
2025-06-20 18:50:50 - api_server - INFO - 任务 b50ca058-7ae6-4469-9ce9-bd8738875469 进度更新: 30% - 获取分析结果数据
2025-06-20 18:50:50 - api_server - INFO - 生成文档数据结构: basic_info=True, document_parsing=True, content_analysis=True, ai_analysis=True
2025-06-20 18:50:50 - api_server - INFO - 任务 b50ca058-7ae6-4469-9ce9-bd8738875469 进度更新: 60% - 转换为Markdown格式
2025-06-20 18:50:50 - api_server - INFO - 开始生成Markdown报告，数据键: ['basic_info', 'document_parsing', 'content_analysis', 'ai_analysis']
2025-06-20 18:50:50 - api_server - INFO - Markdown报告生成完成，长度: 3125 字符
2025-06-20 18:50:50 - api_server - INFO - 任务 b50ca058-7ae6-4469-9ce9-bd8738875469 进度更新: 90% - 保存文档内容
2025-06-20 18:50:50 - api_server - INFO - 任务 b50ca058-7ae6-4469-9ce9-bd8738875469 进度更新: 100% - 文档生成完成
2025-06-20 18:50:50 - api_server - INFO - 文档生成完成: b50ca058-7ae6-4469-9ce9-bd8738875469
2025-06-20 18:50:50 - api_server - INFO - ✅ 文档生成完成: b50ca058-7ae6-4469-9ce9-bd8738875469
2025-06-20 18:51:53 - api_server - INFO - 从配置文件读取火山引擎配置: {'api_key': '7fcb3541-9363-4bfa-90aa-19e9f691bc25', 'endpoint': 'https://ark.cn-beijing.volces.com/api/v3', 'max_tokens': 4000, 'model': 'ep-20250605091804-wmw6w', 'temperature': 0.7}
2025-06-20 18:51:53 - api_server - INFO - 火山引擎客户端初始化成功
2025-06-20 18:51:53 - api_server - INFO - Weaviate配置: http://localhost:8080
2025-06-20 18:52:01 - api_server - INFO - 分析服务管理器初始化成功
2025-06-20 18:52:01 - api_server - INFO - 分析服务管理器已集成到API服务器
2025-06-20 18:52:01 - api_server - INFO - 增强分析器初始化成功
2025-06-20 18:52:01 - api_server - INFO - 初始化任务存储数据库...
2025-06-20 18:52:01 - api_server - INFO - 任务存储数据库初始化成功
2025-06-20 18:52:07 - api_server - INFO - 从配置文件读取火山引擎配置: {'api_key': '7fcb3541-9363-4bfa-90aa-19e9f691bc25', 'endpoint': 'https://ark.cn-beijing.volces.com/api/v3', 'max_tokens': 4000, 'model': 'ep-20250605091804-wmw6w', 'temperature': 0.7}
2025-06-20 18:52:08 - api_server - INFO - 火山引擎客户端初始化成功
2025-06-20 18:52:08 - api_server - INFO - Weaviate配置: http://localhost:8080
2025-06-20 18:52:16 - api_server - INFO - 分析服务管理器初始化成功
2025-06-20 18:52:16 - api_server - INFO - 分析服务管理器已集成到API服务器
2025-06-20 18:52:16 - api_server - INFO - 增强分析器初始化成功
2025-06-20 18:52:16 - api_server - INFO - 初始化任务存储数据库...
2025-06-20 18:52:16 - api_server - INFO - 任务存储数据库初始化成功
2025-06-20 18:52:31 - api_server - INFO - ✅ OPTIONS start_analysis_v2 [200]
2025-06-20 18:52:31 - api_server - INFO - file_info包含content字段，长度: 1132360
2025-06-20 18:52:31 - api_server - INFO - base64解码成功，file_content类型: <class 'bytes'>, 大小: 849268 bytes
2025-06-20 18:52:31 - api_server - INFO - 任务 32d42d3b-c4fc-4b9f-9c16-c763693a96d9 进度更新: 0% - 分析流程启动中
2025-06-20 18:52:31 - api_server - INFO - 开始完整分析流程: 32d42d3b-c4fc-4b9f-9c16-c763693a96d9
2025-06-20 18:52:31 - api_server - INFO - V2 完整分析启动成功: 需求文档 - 一局对接链数优化V0.1.docx, 任务ID: 32d42d3b-c4fc-4b9f-9c16-c763693a96d9, 大小: 849268 bytes
2025-06-20 18:52:31 - api_server - INFO - 🚀 V2 完整分析启动: 需求文档 - 一局对接链数优化V0.1.docx, 任务ID: 32d42d3b-c4fc-4b9f-9c16-c763693a96d9
2025-06-20 18:52:31 - api_server - INFO - ✅ POST start_analysis_v2 [200] (0.05s)
2025-06-20 18:52:31 - api_server - INFO - 任务 32d42d3b-c4fc-4b9f-9c16-c763693a96d9 进度更新: 10% - 开始文档解析
2025-06-20 18:52:31 - api_server - INFO - 任务 32d42d3b-c4fc-4b9f-9c16-c763693a96d9 进度更新: 10% - 开始解析文件
2025-06-20 18:52:31 - api_server - INFO - 从文件路径读取: D:\ai_project\document_analyzer\uploads\temp\32d42d3b-c4fc-4b9f-9c16-c763693a96d9_需求文档 - 一局对接链数优化V0.1.docx
2025-06-20 18:52:31 - api_server - INFO - 检测到Word文档，使用Markdown转换: 32d42d3b-c4fc-4b9f-9c16-c763693a96d9_需求文档 - 一局对接链数优化V0.1.docx
2025-06-20 18:52:31 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:52:32 - api_server - INFO - Word文档已成功转换为Markdown格式，长度: 2547 字符
2025-06-20 18:52:32 - api_server - INFO - 提取的文本内容已准备完毕
2025-06-20 18:52:32 - api_server - INFO - 转换后内容预览: 一局对接链数优化

需求文档

| 版本 | V0.1 |
| --- | --- |
| 撰写人 | 李威明 |
| 类型 | 系统对接 |
| 标签 | 链数、中建一局 |

中企云链（北京）金融信息服务有限公司

文档控制

需求方

| 日期 | 需求人 | 需求部门 | 说明 |
| --- | --- | --- | --- |
| 2025/4/30 | 徐艺 | 金融服务部 |  |

版本记录

| 日期 | 撰写人 | 版本 | 变更说明 |
| --- | --- | --- | --- |
| 2025/4/30 | 李威明 | V0.1 | 创建文档 |

目录

第1章 项目介绍	4

1.1 需求背景	4

1.2 建设目标及路线	4

第2章 整体说明	4

2.1 需求模型	4

2.2 功能结构图	4

2.3 信息结构图	4

2.4 项目范围	4

2.4.1 新增功能	4

2.4.2 调整功能	4

第3章 功能需求说明	4

3.1 调整说明	4

# 项目介绍

## 需求背景

- 一局对接链数的项目上线后，核心企业反馈，希望就已推送至平台的数据，在核心企业内部系统内修改部分信息（如额度信息）后，使用原业务编号再次推送至平台。就目前的接口校验逻辑，相同业务编号的业务数据不可重复推送。因而，需要结合核心企业需求，对接口的校验逻辑进行调整。

## 建设目标及路线

- 调整接口校验逻辑，兼容核心企业重推数据的场景。

# 整体说明

## 需求模型

## 功能结构图

## 信息结构图

## 项目范围

### 新增功能

### 调整功能

# 功能需求说明

## 接口校验规则调整

### 调整说明

本期对【确权业务申请】接口中关于bizSerialNo的校验规则进行调整，调整后的校验规则为：

| 序号 | 接口名称 | 隶属服务 | 校验点 | 逻辑 | 错误提示 |
| --- | --- | --- | --- | --- | --- |
| 1 | 确权业务申请 | zqyl-data-open | 入参校验 | bizSerialNo不可与已成功推送的非“已作废”、“已删除”状态的链数业务数据对应的bizSerialNo成功记录重复 | bizSerialNo已存在，请先登录平台进行作废/删除。 |

## 链数额度功能调整

### 调整说明

本期，对原“链数额度”功能做如下调整：

- 功能名称由“链数额度”变更为“额度管理”；

- 页面右上方新增“组织单元额度”按钮，当且仅当当前登录企业为多组织企业时展示该按钮。用户点击“组织单元额度”按钮，则跳转至“组织单元额度”列表页。

- 列表新增字段“额度类型”，置于“额度名称”之后，若为链数额度则取值为“链数额度”。

![图片2](http://localhost:8082/uploads/temp/32d42d3b-c4fc-4b9f-9c16-c763693a96d9_img_20250620_185231_1.png)

## 新增组织单元额度功能

### 调整说明

本期在核心企业侧链数额度功能下，新增“组织单元额度”列表页。支持用户查询当前登录企业下的具体组织单元的链数额度、云信额度明细。

具体如下：

- 交互说明：

![图片1](http://localhost:8082/uploads/temp/32d42d3b-c4fc-4b9f-9c16-c763693a96d9_img_20250620_185231_0.png)

（页面入口：用户点击“额度管理”列表页右上角的“组织单元额度”按钮，跳转至该页面。）

- 返回：用户点击返回，返回至“额度管理”列表页。

- 导出：点击导出，将列表中用户筛选后的数据以xls文件格式导出至本地。

- 列表筛选：用户确定筛选条件后，点击查询按钮，按照用户确定的筛选条件对列表进行筛选；点击重置，列表恢复至未筛选状态。

- 功能说明：

- 列表需展示分配至当前登录企业下所有组织单元的链数额度和云信额度明细。页面载入时，默认展示分配至各组织单元的链数额度明细；若用户将额度类型切换为“云信额度”，则需要展示分配至各组织单元的云信额度明细；若用户将额度类型切换为“全部”，则需要展示分配至各组织单元的链数和云信额度明细。

- 字段说明：

- 筛选字段：

| 序号 | 字段名 | 类型格式 | 长度 | 默认值 | 必填 | 规则 |
| --- | --- | --- | --- | --- | --- | --- |
| 1 | 组织单元名称 | 文本输入框 | - | - | - | 模糊搜索 |
| 2 | 额度名称 | 文本输入框 | - | - | - | 模糊搜索 |
| 3 | 额度类型 | 下拉列表 | - | 链数额度 | - | 下拉选项：链数额度、云信额度、全部 |

- 汇总字段：

| 序号 | 字段名 | 类型格式 | 规则 |
| --- | --- | --- | --- |
| 1 | 总额度（元） | 数值 | 满足筛选条件的列表数据的“已分配额度（元）”之和 |
| 2 | 已用额度（元） | 数值 | 满足筛选条件的列表数据的“已用额度（元）”之和 |
| 3 | 可用额度（元） | 数值 | 满足筛选条件的列表数据的“可用额度（元）”之和 |

- 备注：筛选条件更新后，汇总值需要同步更新计算。

- 列表字段：

| 序号 | 字段名 | 类型格式 | 规则 |
| --- | --- | --- | --- |
| 1 | 组织单元名称 | 字符串 |  |
| 2 | 额度名称 | 字符串 |  |
| 3 | 额度类型 | 字符串 |  |
| 4 | 已分配额度（元） | 数值 |  |
| 5 | 已用额度（元） | 数值 |  |
| 6 | 可用额度（元） | 数值 |  |

- 备注：列表默认按照组织单元名称为主要关键字、额度类型为次要关键字降序排列。
2025-06-20 18:52:32 - api_server - INFO - 提取的文本内容已准备完毕
2025-06-20 18:52:32 - api_server - INFO - 转换后内容预览: 一局对接链数优化

需求文档

| 版本 | V0.1 |
| --- | --- |
| 撰写人 | 李威明 |
| 类型 | 系统对接 |
| 标签 | 链数、中建一局 |

中企云链（北京）金融信息服务有限公司

文档控制

需求方

| 日期 | 需求人 | 需求部门 | 说明 |
| --- | --- | --- | --- |
| 2025/4/30 | 徐艺 | 金融服务部 |  |

版本记录

| 日期 | 撰写人 | 版本 | 变更说明 |
| --- | --- | --- | --- |
| 2025/4/30 | 李威明 | V0.1 | 创建文档 |

目录

第1章 项目介绍	4

1.1 需求背景	4

1.2 建设目标及路线	4

第2章 整体说明	4

2.1 需求模型	4

2.2 功能结构图	4

2.3 信息结构图	4

2.4 项目范围	4

2.4.1 新增功能	4

2.4.2 调整功能	4

第3章 功能需求说明	4

3.1 调整说明	4

# 项目介绍

## 需求背景

- 一局对接链数的项目上线后，核心企业反馈，希望就已推送至平台的数据，在核心企业内部系统内修改部分信息（如额度信息）后，使用原业务编号再次推送至平台。就目前的接口校验逻辑，相同业务编号的业务数据不可重复推送。因而，需要结合核心企业需求，对接口的校验逻辑进行调整。

## 建设目标及路线

- 调整接口校验逻辑，兼容核心企业重推数据的场景。

# 整体说明

## 需求模型

## 功能结构图

## 信息结构图

## 项目范围

### 新增功能

### 调整功能

# 功能需求说明

## 接口校验规则调整

### 调整说明

本期对【确权业务申请】接口中关于bizSerialNo的校验规则进行调整，调整后的校验规则为：

| 序号 | 接口名称 | 隶属服务 | 校验点 | 逻辑 | 错误提示 |
| --- | --- | --- | --- | --- | --- |
| 1 | 确权业务申请 | zqyl-data-open | 入参校验 | bizSerialNo不可与已成功推送的非“已作废”、“已删除”状态的链数业务数据对应的bizSerialNo成功记录重复 | bizSerialNo已存在，请先登录平台进行作废/删除。 |

## 链数额度功能调整

### 调整说明

本期，对原“链数额度”功能做如下调整：

- 功能名称由“链数额度”变更为“额度管理”；

- 页面右上方新增“组织单元额度”按钮，当且仅当当前登录企业为多组织企业时展示该按钮。用户点击“组织单元额度”按钮，则跳转至“组织单元额度”列表页。

- 列表新增字段“额度类型”，置于“额度名称”之后，若为链数额度则取值为“链数额度”。

![图片2](http://localhost:8082/uploads/temp/32d42d3b-c4fc-4b9f-9c16-c763693a96d9_img_20250620_185231_1.png)

## 新增组织单元额度功能

### 调整说明

本期在核心企业侧链数额度功能下，新增“组织单元额度”列表页。支持用户查询当前登录企业下的具体组织单元的链数额度、云信额度明细。

具体如下：

- 交互说明：

![图片1](http://localhost:8082/uploads/temp/32d42d3b-c4fc-4b9f-9c16-c763693a96d9_img_20250620_185231_0.png)

（页面入口：用户点击“额度管理”列表页右上角的“组织单元额度”按钮，跳转至该页面。）

- 返回：用户点击返回，返回至“额度管理”列表页。

- 导出：点击导出，将列表中用户筛选后的数据以xls文件格式导出至本地。

- 列表筛选：用户确定筛选条件后，点击查询按钮，按照用户确定的筛选条件对列表进行筛选；点击重置，列表恢复至未筛选状态。

- 功能说明：

- 列表需展示分配至当前登录企业下所有组织单元的链数额度和云信额度明细。页面载入时，默认展示分配至各组织单元的链数额度明细；若用户将额度类型切换为“云信额度”，则需要展示分配至各组织单元的云信额度明细；若用户将额度类型切换为“全部”，则需要展示分配至各组织单元的链数和云信额度明细。

- 字段说明：

- 筛选字段：

| 序号 | 字段名 | 类型格式 | 长度 | 默认值 | 必填 | 规则 |
| --- | --- | --- | --- | --- | --- | --- |
| 1 | 组织单元名称 | 文本输入框 | - | - | - | 模糊搜索 |
| 2 | 额度名称 | 文本输入框 | - | - | - | 模糊搜索 |
| 3 | 额度类型 | 下拉列表 | - | 链数额度 | - | 下拉选项：链数额度、云信额度、全部 |

- 汇总字段：

| 序号 | 字段名 | 类型格式 | 规则 |
| --- | --- | --- | --- |
| 1 | 总额度（元） | 数值 | 满足筛选条件的列表数据的“已分配额度（元）”之和 |
| 2 | 已用额度（元） | 数值 | 满足筛选条件的列表数据的“已用额度（元）”之和 |
| 3 | 可用额度（元） | 数值 | 满足筛选条件的列表数据的“可用额度（元）”之和 |

- 备注：筛选条件更新后，汇总值需要同步更新计算。

- 列表字段：

| 序号 | 字段名 | 类型格式 | 规则 |
| --- | --- | --- | --- |
| 1 | 组织单元名称 | 字符串 |  |
| 2 | 额度名称 | 字符串 |  |
| 3 | 额度类型 | 字符串 |  |
| 4 | 已分配额度（元） | 数值 |  |
| 5 | 已用额度（元） | 数值 |  |
| 6 | 可用额度（元） | 数值 |  |

- 备注：列表默认按照组织单元名称为主要关键字、额度类型为次要关键字降序排列。
2025-06-20 18:52:32 - api_server - INFO - 任务 32d42d3b-c4fc-4b9f-9c16-c763693a96d9 进度更新: 40% - 使用分析服务解析文档
2025-06-20 18:52:34 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:52:36 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:52:38 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:52:40 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:52:42 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:52:44 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 18:52:47 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:52:49 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:52:51 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:52:52 - api_server - INFO - 任务 32d42d3b-c4fc-4b9f-9c16-c763693a96d9 进度更新: 100% - 文档解析完成
2025-06-20 18:52:52 - api_server - INFO - ✅ 文件解析完成: 32d42d3b-c4fc-4b9f-9c16-c763693a96d9
2025-06-20 18:52:52 - api_server - INFO - 任务 32d42d3b-c4fc-4b9f-9c16-c763693a96d9 进度更新: 40% - 开始内容分析
2025-06-20 18:52:52 - api_server - INFO - 🔍 开始内容分析任务: 32d42d3b-c4fc-4b9f-9c16-c763693a96d9
2025-06-20 18:52:52 - api_server - INFO - 📊 任务当前状态: content_analyzing
2025-06-20 18:52:52 - api_server - INFO - 📊 任务当前进度: 40%
2025-06-20 18:52:52 - api_server - INFO - 📊 解析结果存在: True
2025-06-20 18:52:52 - api_server - INFO - 📊 分析服务管理器可用: True
2025-06-20 18:52:52 - api_server - INFO - 任务 32d42d3b-c4fc-4b9f-9c16-c763693a96d9 进度更新: 10% - 开始内容分析
2025-06-20 18:52:52 - api_server - INFO - ✅ 任务状态已更新为: content_analyzing
2025-06-20 18:52:52 - api_server - INFO - 从文件路径读取: D:\ai_project\document_analyzer\uploads\temp\32d42d3b-c4fc-4b9f-9c16-c763693a96d9_需求文档 - 一局对接链数优化V0.1.docx
2025-06-20 18:52:52 - api_server - INFO - 检测到Word文档，使用Markdown转换: 32d42d3b-c4fc-4b9f-9c16-c763693a96d9_需求文档 - 一局对接链数优化V0.1.docx
2025-06-20 18:52:52 - api_server - INFO - Word文档已成功转换为Markdown格式，长度: 2547 字符
2025-06-20 18:52:52 - api_server - INFO - 任务 32d42d3b-c4fc-4b9f-9c16-c763693a96d9 进度更新: 30% - 获取到上传文件
2025-06-20 18:52:52 - api_server - INFO - 📄 提取到文档内容，长度: 2547 字符
2025-06-20 18:52:52 - api_server - INFO - 任务 32d42d3b-c4fc-4b9f-9c16-c763693a96d9 进度更新: 35% - 内容分析管理器开始分析
2025-06-20 18:52:53 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:52:55 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:52:58 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:53:00 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:53:02 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:53:04 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:53:06 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 18:53:09 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:53:11 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:53:13 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:53:15 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 18:53:17 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:53:19 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:53:22 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:53:24 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:53:26 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 18:53:28 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:53:30 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:53:32 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:53:35 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:53:37 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:53:39 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:53:41 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:53:43 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:53:45 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:53:48 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:53:50 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:53:52 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:53:54 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:53:56 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:53:58 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:54:01 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:54:03 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:54:05 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:54:07 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:54:09 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:54:11 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:54:14 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:54:16 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:54:18 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:54:20 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:54:22 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:54:24 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:54:27 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:54:29 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:54:31 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:54:33 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:54:35 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:54:37 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:54:40 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:54:42 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:54:44 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:54:46 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:54:49 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 18:54:51 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:54:53 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:54:55 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:54:57 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:54:59 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:55:02 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:55:04 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:55:06 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:55:08 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:55:10 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:55:12 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:55:15 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:55:17 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:55:19 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:55:21 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:55:23 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:55:25 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:55:28 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:55:30 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:55:32 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:55:34 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 18:55:36 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:55:38 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:55:41 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:55:43 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:55:45 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:55:47 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 18:55:49 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:55:51 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 18:55:54 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:55:56 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:55:58 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:56:00 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:56:02 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:56:05 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:56:07 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:56:10 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:56:13 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:56:16 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:56:38 - api_server - INFO - 任务 32d42d3b-c4fc-4b9f-9c16-c763693a96d9 进度更新: 100% - 内容分析完成
2025-06-20 18:56:38 - api_server - INFO - ✅ 内容分析完成: 32d42d3b-c4fc-4b9f-9c16-c763693a96d9
2025-06-20 18:56:38 - api_server - INFO - 任务 32d42d3b-c4fc-4b9f-9c16-c763693a96d9 进度更新: 70% - 开始AI智能分析
2025-06-20 18:56:38 - api_server - INFO - 🤖 开始AI分析任务: 32d42d3b-c4fc-4b9f-9c16-c763693a96d9
2025-06-20 18:56:38 - api_server - INFO - 任务 32d42d3b-c4fc-4b9f-9c16-c763693a96d9 进度更新: 10% - 开始AI智能分析
2025-06-20 18:56:38 - api_server - INFO - 任务 32d42d3b-c4fc-4b9f-9c16-c763693a96d9 进度更新: 30% - 使用分析服务进行AI分析
2025-06-20 18:56:38 - api_server - INFO - 任务 32d42d3b-c4fc-4b9f-9c16-c763693a96d9 进度更新: 37% - 需求分析与功能拆解
2025-06-20 18:57:48 - api_server - INFO - 从配置文件读取火山引擎配置: {'api_key': '7fcb3541-9363-4bfa-90aa-19e9f691bc25', 'endpoint': 'https://ark.cn-beijing.volces.com/api/v3', 'max_tokens': 4000, 'model': 'ep-20250605091804-wmw6w', 'temperature': 0.7}
2025-06-20 18:57:49 - api_server - INFO - 火山引擎客户端初始化成功
2025-06-20 18:57:49 - api_server - INFO - Weaviate配置: http://localhost:8080
2025-06-20 18:57:58 - api_server - INFO - 分析服务管理器初始化成功
2025-06-20 18:57:58 - api_server - INFO - 分析服务管理器已集成到API服务器
2025-06-20 18:57:58 - api_server - INFO - 增强分析器初始化成功
2025-06-20 18:57:58 - api_server - INFO - 初始化任务存储数据库...
2025-06-20 18:57:58 - api_server - INFO - 任务存储数据库初始化成功
2025-06-20 18:58:06 - api_server - INFO - 从配置文件读取火山引擎配置: {'api_key': '7fcb3541-9363-4bfa-90aa-19e9f691bc25', 'endpoint': 'https://ark.cn-beijing.volces.com/api/v3', 'max_tokens': 4000, 'model': 'ep-20250605091804-wmw6w', 'temperature': 0.7}
2025-06-20 18:58:06 - api_server - INFO - 火山引擎客户端初始化成功
2025-06-20 18:58:06 - api_server - INFO - Weaviate配置: http://localhost:8080
2025-06-20 18:58:15 - api_server - INFO - 分析服务管理器初始化成功
2025-06-20 18:58:15 - api_server - INFO - 分析服务管理器已集成到API服务器
2025-06-20 18:58:15 - api_server - INFO - 增强分析器初始化成功
2025-06-20 18:58:15 - api_server - INFO - 初始化任务存储数据库...
2025-06-20 18:58:15 - api_server - INFO - 任务存储数据库初始化成功
2025-06-20 18:58:15 - api_server - INFO - ✅ OPTIONS start_analysis_v2 [200]
2025-06-20 18:58:15 - api_server - INFO - file_info包含content字段，长度: 1132360
2025-06-20 18:58:15 - api_server - INFO - base64解码成功，file_content类型: <class 'bytes'>, 大小: 849268 bytes
2025-06-20 18:58:15 - api_server - INFO - 任务 7b8be22b-361f-4bbf-baaa-df2160912d9e 进度更新: 0% - 分析流程启动中
2025-06-20 18:58:15 - api_server - INFO - 开始完整分析流程: 7b8be22b-361f-4bbf-baaa-df2160912d9e
2025-06-20 18:58:15 - api_server - INFO - V2 完整分析启动成功: 需求文档 - 一局对接链数优化V0.1.docx, 任务ID: 7b8be22b-361f-4bbf-baaa-df2160912d9e, 大小: 849268 bytes
2025-06-20 18:58:15 - api_server - INFO - 🚀 V2 完整分析启动: 需求文档 - 一局对接链数优化V0.1.docx, 任务ID: 7b8be22b-361f-4bbf-baaa-df2160912d9e
2025-06-20 18:58:15 - api_server - INFO - ✅ POST start_analysis_v2 [200] (0.04s)
2025-06-20 18:58:15 - api_server - INFO - 任务 7b8be22b-361f-4bbf-baaa-df2160912d9e 进度更新: 10% - 开始文档解析
2025-06-20 18:58:15 - api_server - INFO - 任务 7b8be22b-361f-4bbf-baaa-df2160912d9e 进度更新: 10% - 开始解析文件
2025-06-20 18:58:15 - api_server - INFO - 从文件路径读取: D:\ai_project\document_analyzer\uploads\temp\7b8be22b-361f-4bbf-baaa-df2160912d9e_需求文档 - 一局对接链数优化V0.1.docx
2025-06-20 18:58:15 - api_server - INFO - 检测到Word文档，使用Markdown转换: 7b8be22b-361f-4bbf-baaa-df2160912d9e_需求文档 - 一局对接链数优化V0.1.docx
2025-06-20 18:58:15 - api_server - INFO - Word文档已成功转换为Markdown格式，长度: 2547 字符
2025-06-20 18:58:15 - api_server - INFO - 提取的文本内容已准备完毕
2025-06-20 18:58:15 - api_server - INFO - 转换后内容预览: 一局对接链数优化

需求文档

| 版本 | V0.1 |
| --- | --- |
| 撰写人 | 李威明 |
| 类型 | 系统对接 |
| 标签 | 链数、中建一局 |

中企云链（北京）金融信息服务有限公司

文档控制

需求方

| 日期 | 需求人 | 需求部门 | 说明 |
| --- | --- | --- | --- |
| 2025/4/30 | 徐艺 | 金融服务部 |  |

版本记录

| 日期 | 撰写人 | 版本 | 变更说明 |
| --- | --- | --- | --- |
| 2025/4/30 | 李威明 | V0.1 | 创建文档 |

目录

第1章 项目介绍	4

1.1 需求背景	4

1.2 建设目标及路线	4

第2章 整体说明	4

2.1 需求模型	4

2.2 功能结构图	4

2.3 信息结构图	4

2.4 项目范围	4

2.4.1 新增功能	4

2.4.2 调整功能	4

第3章 功能需求说明	4

3.1 调整说明	4

# 项目介绍

## 需求背景

- 一局对接链数的项目上线后，核心企业反馈，希望就已推送至平台的数据，在核心企业内部系统内修改部分信息（如额度信息）后，使用原业务编号再次推送至平台。就目前的接口校验逻辑，相同业务编号的业务数据不可重复推送。因而，需要结合核心企业需求，对接口的校验逻辑进行调整。

## 建设目标及路线

- 调整接口校验逻辑，兼容核心企业重推数据的场景。

# 整体说明

## 需求模型

## 功能结构图

## 信息结构图

## 项目范围

### 新增功能

### 调整功能

# 功能需求说明

## 接口校验规则调整

### 调整说明

本期对【确权业务申请】接口中关于bizSerialNo的校验规则进行调整，调整后的校验规则为：

| 序号 | 接口名称 | 隶属服务 | 校验点 | 逻辑 | 错误提示 |
| --- | --- | --- | --- | --- | --- |
| 1 | 确权业务申请 | zqyl-data-open | 入参校验 | bizSerialNo不可与已成功推送的非“已作废”、“已删除”状态的链数业务数据对应的bizSerialNo成功记录重复 | bizSerialNo已存在，请先登录平台进行作废/删除。 |

## 链数额度功能调整

### 调整说明

本期，对原“链数额度”功能做如下调整：

- 功能名称由“链数额度”变更为“额度管理”；

- 页面右上方新增“组织单元额度”按钮，当且仅当当前登录企业为多组织企业时展示该按钮。用户点击“组织单元额度”按钮，则跳转至“组织单元额度”列表页。

- 列表新增字段“额度类型”，置于“额度名称”之后，若为链数额度则取值为“链数额度”。

![图片2](http://localhost:8082/uploads/temp/7b8be22b-361f-4bbf-baaa-df2160912d9e_img_20250620_185815_1.png)

## 新增组织单元额度功能

### 调整说明

本期在核心企业侧链数额度功能下，新增“组织单元额度”列表页。支持用户查询当前登录企业下的具体组织单元的链数额度、云信额度明细。

具体如下：

- 交互说明：

![图片1](http://localhost:8082/uploads/temp/7b8be22b-361f-4bbf-baaa-df2160912d9e_img_20250620_185815_0.png)

（页面入口：用户点击“额度管理”列表页右上角的“组织单元额度”按钮，跳转至该页面。）

- 返回：用户点击返回，返回至“额度管理”列表页。

- 导出：点击导出，将列表中用户筛选后的数据以xls文件格式导出至本地。

- 列表筛选：用户确定筛选条件后，点击查询按钮，按照用户确定的筛选条件对列表进行筛选；点击重置，列表恢复至未筛选状态。

- 功能说明：

- 列表需展示分配至当前登录企业下所有组织单元的链数额度和云信额度明细。页面载入时，默认展示分配至各组织单元的链数额度明细；若用户将额度类型切换为“云信额度”，则需要展示分配至各组织单元的云信额度明细；若用户将额度类型切换为“全部”，则需要展示分配至各组织单元的链数和云信额度明细。

- 字段说明：

- 筛选字段：

| 序号 | 字段名 | 类型格式 | 长度 | 默认值 | 必填 | 规则 |
| --- | --- | --- | --- | --- | --- | --- |
| 1 | 组织单元名称 | 文本输入框 | - | - | - | 模糊搜索 |
| 2 | 额度名称 | 文本输入框 | - | - | - | 模糊搜索 |
| 3 | 额度类型 | 下拉列表 | - | 链数额度 | - | 下拉选项：链数额度、云信额度、全部 |

- 汇总字段：

| 序号 | 字段名 | 类型格式 | 规则 |
| --- | --- | --- | --- |
| 1 | 总额度（元） | 数值 | 满足筛选条件的列表数据的“已分配额度（元）”之和 |
| 2 | 已用额度（元） | 数值 | 满足筛选条件的列表数据的“已用额度（元）”之和 |
| 3 | 可用额度（元） | 数值 | 满足筛选条件的列表数据的“可用额度（元）”之和 |

- 备注：筛选条件更新后，汇总值需要同步更新计算。

- 列表字段：

| 序号 | 字段名 | 类型格式 | 规则 |
| --- | --- | --- | --- |
| 1 | 组织单元名称 | 字符串 |  |
| 2 | 额度名称 | 字符串 |  |
| 3 | 额度类型 | 字符串 |  |
| 4 | 已分配额度（元） | 数值 |  |
| 5 | 已用额度（元） | 数值 |  |
| 6 | 可用额度（元） | 数值 |  |

- 备注：列表默认按照组织单元名称为主要关键字、额度类型为次要关键字降序排列。
2025-06-20 18:58:15 - api_server - INFO - 提取的文本内容已准备完毕
2025-06-20 18:58:15 - api_server - INFO - 转换后内容预览: 一局对接链数优化

需求文档

| 版本 | V0.1 |
| --- | --- |
| 撰写人 | 李威明 |
| 类型 | 系统对接 |
| 标签 | 链数、中建一局 |

中企云链（北京）金融信息服务有限公司

文档控制

需求方

| 日期 | 需求人 | 需求部门 | 说明 |
| --- | --- | --- | --- |
| 2025/4/30 | 徐艺 | 金融服务部 |  |

版本记录

| 日期 | 撰写人 | 版本 | 变更说明 |
| --- | --- | --- | --- |
| 2025/4/30 | 李威明 | V0.1 | 创建文档 |

目录

第1章 项目介绍	4

1.1 需求背景	4

1.2 建设目标及路线	4

第2章 整体说明	4

2.1 需求模型	4

2.2 功能结构图	4

2.3 信息结构图	4

2.4 项目范围	4

2.4.1 新增功能	4

2.4.2 调整功能	4

第3章 功能需求说明	4

3.1 调整说明	4

# 项目介绍

## 需求背景

- 一局对接链数的项目上线后，核心企业反馈，希望就已推送至平台的数据，在核心企业内部系统内修改部分信息（如额度信息）后，使用原业务编号再次推送至平台。就目前的接口校验逻辑，相同业务编号的业务数据不可重复推送。因而，需要结合核心企业需求，对接口的校验逻辑进行调整。

## 建设目标及路线

- 调整接口校验逻辑，兼容核心企业重推数据的场景。

# 整体说明

## 需求模型

## 功能结构图

## 信息结构图

## 项目范围

### 新增功能

### 调整功能

# 功能需求说明

## 接口校验规则调整

### 调整说明

本期对【确权业务申请】接口中关于bizSerialNo的校验规则进行调整，调整后的校验规则为：

| 序号 | 接口名称 | 隶属服务 | 校验点 | 逻辑 | 错误提示 |
| --- | --- | --- | --- | --- | --- |
| 1 | 确权业务申请 | zqyl-data-open | 入参校验 | bizSerialNo不可与已成功推送的非“已作废”、“已删除”状态的链数业务数据对应的bizSerialNo成功记录重复 | bizSerialNo已存在，请先登录平台进行作废/删除。 |

## 链数额度功能调整

### 调整说明

本期，对原“链数额度”功能做如下调整：

- 功能名称由“链数额度”变更为“额度管理”；

- 页面右上方新增“组织单元额度”按钮，当且仅当当前登录企业为多组织企业时展示该按钮。用户点击“组织单元额度”按钮，则跳转至“组织单元额度”列表页。

- 列表新增字段“额度类型”，置于“额度名称”之后，若为链数额度则取值为“链数额度”。

![图片2](http://localhost:8082/uploads/temp/7b8be22b-361f-4bbf-baaa-df2160912d9e_img_20250620_185815_1.png)

## 新增组织单元额度功能

### 调整说明

本期在核心企业侧链数额度功能下，新增“组织单元额度”列表页。支持用户查询当前登录企业下的具体组织单元的链数额度、云信额度明细。

具体如下：

- 交互说明：

![图片1](http://localhost:8082/uploads/temp/7b8be22b-361f-4bbf-baaa-df2160912d9e_img_20250620_185815_0.png)

（页面入口：用户点击“额度管理”列表页右上角的“组织单元额度”按钮，跳转至该页面。）

- 返回：用户点击返回，返回至“额度管理”列表页。

- 导出：点击导出，将列表中用户筛选后的数据以xls文件格式导出至本地。

- 列表筛选：用户确定筛选条件后，点击查询按钮，按照用户确定的筛选条件对列表进行筛选；点击重置，列表恢复至未筛选状态。

- 功能说明：

- 列表需展示分配至当前登录企业下所有组织单元的链数额度和云信额度明细。页面载入时，默认展示分配至各组织单元的链数额度明细；若用户将额度类型切换为“云信额度”，则需要展示分配至各组织单元的云信额度明细；若用户将额度类型切换为“全部”，则需要展示分配至各组织单元的链数和云信额度明细。

- 字段说明：

- 筛选字段：

| 序号 | 字段名 | 类型格式 | 长度 | 默认值 | 必填 | 规则 |
| --- | --- | --- | --- | --- | --- | --- |
| 1 | 组织单元名称 | 文本输入框 | - | - | - | 模糊搜索 |
| 2 | 额度名称 | 文本输入框 | - | - | - | 模糊搜索 |
| 3 | 额度类型 | 下拉列表 | - | 链数额度 | - | 下拉选项：链数额度、云信额度、全部 |

- 汇总字段：

| 序号 | 字段名 | 类型格式 | 规则 |
| --- | --- | --- | --- |
| 1 | 总额度（元） | 数值 | 满足筛选条件的列表数据的“已分配额度（元）”之和 |
| 2 | 已用额度（元） | 数值 | 满足筛选条件的列表数据的“已用额度（元）”之和 |
| 3 | 可用额度（元） | 数值 | 满足筛选条件的列表数据的“可用额度（元）”之和 |

- 备注：筛选条件更新后，汇总值需要同步更新计算。

- 列表字段：

| 序号 | 字段名 | 类型格式 | 规则 |
| --- | --- | --- | --- |
| 1 | 组织单元名称 | 字符串 |  |
| 2 | 额度名称 | 字符串 |  |
| 3 | 额度类型 | 字符串 |  |
| 4 | 已分配额度（元） | 数值 |  |
| 5 | 已用额度（元） | 数值 |  |
| 6 | 可用额度（元） | 数值 |  |

- 备注：列表默认按照组织单元名称为主要关键字、额度类型为次要关键字降序排列。
2025-06-20 18:58:15 - api_server - INFO - 任务 7b8be22b-361f-4bbf-baaa-df2160912d9e 进度更新: 40% - 使用分析服务解析文档
2025-06-20 18:58:15 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:58:17 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:58:20 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:58:22 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:58:24 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:58:26 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:58:29 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:58:31 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:58:33 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:58:35 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:58:37 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:58:39 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:58:41 - api_server - INFO - 任务 7b8be22b-361f-4bbf-baaa-df2160912d9e 进度更新: 100% - 文档解析完成
2025-06-20 18:58:41 - api_server - INFO - ✅ 文件解析完成: 7b8be22b-361f-4bbf-baaa-df2160912d9e
2025-06-20 18:58:41 - api_server - INFO - 任务 7b8be22b-361f-4bbf-baaa-df2160912d9e 进度更新: 40% - 开始内容分析
2025-06-20 18:58:41 - api_server - INFO - 🔍 开始内容分析任务: 7b8be22b-361f-4bbf-baaa-df2160912d9e
2025-06-20 18:58:41 - api_server - INFO - 📊 任务当前状态: content_analyzing
2025-06-20 18:58:41 - api_server - INFO - 📊 任务当前进度: 40%
2025-06-20 18:58:41 - api_server - INFO - 📊 解析结果存在: True
2025-06-20 18:58:41 - api_server - INFO - 📊 分析服务管理器可用: True
2025-06-20 18:58:41 - api_server - INFO - 任务 7b8be22b-361f-4bbf-baaa-df2160912d9e 进度更新: 10% - 开始内容分析
2025-06-20 18:58:41 - api_server - INFO - ✅ 任务状态已更新为: content_analyzing
2025-06-20 18:58:41 - api_server - INFO - 从文件路径读取: D:\ai_project\document_analyzer\uploads\temp\7b8be22b-361f-4bbf-baaa-df2160912d9e_需求文档 - 一局对接链数优化V0.1.docx
2025-06-20 18:58:41 - api_server - INFO - 检测到Word文档，使用Markdown转换: 7b8be22b-361f-4bbf-baaa-df2160912d9e_需求文档 - 一局对接链数优化V0.1.docx
2025-06-20 18:58:41 - api_server - INFO - Word文档已成功转换为Markdown格式，长度: 2547 字符
2025-06-20 18:58:41 - api_server - INFO - 任务 7b8be22b-361f-4bbf-baaa-df2160912d9e 进度更新: 30% - 获取到上传文件
2025-06-20 18:58:41 - api_server - INFO - 📄 提取到文档内容，长度: 2547 字符
2025-06-20 18:58:41 - api_server - INFO - 任务 7b8be22b-361f-4bbf-baaa-df2160912d9e 进度更新: 35% - 内容分析管理器开始分析
2025-06-20 18:58:42 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:58:44 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:58:46 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:58:48 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:58:50 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:58:52 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:58:55 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:58:57 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:58:59 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:59:01 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:59:03 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:59:05 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:59:08 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:59:11 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:59:14 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:59:17 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 18:59:20 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:59:23 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:59:26 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:59:29 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:59:32 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:59:35 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:59:38 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:59:41 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:59:44 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:59:47 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:59:50 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:59:53 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 18:59:56 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 18:59:59 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:00:02 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:00:05 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:00:07 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:00:09 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:00:11 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:00:13 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:00:16 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:00:18 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 19:00:20 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:00:22 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:00:24 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:00:26 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:00:29 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:00:31 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:00:33 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:00:35 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:00:37 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:00:39 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:00:42 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.01s)
2025-06-20 19:00:44 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:00:46 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 19:00:48 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:00:50 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 19:00:53 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:00:56 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:00:59 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:01:02 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:01:05 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:01:08 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:01:10 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:01:13 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:01:16 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:01:19 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:01:22 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:01:25 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:01:28 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 19:01:31 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:01:33 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:01:36 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:01:39 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:01:42 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:01:45 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:01:48 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:01:51 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:01:51 - api_server - INFO - 任务 7b8be22b-361f-4bbf-baaa-df2160912d9e 进度更新: 100% - 内容分析完成
2025-06-20 19:01:51 - api_server - INFO - ✅ 内容分析完成: 7b8be22b-361f-4bbf-baaa-df2160912d9e
2025-06-20 19:01:51 - api_server - INFO - 任务 7b8be22b-361f-4bbf-baaa-df2160912d9e 进度更新: 70% - 开始AI智能分析
2025-06-20 19:01:51 - api_server - INFO - 🤖 开始AI分析任务: 7b8be22b-361f-4bbf-baaa-df2160912d9e
2025-06-20 19:01:51 - api_server - INFO - 任务 7b8be22b-361f-4bbf-baaa-df2160912d9e 进度更新: 10% - 开始AI智能分析
2025-06-20 19:01:51 - api_server - INFO - 任务 7b8be22b-361f-4bbf-baaa-df2160912d9e 进度更新: 30% - 使用分析服务进行AI分析
2025-06-20 19:01:51 - api_server - INFO - 任务 7b8be22b-361f-4bbf-baaa-df2160912d9e 进度更新: 37% - 需求分析与功能拆解
2025-06-20 19:01:54 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 19:01:57 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 19:02:00 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:02:03 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 19:02:06 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:02:09 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:02:11 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:02:13 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:02:16 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:02:19 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:02:22 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:02:25 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:02:28 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:02:30 - api_server - INFO - 任务 7b8be22b-361f-4bbf-baaa-df2160912d9e 进度更新: 47% - 设计数据流程与API接口
2025-06-20 19:02:31 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 19:02:34 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:02:37 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:02:40 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:02:43 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:02:46 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:02:49 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:02:52 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:02:55 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:02:58 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:03:01 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:03:04 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:03:07 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:03:10 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:03:13 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:03:16 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:03:19 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:03:22 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:03:25 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:03:28 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:03:31 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 19:03:34 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 19:03:37 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:03:40 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:03:43 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 19:03:46 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:03:48 - api_server - INFO - 任务 7b8be22b-361f-4bbf-baaa-df2160912d9e 进度更新: 58% - 前后端架构设计
2025-06-20 19:03:49 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 19:03:52 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:03:54 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:03:57 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:04:00 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:04:03 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 19:04:06 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:04:09 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:04:12 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:04:15 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:04:18 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:04:21 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:04:24 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:04:27 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:04:30 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 19:04:33 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:04:36 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:04:37 - api_server - INFO - 任务 7b8be22b-361f-4bbf-baaa-df2160912d9e 进度更新: 68% - 安全权限方案设计
2025-06-20 19:04:39 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:04:42 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:04:45 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:04:48 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:04:51 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:04:53 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:04:55 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:04:58 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:05:01 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:05:04 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:05:07 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:05:10 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 19:05:13 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:05:15 - api_server - INFO - 任务 7b8be22b-361f-4bbf-baaa-df2160912d9e 进度更新: 79% - MQ与定时任务设计
2025-06-20 19:05:16 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:05:19 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:05:22 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:05:25 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:05:28 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 19:05:31 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:05:34 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:05:37 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:05:40 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:05:43 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:05:46 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:05:49 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:05:51 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:05:54 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 19:05:57 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:06:00 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:06:03 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:06:06 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:06:09 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:06:12 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:06:15 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:06:18 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:06:21 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:06:21 - api_server - INFO - 任务 7b8be22b-361f-4bbf-baaa-df2160912d9e 进度更新: 89% - 数据库设计
2025-06-20 19:06:24 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:06:27 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:06:30 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:06:33 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:06:36 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 19:06:39 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:06:42 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:06:45 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:06:48 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:06:50 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:06:52 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:06:54 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:06:57 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:06:59 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:07:01 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:07:03 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:07:06 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:07:09 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:07:12 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:07:15 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:07:18 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:07:21 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:07:24 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:07:25 - api_server - INFO - 任务 7b8be22b-361f-4bbf-baaa-df2160912d9e 进度更新: 96% - LangChain集成方案
2025-06-20 19:07:27 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:07:30 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:07:33 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:07:36 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:07:39 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 19:07:42 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:07:45 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 19:07:48 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:07:51 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200]
2025-06-20 19:07:54 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:07:57 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:07:59 - api_server - INFO - 任务 7b8be22b-361f-4bbf-baaa-df2160912d9e 进度更新: 100% - AI架构设计完成
2025-06-20 19:07:59 - api_server - INFO - 任务 7b8be22b-361f-4bbf-baaa-df2160912d9e 进度更新: 100% - AI分析完成
2025-06-20 19:07:59 - api_server - INFO - ✅ AI分析完成: 7b8be22b-361f-4bbf-baaa-df2160912d9e
2025-06-20 19:07:59 - api_server - INFO - 任务 7b8be22b-361f-4bbf-baaa-df2160912d9e 进度更新: 90% - 开始生成文档
2025-06-20 19:07:59 - api_server - INFO - 开始生成文档: 7b8be22b-361f-4bbf-baaa-df2160912d9e
2025-06-20 19:07:59 - api_server - INFO - 📄 开始文档生成任务: 7b8be22b-361f-4bbf-baaa-df2160912d9e
2025-06-20 19:07:59 - api_server - INFO - 任务 7b8be22b-361f-4bbf-baaa-df2160912d9e 进度更新: 10% - 准备生成文档
2025-06-20 19:07:59 - api_server - INFO - 任务 7b8be22b-361f-4bbf-baaa-df2160912d9e 进度更新: 30% - 获取分析结果数据
2025-06-20 19:07:59 - api_server - INFO - 生成文档数据结构: basic_info=True, document_parsing=True, content_analysis=True, ai_analysis=True
2025-06-20 19:07:59 - api_server - INFO - 任务 7b8be22b-361f-4bbf-baaa-df2160912d9e 进度更新: 60% - 转换为Markdown格式
2025-06-20 19:07:59 - api_server - INFO - 开始生成Markdown报告，数据键: ['basic_info', 'document_parsing', 'content_analysis', 'ai_analysis']
2025-06-20 19:07:59 - api_server - INFO - Markdown报告生成完成，长度: 3416 字符
2025-06-20 19:07:59 - api_server - INFO - 任务 7b8be22b-361f-4bbf-baaa-df2160912d9e 进度更新: 90% - 保存文档内容
2025-06-20 19:07:59 - api_server - INFO - 任务 7b8be22b-361f-4bbf-baaa-df2160912d9e 进度更新: 100% - 文档生成完成
2025-06-20 19:07:59 - api_server - INFO - 文档生成完成: 7b8be22b-361f-4bbf-baaa-df2160912d9e
2025-06-20 19:07:59 - api_server - INFO - ✅ 文档生成完成: 7b8be22b-361f-4bbf-baaa-df2160912d9e
2025-06-20 19:07:59 - api_server - INFO - 任务 7b8be22b-361f-4bbf-baaa-df2160912d9e 进度更新: 100% - 完整分析流程完成
2025-06-20 19:07:59 - api_server - INFO - 完整分析流程成功完成: 7b8be22b-361f-4bbf-baaa-df2160912d9e
2025-06-20 19:07:59 - api_server - INFO - 🎉 完整分析流程完成: 7b8be22b-361f-4bbf-baaa-df2160912d9e
2025-06-20 19:08:00 - api_server - INFO - ✅ GET get_analysis_progress_v2 [200] (0.00s)
2025-06-20 19:08:00 - api_server - INFO - ✅ GET get_analysis_result [200] (0.01s)
2025-06-20 19:08:01 - api_server - INFO - ✅ GET uploaded_file [200] (0.06s)
