# analyDesign 后端启动说明

## 🏗️ 项目架构

当前项目采用 **前后端分离架构**：

```
┌─────────────────┐    WebSocket/HTTP    ┌─────────────────┐
│   Vue 3 前端    │ ←─────────────────→ │  Python 后端    │
│                 │                      │                 │
│ • Element Plus  │                      │ • Flask API     │
│ • WebSocket     │                      │ • SocketIO      │
│ • 实时聊天界面   │                      │ • AI 分析引擎   │
└─────────────────┘                      └─────────────────┘
     端口: 3000                              端口: 8081
```

## 🚀 启动方式

### 方式一：使用 bat 脚本（推荐）

#### 1. 快速启动（最常用）
```bash
双击 start_backend_quick.bat
```
- 直接启动集成服务器（HTTP API + WebSocket）
- 端口：8081

#### 2. 选择启动方式
```bash
双击 start_backend.bat
```
- 提供多种启动选项菜单
- 可选择不同的服务模式

#### 3. 开发调试模式
```bash
双击 start_backend_dev.bat
```
- 包含详细的环境检查和调试信息
- 自动重载代码变更

### 方式二：手动启动

#### 1. 激活虚拟环境
```bash
call analyDesign_env\Scripts\activate.bat
```

#### 2. 启动后端服务
```bash
# 集成服务器（推荐）
python start_integrated_server.py

# 或者纯API服务器
python start_api_server.py
```

## 📡 服务端点

### 集成服务器 (端口 8081)
- **HTTP API**: `http://localhost:8081`
- **WebSocket**: `ws://localhost:8081/socket.io/`
- **聊天接口**: `http://localhost:8081/api/chat`
- **健康检查**: `http://localhost:8081/api/health`

### API服务器 (端口 8080)
- **HTTP API**: `http://localhost:8080`
- **API文档**: `http://localhost:8080/docs`

## 🎯 推荐启动流程

1. **后端启动**：
   ```bash
   双击 start_backend_quick.bat
   ```

2. **前端启动**：
   ```bash
   cd frontend
   npm run dev
   ```

3. **访问应用**：
   - 前端界面：`http://localhost:3000`
   - 后端API：`http://localhost:8081`

## ⚠️ 注意事项

1. **虚拟环境**：确保已创建 `analyDesign_env` 虚拟环境
2. **依赖安装**：确保已安装 `requirements.txt` 中的依赖
3. **配置文件**：检查 `src/simple_config.py` 中的配置
4. **端口冲突**：确保端口 8081 和 3000 未被占用

## 🔧 故障排除

### 虚拟环境不存在
```bash
# 运行环境设置脚本
powershell -ExecutionPolicy Bypass -File setup_env.ps1
```

### 依赖缺失
```bash
# 激活环境后安装依赖
pip install -r requirements.txt
```

### 端口被占用
```bash
# 查看端口占用
netstat -ano | findstr :8081

# 结束占用进程
taskkill /PID <进程ID> /F
```

## 📝 开发建议

- **日常开发**：使用 `start_backend_quick.bat`
- **调试问题**：使用 `start_backend_dev.bat`
- **生产部署**：使用集成服务器模式
- **API测试**：使用纯API服务器模式

---

> 💡 **提示**：当前架构已移除 Streamlit，专注于前后端分离的现代化架构。 