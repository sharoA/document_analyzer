# ğŸ—‚ï¸ ç¼–ç æ™ºèƒ½ä½“ç²¾ç®€ç‰ˆç›®å½•ç»“æ„

## ğŸ“ é¡¹ç›®æ•´ä½“ç»“æ„

```
document_analyzer/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ corder_integration/           # ç¼–ç æ™ºèƒ½ä½“æ ¸å¿ƒæ¨¡å—
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ langgraph/               # LangGraphå·¥ä½œæµ
â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â”œâ”€â”€ core_state.py        # æ ¸å¿ƒçŠ¶æ€å®šä¹‰
â”‚   â”‚   â”‚   â”œâ”€â”€ core_workflow.py     # å·¥ä½œæµç¼–æ’å™¨
â”‚   â”‚   â”‚   â””â”€â”€ nodes/               # 5ä¸ªæ ¸å¿ƒèŠ‚ç‚¹
â”‚   â”‚   â”‚       â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚       â”œâ”€â”€ task_splitting_node.py      # ä»»åŠ¡æ‹†åˆ†èŠ‚ç‚¹
â”‚   â”‚   â”‚       â”œâ”€â”€ git_code_reading_node.py    # Gitä»£ç è¯»å–èŠ‚ç‚¹
â”‚   â”‚   â”‚       â”œâ”€â”€ code_modification_node.py   # ä»£ç ä¿®æ”¹èŠ‚ç‚¹
â”‚   â”‚   â”‚       â”œâ”€â”€ code_checking_node.py       # ä»£ç æ£€æŸ¥èŠ‚ç‚¹
â”‚   â”‚   â”‚       â””â”€â”€ git_commit_push_node.py     # Gitæäº¤æ¨é€èŠ‚ç‚¹
â”‚   â”‚   â”œâ”€â”€ agents/                  # æ™ºèƒ½ä½“åŸºç±»ï¼ˆå¯é€‰ï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â””â”€â”€ base_agent.py        # åŸºç¡€æ™ºèƒ½ä½“ç±»
â”‚   â”‚   â”œâ”€â”€ prompts/                 # æç¤ºè¯æ¨¡æ¿ï¼ˆå¯é€‰ï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â””â”€â”€ coding_prompts.py    # ç¼–ç ç›¸å…³æç¤ºè¯
â”‚   â”‚   â””â”€â”€ utils/                   # å·¥å…·å‡½æ•°
â”‚   â”‚       â”œâ”€â”€ __init__.py
â”‚   â”‚       â”œâ”€â”€ git_utils.py         # Gitæ“ä½œå·¥å…·
â”‚   â”‚       â””â”€â”€ file_utils.py        # æ–‡ä»¶æ“ä½œå·¥å…·
â”‚   â”œâ”€â”€ api/                         # ç°æœ‰APIæ¥å£
â”‚   â”‚   â”œâ”€â”€ coder_agent_api.py       # ç¼–ç æ™ºèƒ½ä½“API
â”‚   â”‚   â””â”€â”€ ...
â”‚   â””â”€â”€ main.py                      # ä¸»å…¥å£æ–‡ä»¶
â”œâ”€â”€ templates/                       # æ¨¡æ¿æ–‡ä»¶
â”œâ”€â”€ requirements.txt                 # ä¾èµ–åŒ…
â”œâ”€â”€ README.md                       # é¡¹ç›®è¯´æ˜
â””â”€â”€ .env                            # ç¯å¢ƒå˜é‡
```

---

## ğŸ“ æ ¸å¿ƒæ–‡ä»¶è¯´æ˜

### 1. `core_state.py` - çŠ¶æ€å®šä¹‰
```python
"""
å®šä¹‰CoreCodingStateçŠ¶æ€ç»“æ„
åŒ…å«è¾“å…¥ã€GitçŠ¶æ€ã€ä»£ç ä¿®æ”¹ã€æ£€æŸ¥ç»“æœç­‰
"""
```

### 2. `core_workflow.py` - å·¥ä½œæµç¼–æ’
```python
"""
æ ¸å¿ƒå·¥ä½œæµç¼–æ’å™¨
- æ„å»ºLangGraphå·¥ä½œæµ
- ç®¡ç†5ä¸ªèŠ‚ç‚¹çš„æ‰§è¡Œé¡ºåº
- å¤„ç†æ¡ä»¶åˆ†æ”¯å’Œé”™è¯¯é‡è¯•
"""
```

### 3. 5ä¸ªæ ¸å¿ƒèŠ‚ç‚¹
- **`task_splitting_node.py`** - åˆ©ç”¨GPT-4åˆ†æè®¾è®¡æ–¹æ¡ˆï¼Œæ‹†åˆ†å¼€å‘ä»»åŠ¡
- **`git_code_reading_node.py`** - è¯»å–æŒ‡å®šGitåˆ†æ”¯çš„Javaä»£ç 
- **`code_modification_node.py`** - åŸºäºä»»åŠ¡è¦æ±‚ä¿®æ”¹ç°æœ‰ä»£ç 
- **`code_checking_node.py`** - æ£€æŸ¥ä¿®æ”¹åä»£ç çš„æ­£ç¡®æ€§
- **`git_commit_push_node.py`** - æäº¤ä»£ç å¹¶æ¨é€åˆ°Gitåˆ†æ”¯

---

## ğŸ”§ ä¾èµ–åŒ…é…ç½®

### `requirements.txt`
```txt
# LangGraphå·¥ä½œæµ
langgraph>=0.0.40
langchain>=0.1.0
langchain-openai>=0.0.5

# OpenAI API
openai>=1.0.0

# Gitæ“ä½œ
GitPython>=3.1.0

# å¼‚æ­¥æ”¯æŒ
asyncio
aiohttp

# ç°æœ‰ä¾èµ–
fastapi
uvicorn
python-dotenv
```

### `.env` ç¯å¢ƒå˜é‡
```env
# OpenAIé…ç½®
OPENAI_API_KEY=your_openai_api_key_here
OPENAI_MODEL=gpt-4

# Gité…ç½®
GIT_USER_NAME=your_git_username
GIT_USER_EMAIL=your_git_email

# é¡¹ç›®é…ç½®
PROJECT_ROOT=/path/to/your/projects
LOG_LEVEL=INFO
```

---

## ğŸš€ é›†æˆåˆ°ç°æœ‰é¡¹ç›®

### 1. ä¿®æ”¹ `coder_agent_api.py`
```python
# åœ¨ç°æœ‰APIä¸­æ·»åŠ æ–°çš„ç«¯ç‚¹
from src.corder_integration.langgraph.core_workflow import CoreCodingWorkflow

@app.post("/process-design-document")
async def process_design_document(
    design_document: str,
    project_name: str,
    repo_path: str,
    target_branch: str = "main"
):
    """å¤„ç†è®¾è®¡æ–‡æ¡£å¹¶ç”Ÿæˆä»£ç """
    
    workflow = CoreCodingWorkflow()
    
    result = await workflow.execute(
        design_document=design_document,
        project_name=project_name,
        repo_path=repo_path,
        target_branch=target_branch
    )
    
    return result
```

### 2. ä¿®æ”¹ `main.py`
```python
# æ·»åŠ æ–°çš„å¯¼å…¥
from src.corder_integration.langgraph.core_workflow import CoreCodingWorkflow

# å¯ä»¥åœ¨ä¸»å‡½æ•°ä¸­æµ‹è¯•å·¥ä½œæµ
if __name__ == "__main__":
    import asyncio
    
    # æµ‹è¯•å·¥ä½œæµ
    async def test_workflow():
        workflow = CoreCodingWorkflow()
        result = await workflow.execute(
            design_document="æµ‹è¯•è®¾è®¡æ–‡æ¡£",
            project_name="test-project",
            repo_path="/path/to/test/repo",
            target_branch="feature/test"
        )
        print(result)
    
    asyncio.run(test_workflow())
```

---

## ğŸ¯ å®æ–½æ­¥éª¤

### ç¬¬1æ­¥ï¼šåˆ›å»ºåŸºç¡€ç»“æ„
```bash
# åˆ›å»ºç›®å½•ç»“æ„
mkdir -p src/corder_integration/langgraph/nodes
mkdir -p src/corder_integration/agents
mkdir -p src/corder_integration/prompts
mkdir -p src/corder_integration/utils

# åˆ›å»º__init__.pyæ–‡ä»¶
touch src/corder_integration/__init__.py
touch src/corder_integration/langgraph/__init__.py
touch src/corder_integration/langgraph/nodes/__init__.py
touch src/corder_integration/agents/__init__.py
touch src/corder_integration/prompts/__init__.py
touch src/corder_integration/utils/__init__.py
```

### ç¬¬2æ­¥ï¼šå®‰è£…ä¾èµ–
```bash
pip install -r requirements.txt
```

### ç¬¬3æ­¥ï¼šé…ç½®ç¯å¢ƒå˜é‡
```bash
# å¤åˆ¶.env.exampleåˆ°.envå¹¶é…ç½®
cp .env.example .env
# ç¼–è¾‘.envæ–‡ä»¶ï¼Œæ·»åŠ OpenAI API Keyç­‰é…ç½®
```

### ç¬¬4æ­¥ï¼šé€æ­¥å®ç°æ ¸å¿ƒæ–‡ä»¶
1. å®ç° `core_state.py` - çŠ¶æ€å®šä¹‰
2. å®ç° `core_workflow.py` - å·¥ä½œæµç¼–æ’
3. å®ç°5ä¸ªèŠ‚ç‚¹æ–‡ä»¶
4. æµ‹è¯•å·¥ä½œæµ
5. é›†æˆåˆ°ç°æœ‰API

---

## ğŸ” æµ‹è¯•ç­–ç•¥

### å•å…ƒæµ‹è¯•
```python
# tests/test_core_workflow.py
import pytest
from src.corder_integration.langgraph.core_workflow import CoreCodingWorkflow

@pytest.mark.asyncio
async def test_task_splitting():
    workflow = CoreCodingWorkflow()
    # æµ‹è¯•ä»»åŠ¡æ‹†åˆ†èŠ‚ç‚¹
    pass

@pytest.mark.asyncio  
async def test_git_code_reading():
    # æµ‹è¯•Gitä»£ç è¯»å–èŠ‚ç‚¹
    pass

# æ›´å¤šæµ‹è¯•...
```

### é›†æˆæµ‹è¯•
```python
# tests/test_integration.py
@pytest.mark.asyncio
async def test_full_workflow():
    """æµ‹è¯•å®Œæ•´å·¥ä½œæµ"""
    workflow = CoreCodingWorkflow()
    
    result = await workflow.execute(
        design_document="æµ‹è¯•è®¾è®¡æ–‡æ¡£",
        project_name="test-project", 
        repo_path="/path/to/test/repo",
        target_branch="feature/test"
    )
    
    assert result["success"] == True
    assert "commit_hash" in result
```

---

## ğŸ“Š é¡¹ç›®ä¼˜åŠ¿

### ğŸ¯ ç²¾ç®€è®¾è®¡
- **5ä¸ªæ ¸å¿ƒèŠ‚ç‚¹**ï¼šè¦†ç›–å®Œæ•´çš„ç¼–ç æµç¨‹
- **æ¸…æ™°èŒè´£**ï¼šæ¯ä¸ªèŠ‚ç‚¹åŠŸèƒ½æ˜ç¡®
- **æ˜“äºç»´æŠ¤**ï¼šæ¨¡å—åŒ–è®¾è®¡ï¼Œä¾¿äºæ‰©å±•

### ğŸ”§ æŠ€æœ¯ä¼˜åŠ¿
- **LangGraph**ï¼šå¼ºå¤§çš„å·¥ä½œæµç¼–æ’èƒ½åŠ›
- **GPT-4**ï¼šæ™ºèƒ½ä»£ç åˆ†æå’Œç”Ÿæˆ
- **Gité›†æˆ**ï¼šå®Œæ•´çš„ç‰ˆæœ¬æ§åˆ¶æ”¯æŒ
- **å¼‚æ­¥å¤„ç†**ï¼šé«˜æ•ˆçš„å¹¶å‘æ‰§è¡Œ

### ğŸš€ å®æ–½ä¼˜åŠ¿
- **æ¸è¿›å¼å¼€å‘**ï¼šå¯ä»¥é€æ­¥å®ç°å’Œæµ‹è¯•
- **ç°æœ‰é›†æˆ**ï¼šå¯ä»¥è½»æ¾é›†æˆåˆ°ç°æœ‰é¡¹ç›®
- **å¯æ‰©å±•æ€§**ï¼šåç»­å¯ä»¥æ·»åŠ æ›´å¤šèŠ‚ç‚¹å’ŒåŠŸèƒ½

è¿™ä¸ªç²¾ç®€ç‰ˆç›®å½•ç»“æ„ç®€æ´æ˜äº†ï¼Œæ˜“äºç†è§£å’Œå®æ–½ï¼ 