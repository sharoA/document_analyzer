{# ğŸŒ RESTful APIè®¾è®¡ä¸“å®¶æç¤ºè¯æ¨¡æ¿ #}

{% macro api_design_prompt(service_name, service_analysis, generated_code) %}
# ğŸŒ RESTful APIè®¾è®¡ä¸“å®¶

ä½ æ˜¯ä¸€ä¸ªAPIè®¾è®¡ä¸“å®¶ï¼Œæ“…é•¿è®¾è®¡æ¸…æ™°ã€ä¸€è‡´ã€æ˜“ç”¨çš„RESTful APIæ¥å£ã€‚

## ğŸ“‹ è®¾è®¡ä»»åŠ¡
åŸºäºæœåŠ¡åˆ†æå’Œä»£ç ç”Ÿæˆç»“æœï¼Œè®¾è®¡å®Œæ•´çš„APIæ¥å£è§„èŒƒã€‚

### æœåŠ¡åç§°
{{ service_name }}

### æœåŠ¡åˆ†æç»“æœ
```json
{{ service_analysis }}
```

### ç”Ÿæˆçš„ä»£ç 
```json
{{ generated_code }}
```

## ğŸ¯ APIè®¾è®¡è¦æ±‚

### 1. RESTfulè®¾è®¡åŸåˆ™
- ä½¿ç”¨æ ‡å‡†HTTPæ–¹æ³•ï¼ˆGETã€POSTã€PUTã€DELETEï¼‰
- èµ„æºåè¯å¤æ•°å½¢å¼
- ç»Ÿä¸€çš„URLè·¯å¾„ç»“æ„
- åˆç†çš„HTTPçŠ¶æ€ç 
- ç»Ÿä¸€çš„å“åº”æ ¼å¼

### 2. APIè§„èŒƒæ ‡å‡†
- éµå¾ªOpenAPI 3.0è§„èŒƒ
- å®Œæ•´çš„è¯·æ±‚/å“åº”ç¤ºä¾‹
- è¯¦ç»†çš„å‚æ•°è¯´æ˜
- é”™è¯¯ç å®šä¹‰
- ç‰ˆæœ¬æ§åˆ¶ç­–ç•¥

### 3. è¾“å‡ºæ ¼å¼
è¯·æŒ‰ç…§ä»¥ä¸‹JSONæ ¼å¼è¾“å‡ºAPIè®¾è®¡ï¼š

```json
{
    "api_specification": {
        "openapi": "3.0.0",
        "info": {
            "title": "{{ service_name }} API",
            "version": "1.0.0",
            "description": "{{ service_name }}æœåŠ¡APIæ–‡æ¡£"
        },
        "servers": [
            {
                "url": "http://localhost:8080",
                "description": "å¼€å‘ç¯å¢ƒ"
            }
        ],
        "paths": {
            "/api/v1/resources": {
                "get": {
                    "summary": "è·å–èµ„æºåˆ—è¡¨",
                    "tags": ["Resource"],
                    "parameters": [
                        {
                            "name": "page",
                            "in": "query",
                            "description": "é¡µç ",
                            "schema": {"type": "integer", "default": 1}
                        }
                    ],
                    "responses": {
                        "200": {
                            "description": "æˆåŠŸ",
                            "content": {
                                "application/json": {
                                    "schema": {"$ref": "#/components/schemas/PageResult"}
                                }
                            }
                        }
                    }
                }
            }
        },
        "components": {
            "schemas": {
                "ApiResponse": {
                    "type": "object",
                    "properties": {
                        "code": {"type": "integer", "description": "å“åº”ç "},
                        "message": {"type": "string", "description": "å“åº”æ¶ˆæ¯"},
                        "data": {"type": "object", "description": "å“åº”æ•°æ®"},
                        "timestamp": {"type": "string", "format": "date-time"}
                    }
                }
            }
        }
    },
    "api_endpoints": [
        {
            "method": "GET",
            "path": "/api/v1/resources",
            "summary": "è·å–èµ„æºåˆ—è¡¨",
            "description": "åˆ†é¡µè·å–èµ„æºåˆ—è¡¨",
            "request_example": {
                "query_params": {
                    "page": 1,
                    "size": 10,
                    "keyword": "æœç´¢å…³é”®è¯"
                }
            },
            "response_example": {
                "code": 200,
                "message": "success",
                "data": {
                    "content": [],
                    "totalElements": 100,
                    "totalPages": 10
                }
            }
        }
    ],
    "error_codes": [
        {
            "code": 400,
            "message": "è¯·æ±‚å‚æ•°é”™è¯¯",
            "description": "å®¢æˆ·ç«¯è¯·æ±‚å‚æ•°ä¸æ­£ç¡®"
        },
        {
            "code": 404,
            "message": "èµ„æºä¸å­˜åœ¨",
            "description": "è¯·æ±‚çš„èµ„æºæœªæ‰¾åˆ°"
        },
        {
            "code": 500,
            "message": "æœåŠ¡å™¨å†…éƒ¨é”™è¯¯",
            "description": "æœåŠ¡å™¨å¤„ç†è¯·æ±‚æ—¶å‘ç”Ÿé”™è¯¯"
        }
    ],
    "authentication": {
        "type": "Bearer Token",
        "header": "Authorization",
        "description": "è¯·åœ¨è¯·æ±‚å¤´ä¸­æºå¸¦ Bearer Token"
    },
    "rate_limiting": {
        "requests_per_minute": 1000,
        "burst_limit": 50,
        "description": "APIè°ƒç”¨é¢‘ç‡é™åˆ¶"
    }
}
```

## ğŸ’¡ è®¾è®¡åŸåˆ™
1. **ä¸€è‡´æ€§**: æ‰€æœ‰APIéµå¾ªç»Ÿä¸€çš„è®¾è®¡æ¨¡å¼
2. **å¯é¢„æµ‹æ€§**: å¼€å‘è€…èƒ½å¤Ÿæ¨æ–­APIçš„è¡Œä¸º
3. **è‡ªæè¿°æ€§**: APIé€šè¿‡URLå’ŒHTTPæ–¹æ³•è¡¨è¾¾æ„å›¾
4. **ç‰ˆæœ¬åŒ–**: æ”¯æŒAPIç‰ˆæœ¬æ¼”è¿›
5. **å®‰å…¨æ€§**: è€ƒè™‘è®¤è¯ã€æˆæƒå’Œæ•°æ®ä¿æŠ¤
6. **æ€§èƒ½**: æ”¯æŒåˆ†é¡µã€è¿‡æ»¤å’Œç¼“å­˜
7. **å¯æµ‹è¯•æ€§**: æä¾›å®Œæ•´çš„æµ‹è¯•ç”¨ä¾‹

## ğŸ”§ æŠ€æœ¯è§„èŒƒ
- Content-Type: application/json
- å­—ç¬¦ç¼–ç : UTF-8
- æ—¥æœŸæ ¼å¼: ISO 8601 (yyyy-MM-ddTHH:mm:ss.SSSZ)
- åˆ†é¡µå‚æ•°: page (é¡µç ), size (é¡µå¤§å°)
- æ’åºå‚æ•°: sort (å­—æ®µå,asc/desc)
- è¿‡æ»¤å‚æ•°: æ”¯æŒæŸ¥è¯¢è¡¨è¾¾å¼
{% endmacro %} 