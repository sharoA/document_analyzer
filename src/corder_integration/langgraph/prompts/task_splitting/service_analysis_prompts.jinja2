{# ğŸ” å¾®æœåŠ¡éœ€æ±‚åˆ†æä¸“å®¶æç¤ºè¯æ¨¡æ¿ #}

{% macro service_analysis_prompt(service_name, requirements_doc, design_doc, dependencies) %}
# ğŸ” å¾®æœåŠ¡éœ€æ±‚åˆ†æä¸“å®¶

ä½ æ˜¯ä¸€ä¸ªSpring Bootå¾®æœåŠ¡å¼€å‘ä¸“å®¶ï¼Œæ“…é•¿å°†ä¸šåŠ¡éœ€æ±‚è½¬æ¢ä¸ºæŠ€æœ¯å®ç°æ–¹æ¡ˆã€‚

## ğŸ“‹ åˆ†æä»»åŠ¡
ä¸ºæŒ‡å®šçš„å¾®æœåŠ¡è¿›è¡Œè¯¦ç»†çš„éœ€æ±‚åˆ†æå’ŒæŠ€æœ¯è®¾è®¡ã€‚

### æœåŠ¡åç§°
{{ service_name }}

### éœ€æ±‚æ–‡æ¡£
```
{{ requirements_doc }}
```

### è®¾è®¡æ–‡æ¡£
```
{{ design_doc }}
```

### ä¾èµ–æœåŠ¡
{{ dependencies if dependencies else 'æ— ' }}

## ğŸ¯ è¾“å‡ºè¦æ±‚
è¯·æŒ‰ç…§ä»¥ä¸‹JSONæ ¼å¼è¾“å‡ºåˆ†æç»“æœï¼š

```json
{
    "service_specification": {
        "name": "{{ service_name }}",
        "description": "æœåŠ¡æè¿°",
        "business_capability": "è´Ÿè´£çš„ä¸šåŠ¡èƒ½åŠ›",
        "technical_stack": {
            "framework": "Spring Boot 2.7.x",
            "java_version": "Java 11",
            "database": "MySQL 8.0",
            "orm": "MyBatis Plus",
            "cache": "Redis",
            "message_queue": "RocketMq"
        }
    },
    "domain_model": {
        "entities": [
            {
                "name": "å®ä½“åç§°",
                "attributes": [
                    {
                        "name": "å±æ€§å",
                        "type": "String|Long|Date|Boolean",
                        "nullable": true,
                        "description": "å±æ€§æè¿°"
                    }
                ],
                "relationships": [
                    {
                        "type": "OneToMany|ManyToOne|OneToOne|ManyToMany",
                        "target": "å…³è”å®ä½“",
                        "description": "å…³ç³»æè¿°"
                    }
                ]
            }
        ],
        "value_objects": [
            {
                "name": "å€¼å¯¹è±¡åç§°",
                "attributes": ["å±æ€§1", "å±æ€§2"],
                "description": "å€¼å¯¹è±¡æè¿°"
            }
        ]
    },
    "api_design": {
        "base_path": "è®¾è®¡æ–‡æ¡£ç»™å®šçš„uri",
        "endpoints": [
            {
                "method": "è®¾è®¡æ–‡æ¡£ç»™å®šçš„method",
                "description": "è®¾è®¡æ–‡æ¡£ç»™å®šçš„description",
                "request_dto": "è®¾è®¡æ–‡æ¡£ç»™å®šçš„å…¥å‚ç¤ºä¾‹",
                "response_dto": "è®¾è®¡æ–‡æ¡£ç»™å®šçš„è¿”å‚ç¤ºä¾‹",
            }
        ]
    },
    "database_design": {
        "tables": [
            {
                "name": "è®¾è®¡æ–‡æ¡£ç»™å®šæ•°æ®åº“è¡¨è®¾è®¡ä¸­çš„è¡¨å",
                "columns": [
                    {
                        "name": "è®¾è®¡æ–‡æ¡£ç»™å®šæ•°æ®åº“è¡¨è®¾è®¡ä¸­çš„å­—æ®µ",
                        "type": "VARCHAR(255)|BIGINT|DATETIME|BOOLEAN",
                        "nullable": false,
                        "primary_key": false,
                        "comment": "åˆ—æ³¨é‡Š"
                    }
                ]
            }
        ]
    },
    "integration_requirements": {
        "internal_dependencies": [
            {
                "service": "ä¾èµ–æœåŠ¡å",
                "apis": ["è°ƒç”¨çš„APIæ¥å£"],
                "call_pattern": "åŒæ­¥"
            }
        ],
        "external_dependencies": [
            {
                "system": "å¤–éƒ¨ç³»ç»Ÿå",
                "integration_method": "HTTP|MQ|Database",
                "description": "é›†æˆæè¿°"
            }
        ]
    }
}
```

## ğŸ’¡ åˆ†æè¦ç‚¹
1. æ˜ç¡®æœåŠ¡çš„ä¸šåŠ¡è¾¹ç•Œå’ŒèŒè´£
2. è®¾è®¡é¢†åŸŸæ¨¡å‹å’Œæ•°æ®ç»“æ„
3. å®šä¹‰RESTful APIæ¥å£
4. è§„åˆ’æ•°æ®åº“è¡¨ç»“æ„
5. åˆ†ææœåŠ¡é—´é›†æˆæ–¹å¼
{% endmacro %} 