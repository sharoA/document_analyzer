# ğŸŒ‹ ç«å±±å¼•æ“APIé…ç½®å®Œæˆ

## ğŸ“‹ é…ç½®æ¦‚è§ˆ

é¡¹ç›®å·²æˆåŠŸé…ç½®ä¸ºä½¿ç”¨ç«å±±å¼•æ“APIä½œä¸ºé»˜è®¤çš„å¤§æ¨¡å‹æœåŠ¡æä¾›å•†ã€‚

### âœ… å·²å®Œæˆçš„é…ç½®

1. **ç¯å¢ƒå˜é‡é…ç½®** (`.env`)
   ```env
   VOLCENGINE_API_KEY=7fcb3541-9363-4bfa-90aa-19e9f691bc25
   VOLCENGINE_MODEL_ID=ep-20250528194304-wbvcf
   VOLCENGINE_BASE_URL=https://ark.cn-beijing.volces.com/api/v3
   ```

2. **ç³»ç»Ÿé…ç½®æ›´æ–°** (`src/config.py`)
   - ç«å±±å¼•æ“è®¾ç½®ä¸ºé»˜è®¤APIæä¾›å•†
   - æ·»åŠ äº†å®Œæ•´çš„APIé…ç½®å‚æ•°
   - æ”¯æŒå¤šAPIæä¾›å•†åˆ‡æ¢

3. **å®¢æˆ·ç«¯ç»„ä»¶æ›´æ–°** (`src/openai_client.py`)
   - ç«å±±å¼•æ“ä¼˜å…ˆçº§è®¾ç½®ä¸ºæœ€é«˜
   - æ”¯æŒè‡ªåŠ¨é…ç½®åŠ è½½
   - æä¾›ç»Ÿä¸€çš„APIæ¥å£

4. **ä¸“ç”¨å®¢æˆ·ç«¯** (`src/volcengine_client.py`)
   - ä¸“é—¨çš„ç«å±±å¼•æ“å®¢æˆ·ç«¯ç±»
   - ä¸°å¯Œçš„é¢„å®šä¹‰åŠŸèƒ½å‡½æ•°
   - å®Œå–„çš„é”™è¯¯å¤„ç†æœºåˆ¶

## ğŸš€ æ ¸å¿ƒåŠŸèƒ½

### 1. æ™ºèƒ½éœ€æ±‚åˆ†æ
```python
from src.volcengine_client import volcengine_analyze_requirement

result = volcengine_analyze_requirement("å¼€å‘ä¸€ä¸ªç”¨æˆ·ç®¡ç†ç³»ç»Ÿ")
```

### 2. APIè®¾è®¡ç”Ÿæˆ
```python
from src.volcengine_client import volcengine_generate_api_design

api_design = volcengine_generate_api_design("ç”¨æˆ·ç®¡ç†ç³»ç»Ÿéœ€æ±‚")
```

### 3. è®¾è®¡æ–‡æ¡£ç”Ÿæˆ
```python
from src.volcengine_client import volcengine_generate_design_document

# åç«¯è®¾è®¡æ–‡æ¡£
backend_doc = volcengine_generate_design_document("éœ€æ±‚å†…å®¹", "backend")

# å‰ç«¯è®¾è®¡æ–‡æ¡£
frontend_doc = volcengine_generate_design_document("éœ€æ±‚å†…å®¹", "frontend")
```

### 4. ä»£ç ç”Ÿæˆ
```python
from src.volcengine_client import volcengine_generate_code

code = volcengine_generate_code("å®ç°ç”¨æˆ·ç™»å½•åŠŸèƒ½", "python")
```

### 5. é€šç”¨èŠå¤©
```python
from src.volcengine_client import volcengine_chat

response = volcengine_chat([
    {"role": "user", "content": "ä½ å¥½ï¼Œè¯·å¸®æˆ‘åˆ†æè¿™ä¸ªéœ€æ±‚"}
])
```

### 6. æµå¼èŠå¤©
```python
from src.volcengine_client import volcengine_stream_chat

for chunk in volcengine_stream_chat([
    {"role": "user", "content": "è¯·è¯¦ç»†è§£é‡Šè¿™ä¸ªæŠ€æœ¯æ–¹æ¡ˆ"}
]):
    print(chunk, end="")
```

## ğŸ”§ ä½¿ç”¨æ–¹å¼

### æ–¹å¼ä¸€ï¼šä½¿ç”¨ä¸“ç”¨å®¢æˆ·ç«¯
```python
from src.volcengine_client import get_volcengine_client

client = get_volcengine_client()
response = client.chat([
    {"role": "user", "content": "ä½ çš„é—®é¢˜"}
])
```

### æ–¹å¼äºŒï¼šä½¿ç”¨é€šç”¨å®¢æˆ·ç«¯
```python
from src.openai_client import chat_with_ai

# é»˜è®¤ä½¿ç”¨ç«å±±å¼•æ“
response = chat_with_ai([
    {"role": "user", "content": "ä½ çš„é—®é¢˜"}
])

# æ˜ç¡®æŒ‡å®šä½¿ç”¨ç«å±±å¼•æ“
response = chat_with_ai([
    {"role": "user", "content": "ä½ çš„é—®é¢˜"}
], client_name="volcengine")
```

### æ–¹å¼ä¸‰ï¼šä½¿ç”¨ä¾¿æ·å‡½æ•°
```python
from src.volcengine_client import (
    volcengine_chat,
    volcengine_analyze_requirement,
    volcengine_generate_api_design
)

# ç›´æ¥èŠå¤©
response = volcengine_chat([{"role": "user", "content": "ä½ å¥½"}])

# éœ€æ±‚åˆ†æ
analysis = volcengine_analyze_requirement("éœ€æ±‚æ–‡æ¡£å†…å®¹")

# APIè®¾è®¡
api_design = volcengine_generate_api_design("éœ€æ±‚å†…å®¹")
```

## ğŸ“Š é…ç½®å‚æ•°

### é»˜è®¤å‚æ•°è®¾ç½®
- **æ¸©åº¦ (Temperature)**: 0.7
- **æœ€å¤§Tokenæ•°**: 2000
- **è¶…æ—¶æ—¶é—´**: 60ç§’
- **æ¨¡å‹ID**: ep-20250528194304-wbvcf

### è‡ªå®šä¹‰å‚æ•°
```python
# è‡ªå®šä¹‰æ¸©åº¦å’ŒTokenæ•°
response = volcengine_chat(
    messages=[{"role": "user", "content": "ä½ å¥½"}],
    temperature=0.3,
    max_tokens=1000
)
```

## ğŸ› ï¸ æµ‹è¯•éªŒè¯

### 1. è¿è¡Œé…ç½®æµ‹è¯•
```bash
python test_volcengine_simple.py
```

### 2. è¿è¡Œå®Œæ•´æµ‹è¯•
```bash
python tests/lianjieLLM.py
```

### 3. æµ‹è¯•ä¸“ç”¨å®¢æˆ·ç«¯
```bash
python src/volcengine_client.py
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
analyDesign/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ config.py              # ç³»ç»Ÿé…ç½®ï¼ˆç«å±±å¼•æ“ä¸ºé»˜è®¤ï¼‰
â”‚   â”œâ”€â”€ openai_client.py       # é€šç”¨å®¢æˆ·ç«¯ï¼ˆæ”¯æŒå¤šAPIï¼‰
â”‚   â””â”€â”€ volcengine_client.py   # ç«å±±å¼•æ“ä¸“ç”¨å®¢æˆ·ç«¯
â”œâ”€â”€ tests/
â”‚   â””â”€â”€ lianjieLLM.py          # APIè¿æ¥æµ‹è¯•
â”œâ”€â”€ .env                       # ç¯å¢ƒå˜é‡é…ç½®
â””â”€â”€ test_volcengine_simple.py  # ç®€å•æµ‹è¯•è„šæœ¬
```

## ğŸ¯ ä¼˜åŠ¿ç‰¹ç‚¹

1. **ç»Ÿä¸€æ¥å£**: æ‰€æœ‰AIåŠŸèƒ½éƒ½é€šè¿‡ç»Ÿä¸€çš„æ¥å£è°ƒç”¨
2. **è‡ªåŠ¨é…ç½®**: ä»ç¯å¢ƒå˜é‡è‡ªåŠ¨åŠ è½½é…ç½®
3. **é”™è¯¯å¤„ç†**: å®Œå–„çš„å¼‚å¸¸å¤„ç†å’Œæ—¥å¿—è®°å½•
4. **åŠŸèƒ½ä¸°å¯Œ**: é¢„å®šä¹‰äº†å¸¸ç”¨çš„AIä»»åŠ¡å‡½æ•°
5. **æ˜“äºæ‰©å±•**: æ”¯æŒæ·»åŠ æ–°çš„APIæä¾›å•†
6. **æ€§èƒ½ä¼˜åŒ–**: å•ä¾‹æ¨¡å¼é¿å…é‡å¤åˆå§‹åŒ–

## ğŸ”„ åˆ‡æ¢å…¶ä»–API

å¦‚æœéœ€è¦åˆ‡æ¢åˆ°å…¶ä»–APIæä¾›å•†ï¼Œåªéœ€ï¼š

1. **ä¸´æ—¶åˆ‡æ¢**:
   ```python
   # ä½¿ç”¨DeepSeek
   response = chat_with_ai(messages, client_name="deepseek")
   
   # ä½¿ç”¨OpenAI
   response = chat_with_ai(messages, client_name="openai")
   ```

2. **æ°¸ä¹…åˆ‡æ¢**: ä¿®æ”¹ `src/config.py` ä¸­çš„ `DEFAULT_API_PROVIDER`

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **APIå¯†é’¥å®‰å…¨**: è¯·å¦¥å–„ä¿ç®¡APIå¯†é’¥ï¼Œä¸è¦æäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶
2. **ç½‘ç»œè¿æ¥**: ç¡®ä¿ç½‘ç»œè¿æ¥ç¨³å®šï¼ŒAPIè°ƒç”¨éœ€è¦è®¿é—®å¤–ç½‘
3. **Tokené™åˆ¶**: æ³¨æ„æ¨¡å‹çš„Tokené™åˆ¶ï¼Œé¿å…è¶…å‡ºé™åˆ¶
4. **æˆæœ¬æ§åˆ¶**: åˆç†è®¾ç½®å‚æ•°ï¼Œæ§åˆ¶APIè°ƒç”¨æˆæœ¬

## ğŸ‰ æ€»ç»“

ç«å±±å¼•æ“APIå·²æˆåŠŸé…ç½®ä¸ºé¡¹ç›®çš„é»˜è®¤å¤§æ¨¡å‹æœåŠ¡ï¼Œä½ ç°åœ¨å¯ä»¥ï¼š

- âœ… ä½¿ç”¨ç«å±±å¼•æ“è¿›è¡Œæ™ºèƒ½éœ€æ±‚åˆ†æ
- âœ… ç”ŸæˆAPIè®¾è®¡æ–‡æ¡£
- âœ… åˆ›å»ºç³»ç»Ÿè®¾è®¡æ–‡æ¡£
- âœ… ç”Ÿæˆé«˜è´¨é‡ä»£ç 
- âœ… è¿›è¡Œæ™ºèƒ½å¯¹è¯å’Œå’¨è¯¢

é¡¹ç›®å·²å‡†å¤‡å°±ç»ªï¼Œå¯ä»¥å¼€å§‹ä½ çš„æ™ºèƒ½éœ€æ±‚åˆ†æå’Œè®¾è®¡æ–‡æ¡£ç”Ÿæˆå·¥ä½œï¼ğŸš€ 