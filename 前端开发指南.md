# analyDesign å‰ç«¯å¼€å‘æŒ‡å—

## ğŸ¯ é¡¹ç›®æ¶æ„

### æŠ€æœ¯æ ˆ
- **å‰ç«¯æ¡†æ¶**: Vue 3 + Composition API
- **UI ç»„ä»¶åº“**: Element Plus
- **çŠ¶æ€ç®¡ç†**: Pinia
- **æ„å»ºå·¥å…·**: Vite
- **æ ·å¼**: SCSS
- **å®æ—¶é€šä¿¡**: WebSocket
- **åç«¯**: Python + WebSocket Server

### é¡¹ç›®ç»“æ„
```
analyDesign/
â”œâ”€â”€ frontend/                    # å‰ç«¯é¡¹ç›®
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/         # Vue ç»„ä»¶
â”‚   â”‚   â”‚   â””â”€â”€ ChatInterface.vue
â”‚   â”‚   â”œâ”€â”€ stores/            # Pinia çŠ¶æ€ç®¡ç†
â”‚   â”‚   â”‚   â””â”€â”€ websocket.js
â”‚   â”‚   â”œâ”€â”€ assets/            # é™æ€èµ„æº
â”‚   â”‚   â”‚   â””â”€â”€ styles/
â”‚   â”‚   â”‚       â””â”€â”€ global.scss
â”‚   â”‚   â”œâ”€â”€ utils/             # å·¥å…·å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ App.vue            # æ ¹ç»„ä»¶
â”‚   â”‚   â””â”€â”€ main.js            # å…¥å£æ–‡ä»¶
â”‚   â”œâ”€â”€ package.json           # å‰ç«¯ä¾èµ–
â”‚   â”œâ”€â”€ vite.config.js         # Vite é…ç½®
â”‚   â””â”€â”€ index.html             # HTML æ¨¡æ¿
â”œâ”€â”€ src/                       # åç«¯é¡¹ç›®
â”‚   â”œâ”€â”€ websocket_server.py    # WebSocket æœåŠ¡å™¨
â”‚   â”œâ”€â”€ enhanced_analyzer.py   # åˆ†æå™¨
â”‚   â””â”€â”€ config.py              # é…ç½®æ–‡ä»¶
â”œâ”€â”€ analyDesign_env/           # Python è™šæ‹Ÿç¯å¢ƒ
â””â”€â”€ requirements.txt           # Python ä¾èµ–
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒå‡†å¤‡
```powershell
# è®¾ç½® Python ç¯å¢ƒ
.\setup_env.ps1

# è®¾ç½®å‰ç«¯ç¯å¢ƒ
.\setup_frontend.ps1
```

### 2. å¯åŠ¨åº”ç”¨
```powershell
# ä¸€é”®å¯åŠ¨å‰åç«¯
.\start_full_app.ps1

# æˆ–è€…åˆ†åˆ«å¯åŠ¨
# åç«¯
.\analyDesign_env\Scripts\python.exe src\websocket_server.py

# å‰ç«¯
cd frontend
npm run dev
```

### 3. è®¿é—®åº”ç”¨
- å‰ç«¯åœ°å€: http://localhost:3000
- WebSocket åœ°å€: ws://localhost:8765

## ğŸ¨ ç•Œé¢è®¾è®¡

### ä¸»è¦ç‰¹æ€§
1. **ä¸‰æ å¸ƒå±€**: å·¦ä¾§è¾¹æ  + ä¸»èŠå¤©åŒº + å³ä¾§é¢æ¿ï¼ˆå¯é€‰ï¼‰
2. **å®æ—¶èŠå¤©**: WebSocket é•¿è¿æ¥ï¼Œæ”¯æŒå®æ—¶æ¶ˆæ¯æ¨é€
3. **æ™ºèƒ½åˆ†æ**: é›†æˆ AI åˆ†æåŠŸèƒ½ï¼Œæ˜¾ç¤ºç½®ä¿¡åº¦å’Œå»ºè®®
4. **å“åº”å¼è®¾è®¡**: é€‚é…ä¸åŒå±å¹•å°ºå¯¸
5. **ç°ä»£ UI**: åŸºäº Element Plusï¼Œç¾è§‚æ˜“ç”¨

### ç•Œé¢ç»„ä»¶
- **å·¦ä¾§è¾¹æ **: ä»»åŠ¡å†å²ã€åŠŸèƒ½ä»‹ç»
- **èŠå¤©åŒºåŸŸ**: æ¶ˆæ¯å±•ç¤ºã€è¾“å…¥æ¡†ã€å·¥å…·æ 
- **æ¶ˆæ¯ç±»å‹**: ç”¨æˆ·æ¶ˆæ¯ã€AI å›å¤ã€ç³»ç»Ÿæ¶ˆæ¯ã€é”™è¯¯æ¶ˆæ¯
- **çŠ¶æ€æŒ‡ç¤º**: è¿æ¥çŠ¶æ€ã€å‘é€çŠ¶æ€ã€å¤„ç†çŠ¶æ€

## ğŸ”§ å¼€å‘æŒ‡å—

### WebSocket é€šä¿¡åè®®

#### å®¢æˆ·ç«¯å‘é€æ¶ˆæ¯æ ¼å¼
```javascript
{
  "type": "chat",           // æ¶ˆæ¯ç±»å‹: chat, file_upload, ping
  "message": "ç”¨æˆ·è¾“å…¥çš„å†…å®¹",
  "message_id": "unique_id",
  "timestamp": "2024-01-01T00:00:00.000Z"
}
```

#### æœåŠ¡ç«¯å“åº”æ ¼å¼
```javascript
{
  "type": "chat_response",  // å“åº”ç±»å‹
  "message": "AI å›å¤å†…å®¹",
  "analysis": {             // åˆ†æç»“æœ
    "confidence": 0.85,
    "analysis_type": "product_design",
    "suggestions": ["å»ºè®®1", "å»ºè®®2"]
  },
  "timestamp": "2024-01-01T00:00:00.000Z",
  "message_id": "unique_id",
  "status": "completed"
}
```

### çŠ¶æ€ç®¡ç†

#### WebSocket Store (Pinia)
```javascript
// ä¸»è¦çŠ¶æ€
const isConnected = ref(false)      // è¿æ¥çŠ¶æ€
const messages = ref([])            // æ¶ˆæ¯åˆ—è¡¨
const connectionStatus = ref('disconnected')

// ä¸»è¦æ–¹æ³•
connect()                           // å»ºç«‹è¿æ¥
disconnect()                        // æ–­å¼€è¿æ¥
sendMessage(message)                // å‘é€æ¶ˆæ¯
addMessage(message)                 // æ·»åŠ æ¶ˆæ¯
clearMessages()                     // æ¸…ç©ºæ¶ˆæ¯
```

### ç»„ä»¶å¼€å‘

#### æ¶ˆæ¯ç»„ä»¶ç»“æ„
```vue
<template>
  <div class="message" :class="message.type">
    <!-- ç”¨æˆ·æ¶ˆæ¯ -->
    <div v-if="message.type === 'user'" class="user-message">
      <!-- æ¶ˆæ¯å†…å®¹ -->
    </div>
    
    <!-- AI å›å¤ -->
    <div v-else-if="message.type === 'chat_response'" class="bot-message">
      <!-- AI å¤´åƒ + æ¶ˆæ¯å†…å®¹ -->
    </div>
    
    <!-- å¤„ç†ä¸­çŠ¶æ€ -->
    <div v-else-if="message.type === 'processing'" class="processing-message">
      <!-- åŠ è½½åŠ¨ç”» + çŠ¶æ€æ–‡æœ¬ -->
    </div>
  </div>
</template>
```

## ğŸ¨ æ ·å¼æŒ‡å—

### è®¾è®¡åŸåˆ™
1. **ç®€æ´ç°ä»£**: æ¸…çˆ½çš„ç•Œé¢ï¼Œçªå‡ºå†…å®¹
2. **ä¸€è‡´æ€§**: ç»Ÿä¸€çš„é¢œè‰²ã€å­—ä½“ã€é—´è·
3. **å¯è®¿é—®æ€§**: è‰¯å¥½çš„å¯¹æ¯”åº¦å’Œå¯è¯»æ€§
4. **å“åº”å¼**: é€‚é…å„ç§è®¾å¤‡

### é¢œè‰²è§„èŒƒ
```scss
// ä¸»è‰²è°ƒ
$primary-color: #409eff;
$success-color: #67c23a;
$warning-color: #e6a23c;
$danger-color: #f56c6c;

// æ–‡å­—é¢œè‰²
$text-primary: #303133;
$text-regular: #606266;
$text-secondary: #909399;
$text-placeholder: #c0c4cc;

// èƒŒæ™¯é¢œè‰²
$bg-primary: #ffffff;
$bg-secondary: #f5f7fa;
$bg-tertiary: #fafbfc;
```

### ç»„ä»¶æ ·å¼
```scss
// æ¶ˆæ¯æ°”æ³¡
.user-message {
  background: $primary-color;
  color: white;
  border-radius: 12px;
  border-bottom-right-radius: 4px;
}

.bot-message {
  background: white;
  border-radius: 12px;
  border-top-left-radius: 4px;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}
```

## ğŸ”Œ API é›†æˆ

### åç«¯åˆ†æå™¨é›†æˆ
```python
# åœ¨ websocket_server.py ä¸­
from enhanced_analyzer import EnhancedAnalyzer

class WebSocketChatServer:
    def __init__(self):
        self.analyzer = EnhancedAnalyzer()
    
    async def handle_chat_message(self, websocket, user_message, message_id):
        # è°ƒç”¨åˆ†æå™¨
        analysis_result = await self.analyzer.analyze_async(user_message)
        
        # å‘é€ç»“æœ
        response = {
            "type": "chat_response",
            "message": analysis_result.get("response"),
            "analysis": analysis_result,
            "timestamp": datetime.now().isoformat(),
            "message_id": message_id
        }
        await websocket.send(json.dumps(response, ensure_ascii=False))
```

## ğŸš€ éƒ¨ç½²æŒ‡å—

### å¼€å‘ç¯å¢ƒ
```powershell
# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
.\start_full_app.ps1
```

### ç”Ÿäº§ç¯å¢ƒ
```powershell
# æ„å»ºå‰ç«¯
cd frontend
npm run build

# å¯åŠ¨åç«¯
.\analyDesign_env\Scripts\python.exe src\websocket_server.py
```

## ğŸ› æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **WebSocket è¿æ¥å¤±è´¥**
   - æ£€æŸ¥åç«¯æœåŠ¡å™¨æ˜¯å¦å¯åŠ¨
   - ç¡®è®¤ç«¯å£ 8765 æœªè¢«å ç”¨
   - æ£€æŸ¥é˜²ç«å¢™è®¾ç½®

2. **å‰ç«¯ä¾èµ–å®‰è£…å¤±è´¥**
   - æ£€æŸ¥ Node.js ç‰ˆæœ¬ (éœ€è¦ 16+)
   - æ¸…é™¤ npm ç¼“å­˜: `npm cache clean --force`
   - åˆ é™¤ node_modules é‡æ–°å®‰è£…

3. **æ ·å¼æ˜¾ç¤ºå¼‚å¸¸**
   - æ£€æŸ¥ SCSS ç¼–è¯‘æ˜¯å¦æ­£å¸¸
   - ç¡®è®¤ Element Plus æ ·å¼å·²æ­£ç¡®å¯¼å…¥

### è°ƒè¯•æŠ€å·§
```javascript
// åœ¨æµè§ˆå™¨æ§åˆ¶å°æŸ¥çœ‹ WebSocket çŠ¶æ€
console.log(wsStore.connectionStatus)
console.log(wsStore.messages)

// æ‰‹åŠ¨å‘é€æµ‹è¯•æ¶ˆæ¯
wsStore.sendMessage("æµ‹è¯•æ¶ˆæ¯")
```

## ğŸ“ å¼€å‘è§„èŒƒ

### ä»£ç é£æ ¼
- ä½¿ç”¨ 2 ç©ºæ ¼ç¼©è¿›
- ç»„ä»¶åä½¿ç”¨ PascalCase
- æ–‡ä»¶åä½¿ç”¨ kebab-case
- å˜é‡åä½¿ç”¨ camelCase

### Git æäº¤è§„èŒƒ
```
feat: æ–°åŠŸèƒ½
fix: ä¿®å¤ bug
docs: æ–‡æ¡£æ›´æ–°
style: æ ·å¼è°ƒæ•´
refactor: ä»£ç é‡æ„
test: æµ‹è¯•ç›¸å…³
chore: æ„å»º/å·¥å…·ç›¸å…³
```

---

**å½“å‰çŠ¶æ€**: âœ… å‰ç«¯ç¯å¢ƒå·²é…ç½®å®Œæˆï¼Œæ”¯æŒ Vue 3 + WebSocket å®æ—¶èŠå¤©ï¼ 